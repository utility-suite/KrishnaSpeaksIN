import{a as Gf,b as Kf,d as Qf,e as Yf,f as Xf,g as Jf,h as Zf}from"./chunk-EG4CHWF6.js";import{i as jf,k as qf,l as zf,m as Wf,n as Hf}from"./chunk-3DJBFSMY.js";import{$ as Pf,$a as Gi,Ab as Uf,Ba as ln,D as Sf,Fb as $f,Ga as yu,Gb as Bf,Hb as vu,Ma as Df,Qa as Nf,T as Ia,Ta as pr,W as Ea,X as Cf,Y as Bn,Z as Ta,a as Xe,aa as ba,ab as Fe,b as Xr,ba as jn,bb as Ue,c as nv,ca as qn,cb as hn,d as rv,da as Hi,e as D,h as io,ia as Rf,ib as Of,ja as _u,la as Aa,lb as zn,m as bf,ma as fr,mb as xf,n as Af,nb as mr,ob as Vf,p as pu,pb as mt,q as mu,r as gu,rb as so,ua as kf,vb as Lf,wb as Sa,xb as Mf,yb as Ff}from"./chunk-YK6QJ2OM.js";var M_=nv((Vd,Ld)=>{"use strict";(function(n,e){typeof Vd=="object"&&typeof Ld<"u"?Ld.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).bootstrap=e()})(Vd,function(){"use strict";let n=new Map,e={set(p,a,l){n.has(p)||n.set(p,new Map);let _=n.get(p);_.has(a)||_.size===0?_.set(a,l):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(_.keys())[0]}.`)},get:(p,a)=>n.has(p)&&n.get(p).get(a)||null,remove(p,a){if(!n.has(p))return;let l=n.get(p);l.delete(a),l.size===0&&n.delete(p)}},t="transitionend",r=p=>(p&&window.CSS&&window.CSS.escape&&(p=p.replace(/#([^\s"#']+)/g,(a,l)=>`#${CSS.escape(l)}`)),p),i=p=>{p.dispatchEvent(new Event(t))},o=p=>!(!p||typeof p!="object")&&(p.jquery!==void 0&&(p=p[0]),p.nodeType!==void 0),c=p=>o(p)?p.jquery?p[0]:p:typeof p=="string"&&p.length>0?document.querySelector(r(p)):null,h=p=>{if(!o(p)||p.getClientRects().length===0)return!1;let a=getComputedStyle(p).getPropertyValue("visibility")==="visible",l=p.closest("details:not([open])");if(!l)return a;if(l!==p){let _=p.closest("summary");if(_&&_.parentNode!==l||_===null)return!1}return a},f=p=>!p||p.nodeType!==Node.ELEMENT_NODE||!!p.classList.contains("disabled")||(p.disabled!==void 0?p.disabled:p.hasAttribute("disabled")&&p.getAttribute("disabled")!=="false"),m=p=>{if(!document.documentElement.attachShadow)return null;if(typeof p.getRootNode=="function"){let a=p.getRootNode();return a instanceof ShadowRoot?a:null}return p instanceof ShadowRoot?p:p.parentNode?m(p.parentNode):null},y=()=>{},b=p=>{p.offsetHeight},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,x=[],$=()=>document.documentElement.dir==="rtl",q=p=>{var a;a=()=>{let l=E();if(l){let _=p.NAME,T=l.fn[_];l.fn[_]=p.jQueryInterface,l.fn[_].Constructor=p,l.fn[_].noConflict=()=>(l.fn[_]=T,p.jQueryInterface)}},document.readyState==="loading"?(x.length||document.addEventListener("DOMContentLoaded",()=>{for(let l of x)l()}),x.push(a)):a()},U=(p,a=[],l=p)=>typeof p=="function"?p.call(...a):l,ce=(p,a,l=!0)=>{if(!l)return void U(p);let _=(O=>{if(!O)return 0;let{transitionDuration:V,transitionDelay:j}=window.getComputedStyle(O),H=Number.parseFloat(V),G=Number.parseFloat(j);return H||G?(V=V.split(",")[0],j=j.split(",")[0],1e3*(Number.parseFloat(V)+Number.parseFloat(j))):0})(a)+5,T=!1,C=({target:O})=>{O===a&&(T=!0,a.removeEventListener(t,C),U(p))};a.addEventListener(t,C),setTimeout(()=>{T||i(a)},_)},Z=(p,a,l,_)=>{let T=p.length,C=p.indexOf(a);return C===-1?!l&&_?p[T-1]:p[0]:(C+=l?1:-1,_&&(C=(C+T)%T),p[Math.max(0,Math.min(C,T-1))])},oe=/[^.]*(?=\..*)\.|.*/,we=/\..*/,st=/::\d+$/,ge={},S=1,v={mouseenter:"mouseover",mouseleave:"mouseout"},I=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function A(p,a){return a&&`${a}::${S++}`||p.uidEvent||S++}function P(p){let a=A(p);return p.uidEvent=a,ge[a]=ge[a]||{},ge[a]}function k(p,a,l=null){return Object.values(p).find(_=>_.callable===a&&_.delegationSelector===l)}function w(p,a,l){let _=typeof a=="string",T=_?l:a||l,C=er(p);return I.has(C)||(C=p),[_,T,C]}function bt(p,a,l,_,T){if(typeof a!="string"||!p)return;let[C,O,V]=w(a,l,_);a in v&&(O=(ne=>function(ee){if(!ee.relatedTarget||ee.relatedTarget!==ee.delegateTarget&&!ee.delegateTarget.contains(ee.relatedTarget))return ne.call(this,ee)})(O));let j=P(p),H=j[V]||(j[V]={}),G=k(H,O,C?l:null);if(G)return void(G.oneOff=G.oneOff&&T);let z=A(O,a.replace(oe,"")),ae=C?function(J,ne,ee){return function re(Ae){let Pe=J.querySelectorAll(ne);for(let{target:he}=Ae;he&&he!==this;he=he.parentNode)for(let _e of Pe)if(_e===he)return Pr(Ae,{delegateTarget:he}),re.oneOff&&L.off(J,Ae.type,ne,ee),ee.apply(he,[Ae])}}(p,l,O):function(J,ne){return function ee(re){return Pr(re,{delegateTarget:J}),ee.oneOff&&L.off(J,re.type,ne),ne.apply(J,[re])}}(p,O);ae.delegationSelector=C?l:null,ae.callable=O,ae.oneOff=T,ae.uidEvent=z,H[z]=ae,p.addEventListener(V,ae,C)}function In(p,a,l,_,T){let C=k(a[l],_,T);C&&(p.removeEventListener(l,C,!!T),delete a[l][C.uidEvent])}function Hc(p,a,l,_){let T=a[l]||{};for(let[C,O]of Object.entries(T))C.includes(_)&&In(p,a,l,O.callable,O.delegationSelector)}function er(p){return p=p.replace(we,""),v[p]||p}let L={on(p,a,l,_){bt(p,a,l,_,!1)},one(p,a,l,_){bt(p,a,l,_,!0)},off(p,a,l,_){if(typeof a!="string"||!p)return;let[T,C,O]=w(a,l,_),V=O!==a,j=P(p),H=j[O]||{},G=a.startsWith(".");if(C===void 0){if(G)for(let z of Object.keys(j))Hc(p,j,z,a.slice(1));for(let[z,ae]of Object.entries(H)){let J=z.replace(st,"");V&&!a.includes(J)||In(p,j,O,ae.callable,ae.delegationSelector)}}else{if(!Object.keys(H).length)return;In(p,j,O,C,T?l:null)}},trigger(p,a,l){if(typeof a!="string"||!p)return null;let _=E(),T=null,C=!0,O=!0,V=!1;a!==er(a)&&_&&(T=_.Event(a,l),_(p).trigger(T),C=!T.isPropagationStopped(),O=!T.isImmediatePropagationStopped(),V=T.isDefaultPrevented());let j=Pr(new Event(a,{bubbles:C,cancelable:!0}),l);return V&&j.preventDefault(),O&&p.dispatchEvent(j),j.defaultPrevented&&T&&T.preventDefault(),j}};function Pr(p,a={}){for(let[l,_]of Object.entries(a))try{p[l]=_}catch{Object.defineProperty(p,l,{configurable:!0,get:()=>_})}return p}function bs(p){if(p==="true")return!0;if(p==="false")return!1;if(p===Number(p).toString())return Number(p);if(p===""||p==="null")return null;if(typeof p!="string")return p;try{return JSON.parse(decodeURIComponent(p))}catch{return p}}function As(p){return p.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}let Ze={setDataAttribute(p,a,l){p.setAttribute(`data-bs-${As(a)}`,l)},removeDataAttribute(p,a){p.removeAttribute(`data-bs-${As(a)}`)},getDataAttributes(p){if(!p)return{};let a={},l=Object.keys(p.dataset).filter(_=>_.startsWith("bs")&&!_.startsWith("bsConfig"));for(let _ of l){let T=_.replace(/^bs/,"");T=T.charAt(0).toLowerCase()+T.slice(1),a[T]=bs(p.dataset[_])}return a},getDataAttribute:(p,a)=>bs(p.getAttribute(`data-bs-${As(a)}`))};class De{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,l){let _=o(l)?Ze.getDataAttribute(l,"config"):{};return Xe(Xe(Xe(Xe({},this.constructor.Default),typeof _=="object"?_:{}),o(l)?Ze.getDataAttributes(l):{}),typeof a=="object"?a:{})}_typeCheckConfig(a,l=this.constructor.DefaultType){for(let[T,C]of Object.entries(l)){let O=a[T],V=o(O)?"element":(_=O)==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(C).test(V))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${T}" provided type "${V}" but expected type "${C}".`)}var _}}class yt extends De{constructor(a,l){super(),(a=c(a))&&(this._element=a,this._config=this._getConfig(l),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),L.off(this._element,this.constructor.EVENT_KEY);for(let a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,l,_=!0){ce(a,l,_)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return e.get(c(a),this.DATA_KEY)}static getOrCreateInstance(a,l={}){return this.getInstance(a)||new this(a,typeof l=="object"?l:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}let En=p=>{let a=p.getAttribute("data-bs-target");if(!a||a==="#"){let l=p.getAttribute("href");if(!l||!l.includes("#")&&!l.startsWith("."))return null;l.includes("#")&&!l.startsWith("#")&&(l=`#${l.split("#")[1]}`),a=l&&l!=="#"?l.trim():null}return a?a.split(",").map(l=>r(l)).join(","):null},Q={find:(p,a=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(a,p)),findOne:(p,a=document.documentElement)=>Element.prototype.querySelector.call(a,p),children:(p,a)=>[].concat(...p.children).filter(l=>l.matches(a)),parents(p,a){let l=[],_=p.parentNode.closest(a);for(;_;)l.push(_),_=_.parentNode.closest(a);return l},prev(p,a){let l=p.previousElementSibling;for(;l;){if(l.matches(a))return[l];l=l.previousElementSibling}return[]},next(p,a){let l=p.nextElementSibling;for(;l;){if(l.matches(a))return[l];l=l.nextElementSibling}return[]},focusableChildren(p){let a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(l=>`${l}:not([tabindex^="-"])`).join(",");return this.find(a,p).filter(l=>!f(l)&&h(l))},getSelectorFromElement(p){let a=En(p);return a&&Q.findOne(a)?a:null},getElementFromSelector(p){let a=En(p);return a?Q.findOne(a):null},getMultipleElementsFromSelector(p){let a=En(p);return a?Q.find(a):[]}},Xt=(p,a="hide")=>{let l=`click.dismiss${p.EVENT_KEY}`,_=p.NAME;L.on(document,l,`[data-bs-dismiss="${_}"]`,function(T){if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),f(this))return;let C=Q.getElementFromSelector(this)||this.closest(`.${_}`);p.getOrCreateInstance(C)[a]()})},jo=".bs.alert",Gc=`close${jo}`,Ti=`closed${jo}`;class Jt extends yt{static get NAME(){return"alert"}close(){if(L.trigger(this._element,Gc).defaultPrevented)return;this._element.classList.remove("show");let a=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),L.trigger(this._element,Ti),this.dispose()}static jQueryInterface(a){return this.each(function(){let l=Jt.getOrCreateInstance(this);if(typeof a=="string"){if(l[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);l[a](this)}})}}Xt(Jt,"close"),q(Jt);let bi='[data-bs-toggle="button"]';class Tn extends yt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(a){return this.each(function(){let l=Tn.getOrCreateInstance(this);a==="toggle"&&l[a]()})}}L.on(document,"click.bs.button.data-api",bi,p=>{p.preventDefault();let a=p.target.closest(bi);Tn.getOrCreateInstance(a).toggle()}),q(Tn);let Zt=".bs.swipe",Ss=`touchstart${Zt}`,qo=`touchmove${Zt}`,zo=`touchend${Zt}`,Kc=`pointerdown${Zt}`,Wo=`pointerup${Zt}`,Ho={endCallback:null,leftCallback:null,rightCallback:null},Cs={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Rr extends De{constructor(a,l){super(),this._element=a,a&&Rr.isSupported()&&(this._config=this._getConfig(l),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ho}static get DefaultType(){return Cs}static get NAME(){return"swipe"}dispose(){L.off(this._element,Zt)}_start(a){this._supportPointerEvents?this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX):this._deltaX=a.touches[0].clientX}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),U(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){let a=Math.abs(this._deltaX);if(a<=40)return;let l=a/this._deltaX;this._deltaX=0,l&&U(l>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(L.on(this._element,Kc,a=>this._start(a)),L.on(this._element,Wo,a=>this._end(a)),this._element.classList.add("pointer-event")):(L.on(this._element,Ss,a=>this._start(a)),L.on(this._element,qo,a=>this._move(a)),L.on(this._element,zo,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&(a.pointerType==="pen"||a.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}let en=".bs.carousel",Ai=".data-api",Ps="ArrowLeft",Rs="ArrowRight",Ne="next",Oe="prev",Ut="left",kr="right",Go=`slide${en}`,ks=`slid${en}`,Dr=`keydown${en}`,Ko=`mouseenter${en}`,Qo=`mouseleave${en}`,Ds=`dragstart${en}`,Qc=`load${en}${Ai}`,Yc=`click${en}${Ai}`,Si="carousel",Nr="active",Ns=".active",tr=".carousel-item",Os=Ns+tr,xs={[Ps]:kr,[Rs]:Ut},bn={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Yo={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $t extends yt{constructor(a,l){super(a,l),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Q.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Si&&this.cycle()}static get Default(){return bn}static get DefaultType(){return Yo}static get NAME(){return"carousel"}next(){this._slide(Ne)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(Oe)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?L.one(this._element,ks,()=>this.cycle()):this.cycle())}to(a){let l=this._getItems();if(a>l.length-1||a<0)return;if(this._isSliding)return void L.one(this._element,ks,()=>this.to(a));let _=this._getItemIndex(this._getActive());if(_===a)return;let T=a>_?Ne:Oe;this._slide(T,l[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&L.on(this._element,Dr,a=>this._keydown(a)),this._config.pause==="hover"&&(L.on(this._element,Ko,()=>this.pause()),L.on(this._element,Qo,()=>this._maybeEnableCycle())),this._config.touch&&Rr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let l of Q.find(".carousel-item img",this._element))L.on(l,Ds,_=>_.preventDefault());let a={leftCallback:()=>this._slide(this._directionToOrder(Ut)),rightCallback:()=>this._slide(this._directionToOrder(kr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Rr(this._element,a)}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;let l=xs[a.key];l&&(a.preventDefault(),this._slide(this._directionToOrder(l)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;let l=Q.findOne(Ns,this._indicatorsElement);l.classList.remove(Nr),l.removeAttribute("aria-current");let _=Q.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);_&&(_.classList.add(Nr),_.setAttribute("aria-current","true"))}_updateInterval(){let a=this._activeElement||this._getActive();if(!a)return;let l=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=l||this._config.defaultInterval}_slide(a,l=null){if(this._isSliding)return;let _=this._getActive(),T=a===Ne,C=l||Z(this._getItems(),_,T,this._config.wrap);if(C===_)return;let O=this._getItemIndex(C),V=z=>L.trigger(this._element,z,{relatedTarget:C,direction:this._orderToDirection(a),from:this._getItemIndex(_),to:O});if(V(Go).defaultPrevented||!_||!C)return;let j=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(O),this._activeElement=C;let H=T?"carousel-item-start":"carousel-item-end",G=T?"carousel-item-next":"carousel-item-prev";C.classList.add(G),b(C),_.classList.add(H),C.classList.add(H),this._queueCallback(()=>{C.classList.remove(H,G),C.classList.add(Nr),_.classList.remove(Nr,G,H),this._isSliding=!1,V(ks)},_,this._isAnimated()),j&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Q.findOne(Os,this._element)}_getItems(){return Q.find(tr,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return $()?a===Ut?Oe:Ne:a===Ut?Ne:Oe}_orderToDirection(a){return $()?a===Oe?Ut:kr:a===Oe?kr:Ut}static jQueryInterface(a){return this.each(function(){let l=$t.getOrCreateInstance(this,a);if(typeof a!="number"){if(typeof a=="string"){if(l[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);l[a]()}}else l.to(a)})}}L.on(document,Yc,"[data-bs-slide], [data-bs-slide-to]",function(p){let a=Q.getElementFromSelector(this);if(!a||!a.classList.contains(Si))return;p.preventDefault();let l=$t.getOrCreateInstance(a),_=this.getAttribute("data-bs-slide-to");return _?(l.to(_),void l._maybeEnableCycle()):Ze.getDataAttribute(this,"slide")==="next"?(l.next(),void l._maybeEnableCycle()):(l.prev(),void l._maybeEnableCycle())}),L.on(window,Qc,()=>{let p=Q.find('[data-bs-ride="carousel"]');for(let a of p)$t.getOrCreateInstance(a)}),q($t);let nr=".bs.collapse",Or=`show${nr}`,Xo=`shown${nr}`,ot=`hide${nr}`,Jo=`hidden${nr}`,xr=`click${nr}.data-api`,An="show",rr="collapse",Ci="collapsing",ir=`:scope .${rr} .${rr}`,Vs='[data-bs-toggle="collapse"]',Xc={parent:null,toggle:!0},Pi={parent:"(null|element)",toggle:"boolean"};class Sn extends yt{constructor(a,l){super(a,l),this._isTransitioning=!1,this._triggerArray=[];let _=Q.find(Vs);for(let T of _){let C=Q.getSelectorFromElement(T),O=Q.find(C).filter(V=>V===this._element);C!==null&&O.length&&this._triggerArray.push(T)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Xc}static get DefaultType(){return Pi}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(T=>T!==this._element).map(T=>Sn.getOrCreateInstance(T,{toggle:!1}))),a.length&&a[0]._isTransitioning||L.trigger(this._element,Or).defaultPrevented)return;for(let T of a)T.hide();let l=this._getDimension();this._element.classList.remove(rr),this._element.classList.add(Ci),this._element.style[l]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let _=`scroll${l[0].toUpperCase()+l.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ci),this._element.classList.add(rr,An),this._element.style[l]="",L.trigger(this._element,Xo)},this._element,!0),this._element.style[l]=`${this._element[_]}px`}hide(){if(this._isTransitioning||!this._isShown()||L.trigger(this._element,ot).defaultPrevented)return;let a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,b(this._element),this._element.classList.add(Ci),this._element.classList.remove(rr,An);for(let l of this._triggerArray){let _=Q.getElementFromSelector(l);_&&!this._isShown(_)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0,this._element.style[a]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ci),this._element.classList.add(rr),L.trigger(this._element,Jo)},this._element,!0)}_isShown(a=this._element){return a.classList.contains(An)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=c(a.parent),a}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;let a=this._getFirstLevelChildren(Vs);for(let l of a){let _=Q.getElementFromSelector(l);_&&this._addAriaAndCollapsedClass([l],this._isShown(_))}}_getFirstLevelChildren(a){let l=Q.find(ir,this._config.parent);return Q.find(a,this._config.parent).filter(_=>!l.includes(_))}_addAriaAndCollapsedClass(a,l){if(a.length)for(let _ of a)_.classList.toggle("collapsed",!l),_.setAttribute("aria-expanded",l)}static jQueryInterface(a){let l={};return typeof a=="string"&&/show|hide/.test(a)&&(l.toggle=!1),this.each(function(){let _=Sn.getOrCreateInstance(this,l);if(typeof a=="string"){if(_[a]===void 0)throw new TypeError(`No method named "${a}"`);_[a]()}})}}L.on(document,xr,Vs,function(p){(p.target.tagName==="A"||p.delegateTarget&&p.delegateTarget.tagName==="A")&&p.preventDefault();for(let a of Q.getMultipleElementsFromSelector(this))Sn.getOrCreateInstance(a,{toggle:!1}).toggle()}),q(Sn);var Ge="top",et="bottom",xe="right",tt="left",Vr="auto",tn=[Ge,et,xe,tt],Bt="start",Cn="end",Ls="clippingParents",Ms="viewport",jt="popper",Fs="reference",Lr=tn.reduce(function(p,a){return p.concat([a+"-"+Bt,a+"-"+Cn])},[]),Pn=[].concat(tn,[Vr]).reduce(function(p,a){return p.concat([a,a+"-"+Bt,a+"-"+Cn])},[]),nn="beforeRead",Ri="read",Zo="afterRead",Us="beforeMain",$s="main",Bs="afterMain",ki="beforeWrite",Di="write",js="afterWrite",qs=[nn,Ri,Zo,Us,$s,Bs,ki,Di,js];function At(p){return p?(p.nodeName||"").toLowerCase():null}function lt(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var a=p.ownerDocument;return a&&a.defaultView||window}return p}function rn(p){return p instanceof lt(p).Element||p instanceof Element}function ht(p){return p instanceof lt(p).HTMLElement||p instanceof HTMLElement}function zs(p){return typeof ShadowRoot<"u"&&(p instanceof lt(p).ShadowRoot||p instanceof ShadowRoot)}let qt={name:"applyStyles",enabled:!0,phase:"write",fn:function(p){var a=p.state;Object.keys(a.elements).forEach(function(l){var _=a.styles[l]||{},T=a.attributes[l]||{},C=a.elements[l];ht(C)&&At(C)&&(Object.assign(C.style,_),Object.keys(T).forEach(function(O){var V=T[O];V===!1?C.removeAttribute(O):C.setAttribute(O,V===!0?"":V)}))})},effect:function(p){var a=p.state,l={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,l.popper),a.styles=l,a.elements.arrow&&Object.assign(a.elements.arrow.style,l.arrow),function(){Object.keys(a.elements).forEach(function(_){var T=a.elements[_],C=a.attributes[_]||{},O=Object.keys(a.styles.hasOwnProperty(_)?a.styles[_]:l[_]).reduce(function(V,j){return V[j]="",V},{});ht(T)&&At(T)&&(Object.assign(T.style,O),Object.keys(C).forEach(function(V){T.removeAttribute(V)}))})}},requires:["computeStyles"]};function je(p){return p.split("-")[0]}var St=Math.max,Rn=Math.min,kn=Math.round;function Ie(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function Mr(){return!/^((?!chrome|android).)*safari/i.test(Ie())}function Ct(p,a,l){a===void 0&&(a=!1),l===void 0&&(l=!1);var _=p.getBoundingClientRect(),T=1,C=1;a&&ht(p)&&(T=p.offsetWidth>0&&kn(_.width)/p.offsetWidth||1,C=p.offsetHeight>0&&kn(_.height)/p.offsetHeight||1);var O=(rn(p)?lt(p):window).visualViewport,V=!Mr()&&l,j=(_.left+(V&&O?O.offsetLeft:0))/T,H=(_.top+(V&&O?O.offsetTop:0))/C,G=_.width/T,z=_.height/C;return{width:G,height:z,top:H,right:j+G,bottom:H+z,left:j,x:j,y:H}}function Dn(p){var a=Ct(p),l=p.offsetWidth,_=p.offsetHeight;return Math.abs(a.width-l)<=1&&(l=a.width),Math.abs(a.height-_)<=1&&(_=a.height),{x:p.offsetLeft,y:p.offsetTop,width:l,height:_}}function ea(p,a){var l=a.getRootNode&&a.getRootNode();if(p.contains(a))return!0;if(l&&zs(l)){var _=a;do{if(_&&p.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function Pt(p){return lt(p).getComputedStyle(p)}function Jc(p){return["table","td","th"].indexOf(At(p))>=0}function sn(p){return((rn(p)?p.ownerDocument:p.document)||window.document).documentElement}function Ni(p){return At(p)==="html"?p:p.assignedSlot||p.parentNode||(zs(p)?p.host:null)||sn(p)}function ta(p){return ht(p)&&Pt(p).position!=="fixed"?p.offsetParent:null}function zt(p){for(var a=lt(p),l=ta(p);l&&Jc(l)&&Pt(l).position==="static";)l=ta(l);return l&&(At(l)==="html"||At(l)==="body"&&Pt(l).position==="static")?a:l||function(_){var T=/firefox/i.test(Ie());if(/Trident/i.test(Ie())&&ht(_)&&Pt(_).position==="fixed")return null;var C=Ni(_);for(zs(C)&&(C=C.host);ht(C)&&["html","body"].indexOf(At(C))<0;){var O=Pt(C);if(O.transform!=="none"||O.perspective!=="none"||O.contain==="paint"||["transform","perspective"].indexOf(O.willChange)!==-1||T&&O.willChange==="filter"||T&&O.filter&&O.filter!=="none")return C;C=C.parentNode}return null}(p)||a}function Rt(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function sr(p,a,l){return St(p,Rn(a,l))}function Ws(p){return Object.assign({},{top:0,right:0,bottom:0,left:0},p)}function Hs(p,a){return a.reduce(function(l,_){return l[_]=p,l},{})}let Nn={name:"arrow",enabled:!0,phase:"main",fn:function(p){var a,l=p.state,_=p.name,T=p.options,C=l.elements.arrow,O=l.modifiersData.popperOffsets,V=je(l.placement),j=Rt(V),H=[tt,xe].indexOf(V)>=0?"height":"width";if(C&&O){var G=function(Se,be){return Ws(typeof(Se=typeof Se=="function"?Se(Object.assign({},be.rects,{placement:be.placement})):Se)!="number"?Se:Hs(Se,tn))}(T.padding,l),z=Dn(C),ae=j==="y"?Ge:tt,J=j==="y"?et:xe,ne=l.rects.reference[H]+l.rects.reference[j]-O[j]-l.rects.popper[H],ee=O[j]-l.rects.reference[j],re=zt(C),Ae=re?j==="y"?re.clientHeight||0:re.clientWidth||0:0,Pe=ne/2-ee/2,he=G[ae],_e=Ae-z[H]-G[J],ue=Ae/2-z[H]/2+Pe,pe=sr(he,ue,_e),Te=j;l.modifiersData[_]=((a={})[Te]=pe,a.centerOffset=pe-ue,a)}},effect:function(p){var a=p.state,l=p.options.element,_=l===void 0?"[data-popper-arrow]":l;_!=null&&(typeof _!="string"||(_=a.elements.popper.querySelector(_)))&&ea(a.elements.popper,_)&&(a.elements.arrow=_)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function or(p){return p.split("-")[1]}var Zc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function na(p){var a,l=p.popper,_=p.popperRect,T=p.placement,C=p.variation,O=p.offsets,V=p.position,j=p.gpuAcceleration,H=p.adaptive,G=p.roundOffsets,z=p.isFixed,ae=O.x,J=ae===void 0?0:ae,ne=O.y,ee=ne===void 0?0:ne,re=typeof G=="function"?G({x:J,y:ee}):{x:J,y:ee};J=re.x,ee=re.y;var Ae=O.hasOwnProperty("x"),Pe=O.hasOwnProperty("y"),he=tt,_e=Ge,ue=window;if(H){var pe=zt(l),Te="clientHeight",Se="clientWidth";pe===lt(l)&&Pt(pe=sn(l)).position!=="static"&&V==="absolute"&&(Te="scrollHeight",Se="scrollWidth"),(T===Ge||(T===tt||T===xe)&&C===Cn)&&(_e=et,ee-=(z&&pe===ue&&ue.visualViewport?ue.visualViewport.height:pe[Te])-_.height,ee*=j?1:-1),T!==tt&&(T!==Ge&&T!==et||C!==Cn)||(he=xe,J-=(z&&pe===ue&&ue.visualViewport?ue.visualViewport.width:pe[Se])-_.width,J*=j?1:-1)}var be,Me=Object.assign({position:V},H&&Zc),wt=G===!0?function(Wt,ft){var Ot=Wt.x,xt=Wt.y,Ve=ft.devicePixelRatio||1;return{x:kn(Ot*Ve)/Ve||0,y:kn(xt*Ve)/Ve||0}}({x:J,y:ee},lt(l)):{x:J,y:ee};return J=wt.x,ee=wt.y,j?Object.assign({},Me,((be={})[_e]=Pe?"0":"",be[he]=Ae?"0":"",be.transform=(ue.devicePixelRatio||1)<=1?"translate("+J+"px, "+ee+"px)":"translate3d("+J+"px, "+ee+"px, 0)",be)):Object.assign({},Me,((a={})[_e]=Pe?ee+"px":"",a[he]=Ae?J+"px":"",a.transform="",a))}let kt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(p){var a=p.state,l=p.options,_=l.gpuAcceleration,T=_===void 0||_,C=l.adaptive,O=C===void 0||C,V=l.roundOffsets,j=V===void 0||V,H={placement:je(a.placement),variation:or(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:T,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,na(Object.assign({},H,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:O,roundOffsets:j})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,na(Object.assign({},H,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:j})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}};var Oi={passive:!0};let Gs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(p){var a=p.state,l=p.instance,_=p.options,T=_.scroll,C=T===void 0||T,O=_.resize,V=O===void 0||O,j=lt(a.elements.popper),H=[].concat(a.scrollParents.reference,a.scrollParents.popper);return C&&H.forEach(function(G){G.addEventListener("scroll",l.update,Oi)}),V&&j.addEventListener("resize",l.update,Oi),function(){C&&H.forEach(function(G){G.removeEventListener("scroll",l.update,Oi)}),V&&j.removeEventListener("resize",l.update,Oi)}},data:{}};var Fr={left:"right",right:"left",bottom:"top",top:"bottom"};function On(p){return p.replace(/left|right|bottom|top/g,function(a){return Fr[a]})}var ra={start:"end",end:"start"};function ar(p){return p.replace(/start|end/g,function(a){return ra[a]})}function xn(p){var a=lt(p);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function xi(p){return Ct(sn(p)).left+xn(p).scrollLeft}function Ur(p){var a=Pt(p),l=a.overflow,_=a.overflowX,T=a.overflowY;return/auto|scroll|overlay|hidden/.test(l+T+_)}function Re(p){return["html","body","#document"].indexOf(At(p))>=0?p.ownerDocument.body:ht(p)&&Ur(p)?p:Re(Ni(p))}function $r(p,a){var l;a===void 0&&(a=[]);var _=Re(p),T=_===((l=p.ownerDocument)==null?void 0:l.body),C=lt(_),O=T?[C].concat(C.visualViewport||[],Ur(_)?_:[]):_,V=a.concat(O);return T?V:V.concat($r(Ni(O)))}function Ks(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Qs(p,a,l){return a===Ms?Ks(function(_,T){var C=lt(_),O=sn(_),V=C.visualViewport,j=O.clientWidth,H=O.clientHeight,G=0,z=0;if(V){j=V.width,H=V.height;var ae=Mr();(ae||!ae&&T==="fixed")&&(G=V.offsetLeft,z=V.offsetTop)}return{width:j,height:H,x:G+xi(_),y:z}}(p,l)):rn(a)?function(_,T){var C=Ct(_,!1,T==="fixed");return C.top=C.top+_.clientTop,C.left=C.left+_.clientLeft,C.bottom=C.top+_.clientHeight,C.right=C.left+_.clientWidth,C.width=_.clientWidth,C.height=_.clientHeight,C.x=C.left,C.y=C.top,C}(a,l):Ks(function(_){var T,C=sn(_),O=xn(_),V=(T=_.ownerDocument)==null?void 0:T.body,j=St(C.scrollWidth,C.clientWidth,V?V.scrollWidth:0,V?V.clientWidth:0),H=St(C.scrollHeight,C.clientHeight,V?V.scrollHeight:0,V?V.clientHeight:0),G=-O.scrollLeft+xi(_),z=-O.scrollTop;return Pt(V||C).direction==="rtl"&&(G+=St(C.clientWidth,V?V.clientWidth:0)-j),{width:j,height:H,x:G,y:z}}(sn(p)))}function Ys(p){var a,l=p.reference,_=p.element,T=p.placement,C=T?je(T):null,O=T?or(T):null,V=l.x+l.width/2-_.width/2,j=l.y+l.height/2-_.height/2;switch(C){case Ge:a={x:V,y:l.y-_.height};break;case et:a={x:V,y:l.y+l.height};break;case xe:a={x:l.x+l.width,y:j};break;case tt:a={x:l.x-_.width,y:j};break;default:a={x:l.x,y:l.y}}var H=C?Rt(C):null;if(H!=null){var G=H==="y"?"height":"width";switch(O){case Bt:a[H]=a[H]-(l[G]/2-_[G]/2);break;case Cn:a[H]=a[H]+(l[G]/2-_[G]/2)}}return a}function Vn(p,a){a===void 0&&(a={});var l=a,_=l.placement,T=_===void 0?p.placement:_,C=l.strategy,O=C===void 0?p.strategy:C,V=l.boundary,j=V===void 0?Ls:V,H=l.rootBoundary,G=H===void 0?Ms:H,z=l.elementContext,ae=z===void 0?jt:z,J=l.altBoundary,ne=J!==void 0&&J,ee=l.padding,re=ee===void 0?0:ee,Ae=Ws(typeof re!="number"?re:Hs(re,tn)),Pe=ae===jt?Fs:jt,he=p.rects.popper,_e=p.elements[ne?Pe:ae],ue=function(ft,Ot,xt,Ve){var cn=Ot==="clippingParents"?function(Ce){var pt=$r(Ni(Ce)),Vt=["absolute","fixed"].indexOf(Pt(Ce).position)>=0&&ht(Ce)?zt(Ce):Ce;return rn(Vt)?pt.filter(function(dr){return rn(dr)&&ea(dr,Vt)&&At(dr)!=="body"}):[]}(ft):[].concat(Ot),un=[].concat(cn,[xt]),Wi=un[0],nt=un.reduce(function(Ce,pt){var Vt=Qs(ft,pt,Ve);return Ce.top=St(Vt.top,Ce.top),Ce.right=Rn(Vt.right,Ce.right),Ce.bottom=Rn(Vt.bottom,Ce.bottom),Ce.left=St(Vt.left,Ce.left),Ce},Qs(ft,Wi,Ve));return nt.width=nt.right-nt.left,nt.height=nt.bottom-nt.top,nt.x=nt.left,nt.y=nt.top,nt}(rn(_e)?_e:_e.contextElement||sn(p.elements.popper),j,G,O),pe=Ct(p.elements.reference),Te=Ys({reference:pe,element:he,placement:T}),Se=Ks(Object.assign({},he,Te)),be=ae===jt?Se:pe,Me={top:ue.top-be.top+Ae.top,bottom:be.bottom-ue.bottom+Ae.bottom,left:ue.left-be.left+Ae.left,right:be.right-ue.right+Ae.right},wt=p.modifiersData.offset;if(ae===jt&&wt){var Wt=wt[T];Object.keys(Me).forEach(function(ft){var Ot=[xe,et].indexOf(ft)>=0?1:-1,xt=[Ge,et].indexOf(ft)>=0?"y":"x";Me[ft]+=Wt[xt]*Ot})}return Me}function Vi(p,a){a===void 0&&(a={});var l=a,_=l.placement,T=l.boundary,C=l.rootBoundary,O=l.padding,V=l.flipVariations,j=l.allowedAutoPlacements,H=j===void 0?Pn:j,G=or(_),z=G?V?Lr:Lr.filter(function(ne){return or(ne)===G}):tn,ae=z.filter(function(ne){return H.indexOf(ne)>=0});ae.length===0&&(ae=z);var J=ae.reduce(function(ne,ee){return ne[ee]=Vn(p,{placement:ee,boundary:T,rootBoundary:C,padding:O})[je(ee)],ne},{});return Object.keys(J).sort(function(ne,ee){return J[ne]-J[ee]})}let Xs={name:"flip",enabled:!0,phase:"main",fn:function(p){var a=p.state,l=p.options,_=p.name;if(!a.modifiersData[_]._skip){for(var T=l.mainAxis,C=T===void 0||T,O=l.altAxis,V=O===void 0||O,j=l.fallbackPlacements,H=l.padding,G=l.boundary,z=l.rootBoundary,ae=l.altBoundary,J=l.flipVariations,ne=J===void 0||J,ee=l.allowedAutoPlacements,re=a.options.placement,Ae=je(re),Pe=j||(Ae!==re&&ne?function(Ce){if(je(Ce)===Vr)return[];var pt=On(Ce);return[ar(Ce),pt,ar(pt)]}(re):[On(re)]),he=[re].concat(Pe).reduce(function(Ce,pt){return Ce.concat(je(pt)===Vr?Vi(a,{placement:pt,boundary:G,rootBoundary:z,padding:H,flipVariations:ne,allowedAutoPlacements:ee}):pt)},[]),_e=a.rects.reference,ue=a.rects.popper,pe=new Map,Te=!0,Se=he[0],be=0;be<he.length;be++){var Me=he[be],wt=je(Me),Wt=or(Me)===Bt,ft=[Ge,et].indexOf(wt)>=0,Ot=ft?"width":"height",xt=Vn(a,{placement:Me,boundary:G,rootBoundary:z,altBoundary:ae,padding:H}),Ve=ft?Wt?xe:tt:Wt?et:Ge;_e[Ot]>ue[Ot]&&(Ve=On(Ve));var cn=On(Ve),un=[];if(C&&un.push(xt[wt]<=0),V&&un.push(xt[Ve]<=0,xt[cn]<=0),un.every(function(Ce){return Ce})){Se=Me,Te=!1;break}pe.set(Me,un)}if(Te)for(var Wi=function(Ce){var pt=he.find(function(Vt){var dr=pe.get(Vt);if(dr)return dr.slice(0,Ce).every(function(ya){return ya})});if(pt)return Se=pt,"break"},nt=ne?3:1;nt>0&&Wi(nt)!=="break";nt--);a.placement!==Se&&(a.modifiersData[_]._skip=!0,a.placement=Se,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Dt(p,a,l){return l===void 0&&(l={x:0,y:0}),{top:p.top-a.height-l.y,right:p.right-a.width+l.x,bottom:p.bottom-a.height+l.y,left:p.left-a.width-l.x}}function Js(p){return[Ge,xe,et,tt].some(function(a){return p[a]>=0})}let ia={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(p){var a=p.state,l=p.name,_=a.rects.reference,T=a.rects.popper,C=a.modifiersData.preventOverflow,O=Vn(a,{elementContext:"reference"}),V=Vn(a,{altBoundary:!0}),j=Dt(O,_),H=Dt(V,T,C),G=Js(j),z=Js(H);a.modifiersData[l]={referenceClippingOffsets:j,popperEscapeOffsets:H,isReferenceHidden:G,hasPopperEscaped:z},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":G,"data-popper-escaped":z})}},cr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(p){var a=p.state,l=p.options,_=p.name,T=l.offset,C=T===void 0?[0,0]:T,O=Pn.reduce(function(G,z){return G[z]=function(ae,J,ne){var ee=je(ae),re=[tt,Ge].indexOf(ee)>=0?-1:1,Ae=typeof ne=="function"?ne(Object.assign({},J,{placement:ae})):ne,Pe=Ae[0],he=Ae[1];return Pe=Pe||0,he=(he||0)*re,[tt,xe].indexOf(ee)>=0?{x:he,y:Pe}:{x:Pe,y:he}}(z,a.rects,C),G},{}),V=O[a.placement],j=V.x,H=V.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=j,a.modifiersData.popperOffsets.y+=H),a.modifiersData[_]=O}},Li={name:"popperOffsets",enabled:!0,phase:"read",fn:function(p){var a=p.state,l=p.name;a.modifiersData[l]=Ys({reference:a.rects.reference,element:a.rects.popper,placement:a.placement})},data:{}},Mi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(p){var a=p.state,l=p.options,_=p.name,T=l.mainAxis,C=T===void 0||T,O=l.altAxis,V=O!==void 0&&O,j=l.boundary,H=l.rootBoundary,G=l.altBoundary,z=l.padding,ae=l.tether,J=ae===void 0||ae,ne=l.tetherOffset,ee=ne===void 0?0:ne,re=Vn(a,{boundary:j,rootBoundary:H,padding:z,altBoundary:G}),Ae=je(a.placement),Pe=or(a.placement),he=!Pe,_e=Rt(Ae),ue=_e==="x"?"y":"x",pe=a.modifiersData.popperOffsets,Te=a.rects.reference,Se=a.rects.popper,be=typeof ee=="function"?ee(Object.assign({},a.rects,{placement:a.placement})):ee,Me=typeof be=="number"?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),wt=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,Wt={x:0,y:0};if(pe){if(C){var ft,Ot=_e==="y"?Ge:tt,xt=_e==="y"?et:xe,Ve=_e==="y"?"height":"width",cn=pe[_e],un=cn+re[Ot],Wi=cn-re[xt],nt=J?-Se[Ve]/2:0,Ce=Pe===Bt?Te[Ve]:Se[Ve],pt=Pe===Bt?-Se[Ve]:-Te[Ve],Vt=a.elements.arrow,dr=J&&Vt?Dn(Vt):{width:0,height:0},ya=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},df=ya[Ot],ff=ya[xt],va=sr(0,Te[Ve],dr[Ve]),Ky=he?Te[Ve]/2-nt-va-df-Me.mainAxis:Ce-va-df-Me.mainAxis,Qy=he?-Te[Ve]/2+nt+va+ff+Me.mainAxis:pt+va+ff+Me.mainAxis,hu=a.elements.arrow&&zt(a.elements.arrow),Yy=hu?_e==="y"?hu.clientTop||0:hu.clientLeft||0:0,pf=(ft=wt?.[_e])!=null?ft:0,Xy=cn+Qy-pf,mf=sr(J?Rn(un,cn+Ky-pf-Yy):un,cn,J?St(Wi,Xy):Wi);pe[_e]=mf,Wt[_e]=mf-cn}if(V){var gf,Jy=_e==="x"?Ge:tt,Zy=_e==="x"?et:xe,Yr=pe[ue],wa=ue==="y"?"height":"width",_f=Yr+re[Jy],yf=Yr-re[Zy],du=[Ge,tt].indexOf(Ae)!==-1,vf=(gf=wt?.[ue])!=null?gf:0,wf=du?_f:Yr-Te[wa]-Se[wa]-vf+Me.altAxis,If=du?Yr+Te[wa]+Se[wa]-vf-Me.altAxis:yf,Ef=J&&du?function(ev,tv,fu){var Tf=sr(ev,tv,fu);return Tf>fu?fu:Tf}(wf,Yr,If):sr(J?wf:_f,Yr,J?If:yf);pe[ue]=Ef,Wt[ue]=Ef-Yr}a.modifiersData[_]=Wt}},requiresIfExists:["offset"]};function Fi(p,a,l){l===void 0&&(l=!1);var _,T,C=ht(a),O=ht(a)&&function(z){var ae=z.getBoundingClientRect(),J=kn(ae.width)/z.offsetWidth||1,ne=kn(ae.height)/z.offsetHeight||1;return J!==1||ne!==1}(a),V=sn(a),j=Ct(p,O,l),H={scrollLeft:0,scrollTop:0},G={x:0,y:0};return(C||!C&&!l)&&((At(a)!=="body"||Ur(V))&&(H=(_=a)!==lt(_)&&ht(_)?{scrollLeft:(T=_).scrollLeft,scrollTop:T.scrollTop}:xn(_)),ht(a)?((G=Ct(a,!0)).x+=a.clientLeft,G.y+=a.clientTop):V&&(G.x=xi(V))),{x:j.left+H.scrollLeft-G.x,y:j.top+H.scrollTop-G.y,width:j.width,height:j.height}}function sa(p){var a=new Map,l=new Set,_=[];function T(C){l.add(C.name),[].concat(C.requires||[],C.requiresIfExists||[]).forEach(function(O){if(!l.has(O)){var V=a.get(O);V&&T(V)}}),_.push(C)}return p.forEach(function(C){a.set(C.name,C)}),p.forEach(function(C){l.has(C.name)||T(C)}),_}var Br={placement:"bottom",modifiers:[],strategy:"absolute"};function oa(){for(var p=arguments.length,a=new Array(p),l=0;l<p;l++)a[l]=arguments[l];return!a.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function jr(p){p===void 0&&(p={});var a=p,l=a.defaultModifiers,_=l===void 0?[]:l,T=a.defaultOptions,C=T===void 0?Br:T;return function(O,V,j){j===void 0&&(j=C);var H,G,z={placement:"bottom",orderedModifiers:[],options:Object.assign({},Br,C),modifiersData:{},elements:{reference:O,popper:V},attributes:{},styles:{}},ae=[],J=!1,ne={state:z,setOptions:function(re){var Ae=typeof re=="function"?re(z.options):re;ee(),z.options=Object.assign({},C,z.options,Ae),z.scrollParents={reference:rn(O)?$r(O):O.contextElement?$r(O.contextElement):[],popper:$r(V)};var Pe,he,_e=function(ue){var pe=sa(ue);return qs.reduce(function(Te,Se){return Te.concat(pe.filter(function(be){return be.phase===Se}))},[])}((Pe=[].concat(_,z.options.modifiers),he=Pe.reduce(function(ue,pe){var Te=ue[pe.name];return ue[pe.name]=Te?Object.assign({},Te,pe,{options:Object.assign({},Te.options,pe.options),data:Object.assign({},Te.data,pe.data)}):pe,ue},{}),Object.keys(he).map(function(ue){return he[ue]})));return z.orderedModifiers=_e.filter(function(ue){return ue.enabled}),z.orderedModifiers.forEach(function(ue){var pe=ue.name,Te=ue.options,Se=Te===void 0?{}:Te,be=ue.effect;if(typeof be=="function"){var Me=be({state:z,name:pe,instance:ne,options:Se});ae.push(Me||function(){})}}),ne.update()},forceUpdate:function(){if(!J){var re=z.elements,Ae=re.reference,Pe=re.popper;if(oa(Ae,Pe)){z.rects={reference:Fi(Ae,zt(Pe),z.options.strategy==="fixed"),popper:Dn(Pe)},z.reset=!1,z.placement=z.options.placement,z.orderedModifiers.forEach(function(be){return z.modifiersData[be.name]=Object.assign({},be.data)});for(var he=0;he<z.orderedModifiers.length;he++)if(z.reset!==!0){var _e=z.orderedModifiers[he],ue=_e.fn,pe=_e.options,Te=pe===void 0?{}:pe,Se=_e.name;typeof ue=="function"&&(z=ue({state:z,options:Te,name:Se,instance:ne})||z)}else z.reset=!1,he=-1}}},update:(H=function(){return new Promise(function(re){ne.forceUpdate(),re(z)})},function(){return G||(G=new Promise(function(re){Promise.resolve().then(function(){G=void 0,re(H())})})),G}),destroy:function(){ee(),J=!0}};if(!oa(O,V))return ne;function ee(){ae.forEach(function(re){return re()}),ae=[]}return ne.setOptions(j).then(function(re){!J&&j.onFirstUpdate&&j.onFirstUpdate(re)}),ne}}var qr=jr(),aa=jr({defaultModifiers:[Gs,Li,kt,qt]}),Ui=jr({defaultModifiers:[Gs,Li,kt,qt,cr,Xs,Mi,Nn,ia]});let $i=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Bs,afterRead:Zo,afterWrite:js,applyStyles:qt,arrow:Nn,auto:Vr,basePlacements:tn,beforeMain:Us,beforeRead:nn,beforeWrite:ki,bottom:et,clippingParents:Ls,computeStyles:kt,createPopper:Ui,createPopperBase:qr,createPopperLite:aa,detectOverflow:Vn,end:Cn,eventListeners:Gs,flip:Xs,hide:ia,left:tt,main:$s,modifierPhases:qs,offset:cr,placements:Pn,popper:jt,popperGenerator:jr,popperOffsets:Li,preventOverflow:Mi,read:Ri,reference:Fs,right:xe,start:Bt,top:Ge,variationPlacements:Lr,viewport:Ms,write:Di},Symbol.toStringTag,{value:"Module"})),Bi="dropdown",on=".bs.dropdown",ur=".data-api",ca="ArrowUp",Zs="ArrowDown",Ln=`hide${on}`,ua=`hidden${on}`,la=`show${on}`,ha=`shown${on}`,eo=`click${on}${ur}`,zr=`keydown${on}${ur}`,dt=`keyup${on}${ur}`,Mn="show",an='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',lr=`${an}.${Mn}`,s=".dropdown-menu",u=$()?"top-end":"top-start",d=$()?"top-start":"top-end",g=$()?"bottom-end":"bottom-start",R=$()?"bottom-start":"bottom-end",N=$()?"left-start":"right-start",B=$()?"right-start":"left-start",Ee={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ke={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class te extends yt{constructor(a,l){super(a,l),this._popper=null,this._parent=this._element.parentNode,this._menu=Q.next(this._element,s)[0]||Q.prev(this._element,s)[0]||Q.findOne(s,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ee}static get DefaultType(){return Ke}static get NAME(){return Bi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(f(this._element)||this._isShown())return;let a={relatedTarget:this._element};if(!L.trigger(this._element,la,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(let l of[].concat(...document.body.children))L.on(l,"mouseover",y);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Mn),this._element.classList.add(Mn),L.trigger(this._element,ha,a)}}hide(){if(f(this._element)||!this._isShown())return;let a={relatedTarget:this._element};this._completeHide(a)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!L.trigger(this._element,Ln,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(let l of[].concat(...document.body.children))L.off(l,"mouseover",y);this._popper&&this._popper.destroy(),this._menu.classList.remove(Mn),this._element.classList.remove(Mn),this._element.setAttribute("aria-expanded","false"),Ze.removeDataAttribute(this._menu,"popper"),L.trigger(this._element,ua,a),this._element.focus()}}_getConfig(a){if(typeof(a=super._getConfig(a)).reference=="object"&&!o(a.reference)&&typeof a.reference.getBoundingClientRect!="function")throw new TypeError(`${Bi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if($i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let a=this._element;this._config.reference==="parent"?a=this._parent:o(this._config.reference)?a=c(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);let l=this._getPopperConfig();this._popper=Ui(a,this._menu,l)}_isShown(){return this._menu.classList.contains(Mn)}_getPlacement(){let a=this._parent;if(a.classList.contains("dropend"))return N;if(a.classList.contains("dropstart"))return B;if(a.classList.contains("dropup-center"))return"top";if(a.classList.contains("dropdown-center"))return"bottom";let l=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return a.classList.contains("dropup")?l?d:u:l?R:g}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){let{offset:a}=this._config;return typeof a=="string"?a.split(",").map(l=>Number.parseInt(l,10)):typeof a=="function"?l=>a(l,this._element):a}_getPopperConfig(){let a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ze.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),Xe(Xe({},a),U(this._config.popperConfig,[void 0,a]))}_selectMenuItem({key:a,target:l}){let _=Q.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(T=>h(T));_.length&&Z(_,l,a===Zs,!_.includes(l)).focus()}static jQueryInterface(a){return this.each(function(){let l=te.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0)throw new TypeError(`No method named "${a}"`);l[a]()}})}static clearMenus(a){if(a.button===2||a.type==="keyup"&&a.key!=="Tab")return;let l=Q.find(lr);for(let _ of l){let T=te.getInstance(_);if(!T||T._config.autoClose===!1)continue;let C=a.composedPath(),O=C.includes(T._menu);if(C.includes(T._element)||T._config.autoClose==="inside"&&!O||T._config.autoClose==="outside"&&O||T._menu.contains(a.target)&&(a.type==="keyup"&&a.key==="Tab"||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;let V={relatedTarget:T._element};a.type==="click"&&(V.clickEvent=a),T._completeHide(V)}}static dataApiKeydownHandler(a){let l=/input|textarea/i.test(a.target.tagName),_=a.key==="Escape",T=[ca,Zs].includes(a.key);if(!T&&!_||l&&!_)return;a.preventDefault();let C=this.matches(an)?this:Q.prev(this,an)[0]||Q.next(this,an)[0]||Q.findOne(an,a.delegateTarget.parentNode),O=te.getOrCreateInstance(C);if(T)return a.stopPropagation(),O.show(),void O._selectMenuItem(a);O._isShown()&&(a.stopPropagation(),O.hide(),C.focus())}}L.on(document,zr,an,te.dataApiKeydownHandler),L.on(document,zr,s,te.dataApiKeydownHandler),L.on(document,eo,te.clearMenus),L.on(document,dt,te.clearMenus),L.on(document,eo,an,function(p){p.preventDefault(),te.getOrCreateInstance(this).toggle()}),q(te);let Qe="backdrop",Ye="show",Fn=`mousedown.bs.${Qe}`,vt={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ji={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class qi extends De{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return vt}static get DefaultType(){return ji}static get NAME(){return Qe}show(a){if(!this._config.isVisible)return void U(a);this._append();let l=this._getElement();this._config.isAnimated&&b(l),l.classList.add(Ye),this._emulateAnimation(()=>{U(a)})}hide(a){this._config.isVisible?(this._getElement().classList.remove(Ye),this._emulateAnimation(()=>{this.dispose(),U(a)})):U(a)}dispose(){this._isAppended&&(L.off(this._element,Fn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add("fade"),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=c(a.rootElement),a}_append(){if(this._isAppended)return;let a=this._getElement();this._config.rootElement.append(a),L.on(a,Fn,()=>{U(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){ce(a,this._getElement(),this._config.isAnimated)}}let da=".bs.focustrap",F_=`focusin${da}`,U_=`keydown.tab${da}`,Md="backward",$_={autofocus:!0,trapElement:null},B_={autofocus:"boolean",trapElement:"element"};class Fd extends De{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return $_}static get DefaultType(){return B_}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),L.off(document,da),L.on(document,F_,a=>this._handleFocusin(a)),L.on(document,U_,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,L.off(document,da))}_handleFocusin(a){let{trapElement:l}=this._config;if(a.target===document||a.target===l||l.contains(a.target))return;let _=Q.focusableChildren(l);_.length===0?l.focus():this._lastTabNavDirection===Md?_[_.length-1].focus():_[0].focus()}_handleKeydown(a){a.key==="Tab"&&(this._lastTabNavDirection=a.shiftKey?Md:"forward")}}let Ud=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$d=".sticky-top",fa="padding-right",Bd="margin-right";class eu{constructor(){this._element=document.body}getWidth(){let a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){let a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,fa,l=>l+a),this._setElementAttributes(Ud,fa,l=>l+a),this._setElementAttributes($d,Bd,l=>l-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,fa),this._resetElementAttributes(Ud,fa),this._resetElementAttributes($d,Bd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,l,_){let T=this.getWidth();this._applyManipulationCallback(a,C=>{if(C!==this._element&&window.innerWidth>C.clientWidth+T)return;this._saveInitialAttribute(C,l);let O=window.getComputedStyle(C).getPropertyValue(l);C.style.setProperty(l,`${_(Number.parseFloat(O))}px`)})}_saveInitialAttribute(a,l){let _=a.style.getPropertyValue(l);_&&Ze.setDataAttribute(a,l,_)}_resetElementAttributes(a,l){this._applyManipulationCallback(a,_=>{let T=Ze.getDataAttribute(_,l);T!==null?(Ze.removeDataAttribute(_,l),_.style.setProperty(l,T)):_.style.removeProperty(l)})}_applyManipulationCallback(a,l){if(o(a))l(a);else for(let _ of Q.find(a,this._element))l(_)}}let Nt=".bs.modal",j_=`hide${Nt}`,q_=`hidePrevented${Nt}`,jd=`hidden${Nt}`,qd=`show${Nt}`,z_=`shown${Nt}`,W_=`resize${Nt}`,H_=`click.dismiss${Nt}`,G_=`mousedown.dismiss${Nt}`,K_=`keydown.dismiss${Nt}`,Q_=`click${Nt}.data-api`,zd="modal-open",Wd="show",tu="modal-static",Y_={backdrop:!0,focus:!0,keyboard:!0},X_={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Wr extends yt{constructor(a,l){super(a,l),this._dialog=Q.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new eu,this._addEventListeners()}static get Default(){return Y_}static get DefaultType(){return X_}static get NAME(){return"modal"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||L.trigger(this._element,qd,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(zd),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){this._isShown&&!this._isTransitioning&&(L.trigger(this._element,j_).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Wd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){L.off(window,Nt),L.off(this._dialog,Nt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new qi({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Fd({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let l=Q.findOne(".modal-body",this._dialog);l&&(l.scrollTop=0),b(this._element),this._element.classList.add(Wd),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,L.trigger(this._element,z_,{relatedTarget:a})},this._dialog,this._isAnimated())}_addEventListeners(){L.on(this._element,K_,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),L.on(window,W_,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),L.on(this._element,G_,a=>{L.one(this._element,H_,l=>{this._element===a.target&&this._element===l.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(zd),this._resetAdjustments(),this._scrollBar.reset(),L.trigger(this._element,jd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(L.trigger(this._element,q_).defaultPrevented)return;let a=this._element.scrollHeight>document.documentElement.clientHeight,l=this._element.style.overflowY;l==="hidden"||this._element.classList.contains(tu)||(a||(this._element.style.overflowY="hidden"),this._element.classList.add(tu),this._queueCallback(()=>{this._element.classList.remove(tu),this._queueCallback(()=>{this._element.style.overflowY=l},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let a=this._element.scrollHeight>document.documentElement.clientHeight,l=this._scrollBar.getWidth(),_=l>0;if(_&&!a){let T=$()?"paddingLeft":"paddingRight";this._element.style[T]=`${l}px`}if(!_&&a){let T=$()?"paddingRight":"paddingLeft";this._element.style[T]=`${l}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,l){return this.each(function(){let _=Wr.getOrCreateInstance(this,a);if(typeof a=="string"){if(_[a]===void 0)throw new TypeError(`No method named "${a}"`);_[a](l)}})}}L.on(document,Q_,'[data-bs-toggle="modal"]',function(p){let a=Q.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&p.preventDefault(),L.one(a,qd,_=>{_.defaultPrevented||L.one(a,jd,()=>{h(this)&&this.focus()})});let l=Q.findOne(".modal.show");l&&Wr.getInstance(l).hide(),Wr.getOrCreateInstance(a).toggle(this)}),Xt(Wr),q(Wr);let Un=".bs.offcanvas",Hd=".data-api",J_=`load${Un}${Hd}`,Gd="show",Kd="showing",Qd="hiding",Yd=".offcanvas.show",Z_=`show${Un}`,ey=`shown${Un}`,ty=`hide${Un}`,Xd=`hidePrevented${Un}`,Jd=`hidden${Un}`,ny=`resize${Un}`,ry=`click${Un}${Hd}`,iy=`keydown.dismiss${Un}`,sy={backdrop:!0,keyboard:!0,scroll:!1},oy={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class $n extends yt{constructor(a,l){super(a,l),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return sy}static get DefaultType(){return oy}static get NAME(){return"offcanvas"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||L.trigger(this._element,Z_,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new eu().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Kd),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gd),this._element.classList.remove(Kd),L.trigger(this._element,ey,{relatedTarget:a})},this._element,!0))}hide(){this._isShown&&(L.trigger(this._element,ty).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Qd),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Gd,Qd),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new eu().reset(),L.trigger(this._element,Jd)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let a=!!this._config.backdrop;return new qi({className:"offcanvas-backdrop",isVisible:a,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:a?()=>{this._config.backdrop!=="static"?this.hide():L.trigger(this._element,Xd)}:null})}_initializeFocusTrap(){return new Fd({trapElement:this._element})}_addEventListeners(){L.on(this._element,iy,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():L.trigger(this._element,Xd))})}static jQueryInterface(a){return this.each(function(){let l=$n.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);l[a](this)}})}}L.on(document,ry,'[data-bs-toggle="offcanvas"]',function(p){let a=Q.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),f(this))return;L.one(a,Jd,()=>{h(this)&&this.focus()});let l=Q.findOne(Yd);l&&l!==a&&$n.getInstance(l).hide(),$n.getOrCreateInstance(a).toggle(this)}),L.on(window,J_,()=>{for(let p of Q.find(Yd))$n.getOrCreateInstance(p).show()}),L.on(window,ny,()=>{for(let p of Q.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(p).position!=="fixed"&&$n.getOrCreateInstance(p).hide()}),Xt($n),q($n);let Zd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ay=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,uy=(p,a)=>{let l=p.nodeName.toLowerCase();return a.includes(l)?!ay.has(l)||!!cy.test(p.nodeValue):a.filter(_=>_ instanceof RegExp).some(_=>_.test(l))},ly={allowList:Zd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},hy={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},dy={entry:"(string|element|function|null)",selector:"(string|element)"};class fy extends De{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return ly}static get DefaultType(){return hy}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content=Xe(Xe({},this._config.content),a),this}toHtml(){let a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(let[T,C]of Object.entries(this._config.content))this._setContent(a,C,T);let l=a.children[0],_=this._resolvePossibleFunction(this._config.extraClass);return _&&l.classList.add(..._.split(" ")),l}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(let[l,_]of Object.entries(a))super._typeCheckConfig({selector:l,entry:_},dy)}_setContent(a,l,_){let T=Q.findOne(_,a);T&&((l=this._resolvePossibleFunction(l))?o(l)?this._putElementInTemplate(c(l),T):this._config.html?T.innerHTML=this._maybeSanitize(l):T.textContent=l:T.remove())}_maybeSanitize(a){return this._config.sanitize?function(l,_,T){if(!l.length)return l;if(T&&typeof T=="function")return T(l);let C=new window.DOMParser().parseFromString(l,"text/html"),O=[].concat(...C.body.querySelectorAll("*"));for(let V of O){let j=V.nodeName.toLowerCase();if(!Object.keys(_).includes(j)){V.remove();continue}let H=[].concat(...V.attributes),G=[].concat(_["*"]||[],_[j]||[]);for(let z of H)uy(z,G)||V.removeAttribute(z.nodeName)}return C.body.innerHTML}(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return U(a,[void 0,this])}_putElementInTemplate(a,l){if(this._config.html)return l.innerHTML="",void l.append(a);l.textContent=a.textContent}}let py=new Set(["sanitize","allowList","sanitizeFn"]),nu="fade",pa="show",my=".tooltip-inner",ef=".modal",tf="hide.bs.modal",to="hover",ru="focus",iu="click",gy={AUTO:"auto",TOP:"top",RIGHT:$()?"left":"right",BOTTOM:"bottom",LEFT:$()?"right":"left"},_y={allowList:Zd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},yy={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Hr extends yt{constructor(a,l){if($i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(a,l),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _y}static get DefaultType(){return yy}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),L.off(this._element.closest(ef),tf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;let a=L.trigger(this._element,this.constructor.eventName("show")),l=(m(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!l)return;this._disposePopper();let _=this._getTipElement();this._element.setAttribute("aria-describedby",_.getAttribute("id"));let{container:T}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(T.append(_),L.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(_),_.classList.add(pa),"ontouchstart"in document.documentElement)for(let C of[].concat(...document.body.children))L.on(C,"mouseover",y);this._queueCallback(()=>{L.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!L.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(pa),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))L.off(a,"mouseover",y);this._activeTrigger[iu]=!1,this._activeTrigger[ru]=!1,this._activeTrigger[to]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),L.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){let l=this._getTemplateFactory(a).toHtml();if(!l)return null;l.classList.remove(nu,pa),l.classList.add(`bs-${this.constructor.NAME}-auto`);let _=(T=>{do T+=Math.floor(1e6*Math.random());while(document.getElementById(T));return T})(this.constructor.NAME).toString();return l.setAttribute("id",_),this._isAnimated()&&l.classList.add(nu),l}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new fy(Xr(Xe({},this._config),{content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[my]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(nu)}_isShown(){return this.tip&&this.tip.classList.contains(pa)}_createPopper(a){let l=U(this._config.placement,[this,a,this._element]),_=gy[l.toUpperCase()];return Ui(this._element,a,this._getPopperConfig(_))}_getOffset(){let{offset:a}=this._config;return typeof a=="string"?a.split(",").map(l=>Number.parseInt(l,10)):typeof a=="function"?l=>a(l,this._element):a}_resolvePossibleFunction(a){return U(a,[this._element,this._element])}_getPopperConfig(a){let l={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:_=>{this._getTipElement().setAttribute("data-popper-placement",_.state.placement)}}]};return Xe(Xe({},l),U(this._config.popperConfig,[void 0,l]))}_setListeners(){let a=this._config.trigger.split(" ");for(let l of a)if(l==="click")L.on(this._element,this.constructor.eventName("click"),this._config.selector,_=>{let T=this._initializeOnDelegatedTarget(_);T._activeTrigger[iu]=!(T._isShown()&&T._activeTrigger[iu]),T.toggle()});else if(l!=="manual"){let _=l===to?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),T=l===to?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");L.on(this._element,_,this._config.selector,C=>{let O=this._initializeOnDelegatedTarget(C);O._activeTrigger[C.type==="focusin"?ru:to]=!0,O._enter()}),L.on(this._element,T,this._config.selector,C=>{let O=this._initializeOnDelegatedTarget(C);O._activeTrigger[C.type==="focusout"?ru:to]=O._element.contains(C.relatedTarget),O._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},L.on(this._element.closest(ef),tf,this._hideModalHandler)}_fixTitle(){let a=this._element.getAttribute("title");a&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,l){clearTimeout(this._timeout),this._timeout=setTimeout(a,l)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){let l=Ze.getDataAttributes(this._element);for(let _ of Object.keys(l))py.has(_)&&delete l[_];return a=Xe(Xe({},l),typeof a=="object"&&a?a:{}),a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=a.container===!1?document.body:c(a.container),typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),typeof a.title=="number"&&(a.title=a.title.toString()),typeof a.content=="number"&&(a.content=a.content.toString()),a}_getDelegateConfig(){let a={};for(let[l,_]of Object.entries(this._config))this.constructor.Default[l]!==_&&(a[l]=_);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){let l=Hr.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0)throw new TypeError(`No method named "${a}"`);l[a]()}})}}q(Hr);let vy=".popover-header",wy=".popover-body",Iy=Xr(Xe({},Hr.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),Ey=Xr(Xe({},Hr.DefaultType),{content:"(null|string|element|function)"});class ma extends Hr{static get Default(){return Iy}static get DefaultType(){return Ey}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[vy]:this._getTitle(),[wy]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){let l=ma.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0)throw new TypeError(`No method named "${a}"`);l[a]()}})}}q(ma);let su=".bs.scrollspy",Ty=`activate${su}`,nf=`click${su}`,by=`load${su}.data-api`,zi="active",ou="[href]",rf=".nav-link",Ay=`${rf}, .nav-item > ${rf}, .list-group-item`,Sy={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Cy={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class no extends yt{constructor(a,l){super(a,l),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Sy}static get DefaultType(){return Cy}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=c(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,typeof a.threshold=="string"&&(a.threshold=a.threshold.split(",").map(l=>Number.parseFloat(l))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(L.off(this._config.target,nf),L.on(this._config.target,nf,ou,a=>{let l=this._observableSections.get(a.target.hash);if(l){a.preventDefault();let _=this._rootElement||window,T=l.offsetTop-this._element.offsetTop;if(_.scrollTo)return void _.scrollTo({top:T,behavior:"smooth"});_.scrollTop=T}}))}_getNewObserver(){let a={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(l=>this._observerCallback(l),a)}_observerCallback(a){let l=O=>this._targetLinks.get(`#${O.target.id}`),_=O=>{this._previousScrollData.visibleEntryTop=O.target.offsetTop,this._process(l(O))},T=(this._rootElement||document.documentElement).scrollTop,C=T>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=T;for(let O of a){if(!O.isIntersecting){this._activeTarget=null,this._clearActiveClass(l(O));continue}let V=O.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(C&&V){if(_(O),!T)return}else C||V||_(O)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let a=Q.find(ou,this._config.target);for(let l of a){if(!l.hash||f(l))continue;let _=Q.findOne(decodeURI(l.hash),this._element);h(_)&&(this._targetLinks.set(decodeURI(l.hash),l),this._observableSections.set(l.hash,_))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add(zi),this._activateParents(a),L.trigger(this._element,Ty,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains("dropdown-item"))Q.findOne(".dropdown-toggle",a.closest(".dropdown")).classList.add(zi);else for(let l of Q.parents(a,".nav, .list-group"))for(let _ of Q.prev(l,Ay))_.classList.add(zi)}_clearActiveClass(a){a.classList.remove(zi);let l=Q.find(`${ou}.${zi}`,a);for(let _ of l)_.classList.remove(zi)}static jQueryInterface(a){return this.each(function(){let l=no.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);l[a]()}})}}L.on(window,by,()=>{for(let p of Q.find('[data-bs-spy="scroll"]'))no.getOrCreateInstance(p)}),q(no);let Gr=".bs.tab",Py=`hide${Gr}`,Ry=`hidden${Gr}`,ky=`show${Gr}`,Dy=`shown${Gr}`,Ny=`click${Gr}`,Oy=`keydown${Gr}`,xy=`load${Gr}`,Vy="ArrowLeft",sf="ArrowRight",Ly="ArrowUp",of="ArrowDown",au="Home",af="End",Kr="active",cf="fade",cu="show",uf=".dropdown-toggle",uu=`:not(${uf})`,lf='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',lu=`.nav-link${uu}, .list-group-item${uu}, [role="tab"]${uu}, ${lf}`,My=`.${Kr}[data-bs-toggle="tab"], .${Kr}[data-bs-toggle="pill"], .${Kr}[data-bs-toggle="list"]`;class Qr extends yt{constructor(a){super(a),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),L.on(this._element,Oy,l=>this._keydown(l)))}static get NAME(){return"tab"}show(){let a=this._element;if(this._elemIsActive(a))return;let l=this._getActiveElem(),_=l?L.trigger(l,Py,{relatedTarget:a}):null;L.trigger(a,ky,{relatedTarget:l}).defaultPrevented||_&&_.defaultPrevented||(this._deactivate(l,a),this._activate(a,l))}_activate(a,l){a&&(a.classList.add(Kr),this._activate(Q.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),L.trigger(a,Dy,{relatedTarget:l})):a.classList.add(cu)},a,a.classList.contains(cf)))}_deactivate(a,l){a&&(a.classList.remove(Kr),a.blur(),this._deactivate(Q.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),L.trigger(a,Ry,{relatedTarget:l})):a.classList.remove(cu)},a,a.classList.contains(cf)))}_keydown(a){if(![Vy,sf,Ly,of,au,af].includes(a.key))return;a.stopPropagation(),a.preventDefault();let l=this._getChildren().filter(T=>!f(T)),_;if([au,af].includes(a.key))_=l[a.key===au?0:l.length-1];else{let T=[sf,of].includes(a.key);_=Z(l,a.target,T,!0)}_&&(_.focus({preventScroll:!0}),Qr.getOrCreateInstance(_).show())}_getChildren(){return Q.find(lu,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,l){this._setAttributeIfNotExists(a,"role","tablist");for(let _ of l)this._setInitialAttributesOnChild(_)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);let l=this._elemIsActive(a),_=this._getOuterElement(a);a.setAttribute("aria-selected",l),_!==a&&this._setAttributeIfNotExists(_,"role","presentation"),l||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){let l=Q.getElementFromSelector(a);l&&(this._setAttributeIfNotExists(l,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(l,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,l){let _=this._getOuterElement(a);if(!_.classList.contains("dropdown"))return;let T=(C,O)=>{let V=Q.findOne(C,_);V&&V.classList.toggle(O,l)};T(uf,Kr),T(".dropdown-menu",cu),_.setAttribute("aria-expanded",l)}_setAttributeIfNotExists(a,l,_){a.hasAttribute(l)||a.setAttribute(l,_)}_elemIsActive(a){return a.classList.contains(Kr)}_getInnerElement(a){return a.matches(lu)?a:Q.findOne(lu,a)}_getOuterElement(a){return a.closest(".nav-item, .list-group-item")||a}static jQueryInterface(a){return this.each(function(){let l=Qr.getOrCreateInstance(this);if(typeof a=="string"){if(l[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);l[a]()}})}}L.on(document,Ny,lf,function(p){["A","AREA"].includes(this.tagName)&&p.preventDefault(),f(this)||Qr.getOrCreateInstance(this).show()}),L.on(window,xy,()=>{for(let p of Q.find(My))Qr.getOrCreateInstance(p)}),q(Qr);let hr=".bs.toast",Fy=`mouseover${hr}`,Uy=`mouseout${hr}`,$y=`focusin${hr}`,By=`focusout${hr}`,jy=`hide${hr}`,qy=`hidden${hr}`,zy=`show${hr}`,Wy=`shown${hr}`,hf="hide",ga="show",_a="showing",Hy={animation:"boolean",autohide:"boolean",delay:"number"},Gy={animation:!0,autohide:!0,delay:5e3};class ro extends yt{constructor(a,l){super(a,l),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Gy}static get DefaultType(){return Hy}static get NAME(){return"toast"}show(){L.trigger(this._element,zy).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(hf),b(this._element),this._element.classList.add(ga,_a),this._queueCallback(()=>{this._element.classList.remove(_a),L.trigger(this._element,Wy),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(L.trigger(this._element,jy).defaultPrevented||(this._element.classList.add(_a),this._queueCallback(()=>{this._element.classList.add(hf),this._element.classList.remove(_a,ga),L.trigger(this._element,qy)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ga),super.dispose()}isShown(){return this._element.classList.contains(ga)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,l){switch(a.type){case"mouseover":case"mouseout":this._hasMouseInteraction=l;break;case"focusin":case"focusout":this._hasKeyboardInteraction=l}if(l)return void this._clearTimeout();let _=a.relatedTarget;this._element===_||this._element.contains(_)||this._maybeScheduleHide()}_setListeners(){L.on(this._element,Fy,a=>this._onInteraction(a,!0)),L.on(this._element,Uy,a=>this._onInteraction(a,!1)),L.on(this._element,$y,a=>this._onInteraction(a,!0)),L.on(this._element,By,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){let l=ro.getOrCreateInstance(this,a);if(typeof a=="string"){if(l[a]===void 0)throw new TypeError(`No method named "${a}"`);l[a](this)}})}}return Xt(ro),q(ro),{Alert:Jt,Button:Tn,Carousel:$t,Collapse:Sn,Dropdown:te,Modal:Wr,Offcanvas:$n,Popover:ma,ScrollSpy:no,Tab:Qr,Toast:ro,Tooltip:Hr}})});var ep=()=>{};var rp=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},iv=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],c=n[t++],h=n[t++],f=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{let o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Ca={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],c=i+1<n.length,h=c?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,y=o>>2,b=(o&3)<<4|h>>4,E=(h&15)<<2|m>>6,x=m&63;f||(x=64,c||(E=64)),r.push(t[y],t[b],t[E],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iv(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||m==null||b==null)throw new Iu;let E=o<<2|h>>4;if(r.push(E),m!==64){let x=h<<4&240|m>>2;if(r.push(x),b!==64){let $=m<<6&192|b;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Iu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sv=function(n){let e=rp(n);return Ca.encodeByteArray(e,!0)},ao=function(n){return sv(n).replace(/\./g,"")},Pa=function(n){try{return Ca.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ov=()=>Tu().__FIREBASE_DEFAULTS__,av=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Pa(n[1]);return e&&JSON.parse(e)},Ra=()=>{try{return ep()||ov()||av()||cv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ip=n=>{var e,t;return(t=(e=Ra())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sp=n=>{let e=ip(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bu=()=>{var n;return(n=Ra())===null||n===void 0?void 0:n.config},op=n=>{var e;return(e=Ra())===null||e===void 0?void 0:e[`_${n}`]};var Jr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Zr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Au(n){return D(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function ap(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ao(JSON.stringify(t)),ao(JSON.stringify(c)),""].join(".")}var oo={};function uv(){let n={prod:[],emulator:[]};for(let e of Object.keys(oo))oo[e]?n.emulator.push(e):n.prod.push(e);return n}function lv(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var tp=!1;function Su(n,e){if(typeof window>"u"||typeof document>"u"||!Zr(window.location.host)||oo[n]===e||oo[n]||tp)return;oo[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",o=uv().prod.length>0;function c(){let E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,x){E.setAttribute("width","24"),E.setAttribute("id",x),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{tp=!0,c()},E}function y(E,x){E.setAttribute("id",x),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){let E=lv(r),x=t("text"),$=document.getElementById(x)||document.createElement("span"),q=t("learnmore"),U=document.getElementById(q)||document.createElement("a"),ce=t("preprendIcon"),Z=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let oe=E.element;h(oe),y(U,q);let we=m();f(Z,ce),oe.append(Z,$,U,we),document.body.appendChild(oe)}o?($.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function hv(){var n;let e=(n=Ra())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function up(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dp(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function co(){try{return typeof indexedDB=="object"}catch{return!1}}function fp(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var dv="FirebaseError",Lt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dv,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ht.prototype.create)}},Ht=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?fv(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new Lt(i,h,r)}};function fv(n,e){return n.replace(pv,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pv=/\{\$([^}]+)}/g;function ei(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],c=e[i];if(np(o)&&np(c)){if(!ei(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function np(n){return n!==null&&typeof n=="object"}function Cu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pp(n,e){let t=new Eu(n,e);return t.subscribe.bind(t)}var Eu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mv(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wu),i.error===void 0&&(i.error=wu),i.complete===void 0&&(i.complete=wu);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mv(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wu(){}var Gb=4*60*60*1e3;function _t(n){return n&&n._delegate?n._delegate:n}var gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ti="[DEFAULT]";var Pu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Jr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_v(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gv(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gv(n){return n===ti?void 0:n}function _v(n){return n.instantiationMode==="EAGER"}var ka=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Pu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var yv=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),vv={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},wv=de.INFO,Iv={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},Ev=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Iv[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dn=class{constructor(e){this.name=e,this._logLevel=wv,this._logHandler=Ev,this._userLogHandler=null,yv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var Tv=(n,e)=>e.some(t=>n instanceof t),mp,gp;function bv(){return mp||(mp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Av(){return gp||(gp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _p=new WeakMap,ku=new WeakMap,yp=new WeakMap,Ru=new WeakMap,Nu=new WeakMap;function Sv(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(fn(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_p.set(t,n)}).catch(()=>{}),Nu.set(e,n),e}function Cv(n){if(ku.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});ku.set(n,e)}var Du={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ku.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vp(n){Du=n(Du)}function Pv(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Da(this),e,...t);return yp.set(r,e.sort?e.sort():[e]),fn(r)}:Av().includes(n)?function(...e){return n.apply(Da(this),e),fn(_p.get(this))}:function(...e){return fn(n.apply(Da(this),e))}}function Rv(n){return typeof n=="function"?Pv(n):(n instanceof IDBTransaction&&Cv(n),Tv(n,bv())?new Proxy(n,Du):n)}function fn(n){if(n instanceof IDBRequest)return Sv(n);if(Ru.has(n))return Ru.get(n);let e=Rv(n);return e!==n&&(Ru.set(n,e),Nu.set(e,n)),e}var Da=n=>Nu.get(n);function Ip(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(n,e),h=fn(c);return r&&c.addEventListener("upgradeneeded",f=>{r(fn(c.result),f.oldVersion,f.newVersion,fn(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var kv=["get","getKey","getAll","getAllKeys","count"],Dv=["put","add","delete","clear"],Ou=new Map;function wp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Dv.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kv.includes(t)))return;let o=function(c,...h){return D(this,null,function*(){let f=this.transaction(c,i?"readwrite":"readonly"),m=f.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&f.done]))[0]})};return Ou.set(e,o),o}vp(n=>Xr(Xe({},n),{get:(e,t,r)=>wp(e,t)||n.get(e,t,r),has:(e,t)=>!!wp(e,t)||n.has(e,t)}));var Vu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nv(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Nv(n){let e=n.getComponent();return e?.type==="VERSION"}var Lu="@firebase/app",Ep="0.13.2";var Wn=new dn("@firebase/app"),Ov="@firebase/app-compat",xv="@firebase/analytics-compat",Vv="@firebase/analytics",Lv="@firebase/app-check-compat",Mv="@firebase/app-check",Fv="@firebase/auth",Uv="@firebase/auth-compat",$v="@firebase/database",Bv="@firebase/data-connect",jv="@firebase/database-compat",qv="@firebase/functions",zv="@firebase/functions-compat",Wv="@firebase/installations",Hv="@firebase/installations-compat",Gv="@firebase/messaging",Kv="@firebase/messaging-compat",Qv="@firebase/performance",Yv="@firebase/performance-compat",Xv="@firebase/remote-config",Jv="@firebase/remote-config-compat",Zv="@firebase/storage",ew="@firebase/storage-compat",tw="@firebase/firestore",nw="@firebase/ai",rw="@firebase/firestore-compat",iw="firebase",sw="11.10.0";var Mu="[DEFAULT]",ow={[Lu]:"fire-core",[Ov]:"fire-core-compat",[Vv]:"fire-analytics",[xv]:"fire-analytics-compat",[Mv]:"fire-app-check",[Lv]:"fire-app-check-compat",[Fv]:"fire-auth",[Uv]:"fire-auth-compat",[$v]:"fire-rtdb",[Bv]:"fire-data-connect",[jv]:"fire-rtdb-compat",[qv]:"fire-fn",[zv]:"fire-fn-compat",[Wv]:"fire-iid",[Hv]:"fire-iid-compat",[Gv]:"fire-fcm",[Kv]:"fire-fcm-compat",[Qv]:"fire-perf",[Yv]:"fire-perf-compat",[Xv]:"fire-rc",[Jv]:"fire-rc-compat",[Zv]:"fire-gcs",[ew]:"fire-gcs-compat",[tw]:"fire-fst",[rw]:"fire-fst-compat",[nw]:"fire-vertex","fire-js":"fire-js",[iw]:"fire-js-all"};var uo=new Map,aw=new Map,Fu=new Map;function Tp(n,e){try{n.container.addComponent(e)}catch(t){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gt(n){let e=n.name;if(Fu.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Fu.set(e,n);for(let t of uo.values())Tp(t,n);for(let t of aw.values())Tp(t,n);return!0}function Na(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hn(n){return n==null?!1:n.settings!==void 0}var cw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Ht("app","Firebase",cw);var Uu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}};var Ki=sw;function ju(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Mu,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw gr.create("bad-app-name",{appName:String(i)});if(t||(t=bu()),!t)throw gr.create("no-options");let o=uo.get(i);if(o){if(ei(t,o.options)&&ei(r,o.config))return o;throw gr.create("duplicate-app",{appName:i})}let c=new ka(i);for(let f of Fu.values())c.addComponent(f);let h=new Uu(t,r,c);return uo.set(i,h),h}function Qi(n=Mu){let e=uo.get(n);if(!e&&n===Mu&&bu())return ju();if(!e)throw gr.create("no-app",{appName:n});return e}function Oa(){return Array.from(uo.values())}function $e(n,e,t){var r;let i=(r=ow[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){let h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(h.join(" "));return}Gt(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uw="firebase-heartbeat-database",lw=1,lo="firebase-heartbeat-store",xu=null;function Cp(){return xu||(xu=Ip(uw,lw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lo)}catch(t){console.warn(t)}}}}).catch(n=>{throw gr.create("idb-open",{originalErrorMessage:n.message})})),xu}function hw(n){return D(this,null,function*(){try{let t=(yield Cp()).transaction(lo),r=yield t.objectStore(lo).get(Pp(n));return yield t.done,r}catch(e){if(e instanceof Lt)Wn.warn(e.message);else{let t=gr.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(t.message)}}})}function bp(n,e){return D(this,null,function*(){try{let r=(yield Cp()).transaction(lo,"readwrite");yield r.objectStore(lo).put(e,Pp(n)),yield r.done}catch(t){if(t instanceof Lt)Wn.warn(t.message);else{let r=gr.create("idb-set",{originalErrorMessage:t?.message});Wn.warn(r.message)}}})}function Pp(n){return`${n.name}!${n.options.appId}`}var dw=1024,fw=30,$u=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Bu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return D(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ap();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>fw){let c=mw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wn.warn(r)}})}getHeartbeatsHeader(){return D(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ap(),{heartbeatsToSend:r,unsentEntries:i}=pw(this._heartbeatsCache.heartbeats),o=ao(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Wn.warn(t),""}})}};function Ap(){return new Date().toISOString().substring(0,10)}function pw(n,e=dw){let t=[],r=n.slice();for(let i of n){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Sp(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Sp(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Bu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return co()?fp().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield hw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Sp(n){return ao(JSON.stringify({version:2,heartbeats:n})).length}function mw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function gw(n){Gt(new gt("platform-logger",e=>new Vu(e),"PRIVATE")),Gt(new gt("heartbeat",e=>new $u(e),"PRIVATE")),$e(Lu,Ep,n),$e(Lu,Ep,"esm2017"),$e("fire-js","")}gw("");var _w="firebase",yw="11.10.0";$e(_w,yw,"app");function Rp(n){n===void 0&&(n=Bn(Hi));let e=n.get(Aa);return t=>new io(r=>{let i=e.add(),o=!1;function c(){o||(i(),o=!0)}let h=t.subscribe({next:f=>{r.next(f),c()},complete:()=>{r.complete(),c()},error:f=>{r.error(f),c()}});return h.add(()=>{r.unsubscribe(),c()}),h})}var ri=new $f("ANGULARFIRE2_VERSION");function Va(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(c=>c.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xi=(n,e)=>{let t=e?[e]:Oa(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},Yi=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Yi||{}),kp=vu()&&typeof Zone<"u"?Yi.WARN:Yi.SILENT;var xa=class{zone;delegate;constructor(e,t=Af){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(c){i?i.runGuarded(()=>{e.apply(this,[c])}):e.apply(this,[c])};return this.delegate.schedule(o,t,r)}},ii=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Bn(pr);this.outsideAngular=t.runOutsideAngular(()=>new xa(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new xa(typeof Zone>"u"?void 0:Zone.current,bf))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ia({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dp=!1;function vw(n,e){!Dp&&(kp>Yi.SILENT||vu())&&(Dp=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),kp>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function ww(n){let e=Bn(pr,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ni(n){let e=Bn(pr,{optional:!0});return e?e.run(()=>n()):n()}var Iw=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ba(t,()=>ni(()=>n.apply(void 0,r)))),Kt=(n,e,t)=>(t||=e?Yi.WARN:Yi.VERBOSE,function(){let r,i=arguments,o,c,h;try{o=Bn(ii),c=Bn(Aa),h=Bn(Pf)}catch{return vw(n,t),n.apply(this,i)}for(let m=0;m<arguments.length;m++)typeof i[m]=="function"&&(e&&(r||=ni(()=>c.add())),i[m]=Iw(i[m],r,h));let f=ww(()=>n.apply(this,i));return e?f instanceof io?f.pipe(gu(o.outsideAngular),mu(o.insideAngular),Rp(h)):f instanceof Promise?ni(()=>{let m=c.add();return new Promise((y,b)=>{f.then(E=>ba(h,()=>ni(()=>y(E))),E=>ba(h,()=>ni(()=>b(E)))).finally(m)})}):typeof f=="function"&&r?function(){return setTimeout(r,0),f.apply(this,arguments)}:ni(()=>f):f instanceof io?f.pipe(gu(o.outsideAngular),mu(o.insideAngular)):ni(()=>f)});var si=class{constructor(e){return e}},ho=class{constructor(){return Oa()}};function Ew(n){return n&&n.length===1?n[0]:new si(Qi())}var qu=new Ea("angularfire2._apps"),Tw={provide:si,useFactory:Ew,deps:[[new fr,qu]]},bw={provide:ho,deps:[[new fr,qu]]};function Aw(n){return(e,t)=>{let r=t.get(kf);$e("angularfire",ri.full,"core"),$e("angularfire",ri.full,"app"),$e("angular",Bf.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new si(i)}}function Op(n,...e){return Ta([Tw,bw,{provide:qu,useFactory:Aw(n),multi:!0,deps:[pr,Hi,ii,...e]}])}var xp=Kt(ju,!0);var Sw=new Map,Cw={activated:!1,tokenObservers:[]},Pw={initialized:!1,enabled:!1};function Qt(n){return Sw.get(n)||Object.assign({},Cw)}function Fp(){return Pw}var Rw="https://content-firebaseappcheck.googleapis.com/v1";var kw="exchangeDebugToken",Vp={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},JA=24*60*60*1e3;var Hu=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return D(this,null,function*(){this.stop();try{this.pending=new Jr,this.pending.promise.catch(t=>{}),yield Dw(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Jr,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Dw(n){return new Promise(e=>{setTimeout(e,n)})}var Nw={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},_r=new Ht("appCheck","AppCheck",Nw);function Up(n){if(!Qt(n).activated)throw _r.create("use-before-activation",{appName:n.name})}function $p(r,i){return D(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){let x=yield c.getHeartbeatsHeader();x&&(o["X-Firebase-Client"]=x)}let h={method:"POST",body:JSON.stringify(e),headers:o},f;try{f=yield fetch(n,h)}catch(x){throw _r.create("fetch-network-error",{originalErrorMessage:x?.message})}if(f.status!==200)throw _r.create("fetch-status-error",{httpStatus:f.status});let m;try{m=yield f.json()}catch(x){throw _r.create("fetch-parse-error",{originalErrorMessage:x?.message})}let y=m.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw _r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});let b=Number(y[1])*1e3,E=Date.now();return{token:m.token,expireTimeMillis:E+b,issuedAtTimeMillis:E}})}function Bp(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Rw}/projects/${t}/apps/${r}:${kw}?key=${i}`,body:{debug_token:e}}}var Ow="firebase-app-check-database",xw=1,Gu="firebase-app-check-store";var La=null;function Vw(){return La||(La=new Promise((n,e)=>{try{let t=indexedDB.open(Ow,xw);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_r.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Gu,{keyPath:"compositeKey"})}}}catch(t){e(_r.create("storage-open",{originalErrorMessage:t?.message}))}}),La)}function Lw(n,e){return Mw(Fw(n),e)}function Mw(n,e){return D(this,null,function*(){let r=(yield Vw()).transaction(Gu,"readwrite"),o=r.objectStore(Gu).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=f=>{c()},r.onerror=f=>{var m;h(_r.create("storage-set",{originalErrorMessage:(m=f.target.error)===null||m===void 0?void 0:m.message}))}})})}function Fw(n){return`${n.options.appId}-${n.name}`}var fo=new dn("@firebase/app-check");function zu(n,e){return co()?Lw(n,e).catch(t=>{fo.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jp(){return Fp().enabled}function qp(){return D(this,null,function*(){let n=Fp();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Uw={error:"UNKNOWN_ERROR"};function $w(n){return Ca.encodeString(JSON.stringify(n),!1)}function Ku(n,e=!1,t=!1){return D(this,null,function*(){let r=n.app;Up(r);let i=Qt(r),o=i.token,c;if(o&&!po(o)&&(i.token=void 0,o=void 0),!o){let m=yield i.cachedTokenPromise;m&&(po(m)?o=m:yield zu(r,void 0))}if(!e&&o&&po(o))return{token:o.token};let h=!1;if(jp())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=$p(Bp(r,yield qp()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),h=!0);let m=yield i.exchangeTokenPromise;return yield zu(r,m),i.token=m,{token:m.token}}catch(m){return m.code==="appCheck/throttled"||m.code==="appCheck/initial-throttle"?fo.warn(m.message):t&&fo.error(m),Wu(m)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),h=!0),o=yield Qt(r).exchangeTokenPromise}catch(m){m.code==="appCheck/throttled"||m.code==="appCheck/initial-throttle"?fo.warn(m.message):t&&fo.error(m),c=m}let f;return o?c?po(o)?f={token:o.token,internalError:c}:f=Wu(c):(f={token:o.token},i.token=o,yield zu(r,o)):f=Wu(c),h&&zw(r,f),f})}function Bw(n){return D(this,null,function*(){let e=n.app;Up(e);let{provider:t}=Qt(e);if(jp()){let r=yield qp(),{token:i}=yield $p(Bp(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function jw(n,e,t,r){let{app:i}=n,o=Qt(i),c={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,c],o.token&&po(o.token)){let h=o.token;Promise.resolve().then(()=>{t({token:h.token}),Lp(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Lp(n))}function zp(n,e){let t=Qt(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Lp(n){let{app:e}=n,t=Qt(e),r=t.tokenRefresher;r||(r=qw(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qw(n){let{app:e}=n;return new Hu(()=>D(null,null,function*(){let t=Qt(e),r;if(t.token?r=yield Ku(n,!0):r=yield Ku(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Qt(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Vp.RETRIAL_MIN_WAIT,Vp.RETRIAL_MAX_WAIT)}function zw(n,e){let t=Qt(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function po(n){return n.expireTimeMillis-Date.now()>0}function Wu(n){return{token:$w(Uw),error:n}}var Qu=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Qt(this.app);for(let t of e)zp(this.app,t.next);return Promise.resolve()}};function Ww(n,e){return new Qu(n,e)}function Hw(n){return{getToken:e=>Ku(n,e),getLimitedUseToken:()=>Bw(n),addTokenListener:e=>jw(n,"INTERNAL",e),removeTokenListener:e=>zp(n.app,e)}}var Gw="@firebase/app-check",Kw="0.10.1";var Qw="app-check",Mp="app-check-internal";function Yw(){Gt(new gt(Qw,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Ww(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mp).initialize()})),Gt(new gt(Mp,n=>{let e=n.getProvider("app-check").getImmediate();return Hw(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$e(Gw,Kw)}Yw();var Xw="app-check";var Ma=class{constructor(){return Xi(Xw)}};var Jw=["localhost","0.0.0.0","127.0.0.1"],h0=typeof window<"u"&&Jw.includes(window.location.hostname);function Jp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Zp=Jp,em=new Ht("auth","Firebase",Jp());var Ba=new dn("@firebase/auth");function eI(n,...e){Ba.logLevel<=de.WARN&&Ba.warn(`Auth (${Ki}): ${n}`,...e)}function Ua(n,...e){Ba.logLevel<=de.ERROR&&Ba.error(`Auth (${Ki}): ${n}`,...e)}function Wp(n,...e){throw al(n,...e)}function ol(n,...e){return al(n,...e)}function tm(n,e,t){let r=Object.assign(Object.assign({},Zp()),{[e]:t});return new Ht("auth","Firebase",r).create(e,{appName:n.name})}function $a(n){return tm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function al(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return em.create(n,...e)}function ye(n,e,...t){if(!n)throw al(e,...t)}function mo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ua(e),new Error(e)}function ja(n,e){n||mo(e)}function tI(){return Hp()==="http:"||Hp()==="https:"}function Hp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function nI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tI()||lp()||"connection"in navigator)?navigator.onLine:!0}function rI(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ci=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ja(t>e,"Short delay should be less than long delay!"),this.isMobile=cp()||hp()}get(){return nI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function iI(n,e){ja(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qa=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aI=new ci(3e4,6e4);function nm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ka(o,c,h,f){return D(this,arguments,function*(n,e,t,r,i={}){return rm(n,i,()=>D(null,null,function*(){let m={},y={};r&&(e==="GET"?y=r:m={body:JSON.stringify(r)});let b=Cu(Object.assign({key:n.config.apiKey},y)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let x=Object.assign({method:e,headers:E},m);return up()||(x.referrerPolicy="no-referrer"),n.emulatorConfig&&Zr(n.emulatorConfig.host)&&(x.credentials="include"),qa.fetch()(yield im(n,n.config.apiHost,t,b),x)}))})}function rm(n,e,t){return D(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sI),e);try{let i=new Ju(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let c=yield o.json();if("needConfirmation"in c)throw Fa(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{let h=o.ok?c.errorMessage:c.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fa(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Fa(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Fa(n,"user-disabled",c);let y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw tm(n,y,m);Wp(n,y)}}catch(i){if(i instanceof Lt)throw i;Wp(n,"network-request-failed",{message:String(i)})}})}function im(n,e,t,r){return D(this,null,function*(){let i=`${e}${t}?${r}`,o=n,c=o.config.emulator?iI(n.config,i):`${n.config.apiScheme}://${i}`;return oI.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c})}var Ju=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ol(this.auth,"network-request-failed")),aI.get())})}};function Fa(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ol(n,e,r);return i.customData._tokenResponse=t,i}function cI(n,e){return D(this,null,function*(){return Ka(n,"POST","/v1/accounts:delete",e)})}function za(n,e){return D(this,null,function*(){return Ka(n,"POST","/v1/accounts:lookup",e)})}function go(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cl(n,e=!1){return D(this,null,function*(){let t=_t(n),r=yield t.getIdToken(e),i=sm(r);ye(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:go(Yu(i.auth_time)),issuedAtTime:go(Yu(i.iat)),expirationTime:go(Yu(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Yu(n){return Number(n)*1e3}function sm(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ua("JWT malformed, contained fewer than 3 sections"),null;try{let i=Pa(t);return i?JSON.parse(i):(Ua("Failed to decode base64 JWT payload"),null)}catch(i){return Ua("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Gp(n){let e=sm(n);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Zu(n,e,t=!1){return D(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Lt&&uI(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function uI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var el=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),t)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wa(n){return D(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Zu(n,za(t,{idToken:r}));ye(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?om(o.providerUserInfo):[],h=lI(n.providerData,c),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,y=f?m:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new yo(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,b)})}function ul(n){return D(this,null,function*(){let e=_t(n);yield Wa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lI(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function om(n){return n.map(e=>{var{providerId:t}=e,r=pu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hI(n,e){return D(this,null,function*(){let t=yield rm(n,{},()=>D(null,null,function*(){let r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=yield im(n,i,"/v1/token",`key=${o}`),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";let f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Zr(n.emulatorConfig.host)&&(f.credentials="include"),qa.fetch()(c,f)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function dI(n,e){return D(this,null,function*(){return Ka(n,"POST","/v2/accounts:revokeToken",nm(n,e))})}var _o=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");let t=Gp(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return D(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return D(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield hI(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new n;return r&&(ye(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return mo("not implemented")}};function yr(n,e){ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var oi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=pu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new el(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yo(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let t=yield Zu(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cl(this,e)}reload(){return ul(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return D(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Wa(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(Hn(this.auth.app))return Promise.reject($a(this.auth));let e=yield this.getIdToken();return yield Zu(this,cI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,h,f,m,y;let b=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,x=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,$=(c=t.photoURL)!==null&&c!==void 0?c:void 0,q=(h=t.tenantId)!==null&&h!==void 0?h:void 0,U=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,ce=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Z=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:oe,emailVerified:we,isAnonymous:st,providerData:ge,stsTokenManager:S}=t;ye(oe&&S,e,"internal-error");let v=_o.fromJSON(this.name,S);ye(typeof oe=="string",e,"internal-error"),yr(b,e.name),yr(E,e.name),ye(typeof we=="boolean",e,"internal-error"),ye(typeof st=="boolean",e,"internal-error"),yr(x,e.name),yr($,e.name),yr(q,e.name),yr(U,e.name),yr(ce,e.name),yr(Z,e.name);let I=new n({uid:oe,auth:e,email:E,emailVerified:we,displayName:b,isAnonymous:st,photoURL:$,phoneNumber:x,tenantId:q,stsTokenManager:v,createdAt:ce,lastLoginAt:Z});return ge&&Array.isArray(ge)&&(I.providerData=ge.map(A=>Object.assign({},A))),U&&(I._redirectEventId=U),I}static _fromIdTokenResponse(e,t,r=!1){return D(this,null,function*(){let i=new _o;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Wa(o),o})}static _fromGetAccountInfoResponse(e,t,r){return D(this,null,function*(){let i=t.users[0];ye(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?om(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,h=new _o;h.updateFromIdToken(r);let f=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,m),f})}};var Kp=new Map;function ai(n){ja(n instanceof Function,"Expected a class definition");let e=Kp.get(n);return e?(ja(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kp.set(n,e),e)}var fI=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(t,r){return D(this,null,function*(){this.storage[t]=r})}_get(t){return D(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return D(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),tl=fI;function Xu(n,e,t){return`firebase:${n}:${e}:${t}`}var Ha=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Xu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Xu("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield za(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return D(this,null,function*(){if(!t.length)return new n(ai(tl),e,r);let i=(yield Promise.all(t.map(m=>D(null,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),o=i[0]||ai(tl),c=Xu(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let y=yield m._get(c);if(y){let b;if(typeof y=="string"){let E=yield za(e,{idToken:y}).catch(()=>{});if(!E)break;b=yield oi._fromGetAccountInfoResponse(e,E,y)}else b=oi._fromJSON(e,y);m!==o&&(h=b),o=m;break}}catch{}let f=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new n(o,e,r):(o=f[0],h&&(yield o._set(c,h.toJSON())),yield Promise.all(t.map(m=>D(null,null,function*(){if(m!==o)try{yield m._remove(c)}catch{}}))),new n(o,e,r))})}};function Qp(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_I(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vI(e))return"Blackberry";if(wI(e))return"Webos";if(mI(e))return"Safari";if((e.includes("chrome/")||gI(e))&&!e.includes("edge/"))return"Chrome";if(yI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pI(n=It()){return/firefox\//i.test(n)}function mI(n=It()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gI(n=It()){return/crios\//i.test(n)}function _I(n=It()){return/iemobile/i.test(n)}function yI(n=It()){return/android/i.test(n)}function vI(n=It()){return/blackberry/i.test(n)}function wI(n=It()){return/webos/i.test(n)}function am(n,e=[]){let t;switch(n){case"Browser":t=Qp(It());break;case"Worker":t=`${Qp(It())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ki}/${r}`}var nl=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((c,h)=>{try{let f=e(o);c(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function II(t){return D(this,arguments,function*(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",nm(n,e))})}var EI=6,rl=class{constructor(e){var t,r,i,o;let c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:EI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,h;let f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var il=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ga(this),this.idTokenSubscription=new Ga(this),this.beforeStateQueue=new nl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=em,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let t=yield za(this,{idToken:e}),r=yield oi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var t;if(Hn(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,f=yield this.tryRedirectSignIn(e);(!c||c===h)&&f?.user&&(i=f.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return D(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield Wa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rI()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(Hn(this.app))return Promise.reject($a(this));let t=e?_t(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return D(this,null,function*(){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return Hn(this.app)?Promise.reject($a(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Hn(this.app)?Promise.reject($a(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(ai(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield II(this),t=new rl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ht("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dI(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return D(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ai(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=yield Ha.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),c=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){let f=e.addObserver(t,r,i);return()=>{c=!0,f()}}else{let f=e.addObserver(t);return()=>{c=!0,f()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=am(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return D(this,null,function*(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&eI(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function TI(n){return _t(n)}var Ga=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pp(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bI={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AI(n){bI=n}function SI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function CI(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var T0=SI("rcb"),b0=new ci(3e4,6e4);var A0=new ci(2e3,1e4);var S0=10*60*1e3;var C0=new ci(3e4,6e4);var P0=new ci(5e3,15e3);var R0=encodeURIComponent("fac");var Yp="@firebase/auth",Xp="1.10.8";var sl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function PI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RI(n){Gt(new gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;ye(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});let f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:am(n)},m=new il(r,i,o,f);return CI(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gt(new gt("auth-internal",e=>{let t=TI(e.getProvider("auth").getImmediate());return(r=>new sl(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(Yp,Xp,PI(n)),$e(Yp,Xp,"esm2017")}var kI=5*60,k0=op("authIdTokenMaxAge")||kI;function DI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}AI({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ol("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",DI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RI("Browser");var RE="auth";var Qa=class{constructor(){return Xi(RE)}};var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},um={};var Gn,ll;(function(){var n;function e(S,v){function I(){}I.prototype=v.prototype,S.D=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(A,P,k){for(var w=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)w[bt-2]=arguments[bt];return v.prototype[P].apply(A,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,I){I||(I=0);var A=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)A[P]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(P=0;16>P;++P)A[P]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],P=S.g[2];var k=S.g[3],w=v+(k^I&(P^k))+A[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=k+(P^v&(I^P))+A[1]+3905402710&4294967295,k=v+(w<<12&4294967295|w>>>20),w=P+(I^k&(v^I))+A[2]+606105819&4294967295,P=k+(w<<17&4294967295|w>>>15),w=I+(v^P&(k^v))+A[3]+3250441966&4294967295,I=P+(w<<22&4294967295|w>>>10),w=v+(k^I&(P^k))+A[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=k+(P^v&(I^P))+A[5]+1200080426&4294967295,k=v+(w<<12&4294967295|w>>>20),w=P+(I^k&(v^I))+A[6]+2821735955&4294967295,P=k+(w<<17&4294967295|w>>>15),w=I+(v^P&(k^v))+A[7]+4249261313&4294967295,I=P+(w<<22&4294967295|w>>>10),w=v+(k^I&(P^k))+A[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=k+(P^v&(I^P))+A[9]+2336552879&4294967295,k=v+(w<<12&4294967295|w>>>20),w=P+(I^k&(v^I))+A[10]+4294925233&4294967295,P=k+(w<<17&4294967295|w>>>15),w=I+(v^P&(k^v))+A[11]+2304563134&4294967295,I=P+(w<<22&4294967295|w>>>10),w=v+(k^I&(P^k))+A[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=k+(P^v&(I^P))+A[13]+4254626195&4294967295,k=v+(w<<12&4294967295|w>>>20),w=P+(I^k&(v^I))+A[14]+2792965006&4294967295,P=k+(w<<17&4294967295|w>>>15),w=I+(v^P&(k^v))+A[15]+1236535329&4294967295,I=P+(w<<22&4294967295|w>>>10),w=v+(P^k&(I^P))+A[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=k+(I^P&(v^I))+A[6]+3225465664&4294967295,k=v+(w<<9&4294967295|w>>>23),w=P+(v^I&(k^v))+A[11]+643717713&4294967295,P=k+(w<<14&4294967295|w>>>18),w=I+(k^v&(P^k))+A[0]+3921069994&4294967295,I=P+(w<<20&4294967295|w>>>12),w=v+(P^k&(I^P))+A[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=k+(I^P&(v^I))+A[10]+38016083&4294967295,k=v+(w<<9&4294967295|w>>>23),w=P+(v^I&(k^v))+A[15]+3634488961&4294967295,P=k+(w<<14&4294967295|w>>>18),w=I+(k^v&(P^k))+A[4]+3889429448&4294967295,I=P+(w<<20&4294967295|w>>>12),w=v+(P^k&(I^P))+A[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=k+(I^P&(v^I))+A[14]+3275163606&4294967295,k=v+(w<<9&4294967295|w>>>23),w=P+(v^I&(k^v))+A[3]+4107603335&4294967295,P=k+(w<<14&4294967295|w>>>18),w=I+(k^v&(P^k))+A[8]+1163531501&4294967295,I=P+(w<<20&4294967295|w>>>12),w=v+(P^k&(I^P))+A[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=k+(I^P&(v^I))+A[2]+4243563512&4294967295,k=v+(w<<9&4294967295|w>>>23),w=P+(v^I&(k^v))+A[7]+1735328473&4294967295,P=k+(w<<14&4294967295|w>>>18),w=I+(k^v&(P^k))+A[12]+2368359562&4294967295,I=P+(w<<20&4294967295|w>>>12),w=v+(I^P^k)+A[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=k+(v^I^P)+A[8]+2272392833&4294967295,k=v+(w<<11&4294967295|w>>>21),w=P+(k^v^I)+A[11]+1839030562&4294967295,P=k+(w<<16&4294967295|w>>>16),w=I+(P^k^v)+A[14]+4259657740&4294967295,I=P+(w<<23&4294967295|w>>>9),w=v+(I^P^k)+A[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=k+(v^I^P)+A[4]+1272893353&4294967295,k=v+(w<<11&4294967295|w>>>21),w=P+(k^v^I)+A[7]+4139469664&4294967295,P=k+(w<<16&4294967295|w>>>16),w=I+(P^k^v)+A[10]+3200236656&4294967295,I=P+(w<<23&4294967295|w>>>9),w=v+(I^P^k)+A[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=k+(v^I^P)+A[0]+3936430074&4294967295,k=v+(w<<11&4294967295|w>>>21),w=P+(k^v^I)+A[3]+3572445317&4294967295,P=k+(w<<16&4294967295|w>>>16),w=I+(P^k^v)+A[6]+76029189&4294967295,I=P+(w<<23&4294967295|w>>>9),w=v+(I^P^k)+A[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=k+(v^I^P)+A[12]+3873151461&4294967295,k=v+(w<<11&4294967295|w>>>21),w=P+(k^v^I)+A[15]+530742520&4294967295,P=k+(w<<16&4294967295|w>>>16),w=I+(P^k^v)+A[2]+3299628645&4294967295,I=P+(w<<23&4294967295|w>>>9),w=v+(P^(I|~k))+A[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=k+(I^(v|~P))+A[7]+1126891415&4294967295,k=v+(w<<10&4294967295|w>>>22),w=P+(v^(k|~I))+A[14]+2878612391&4294967295,P=k+(w<<15&4294967295|w>>>17),w=I+(k^(P|~v))+A[5]+4237533241&4294967295,I=P+(w<<21&4294967295|w>>>11),w=v+(P^(I|~k))+A[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=k+(I^(v|~P))+A[3]+2399980690&4294967295,k=v+(w<<10&4294967295|w>>>22),w=P+(v^(k|~I))+A[10]+4293915773&4294967295,P=k+(w<<15&4294967295|w>>>17),w=I+(k^(P|~v))+A[1]+2240044497&4294967295,I=P+(w<<21&4294967295|w>>>11),w=v+(P^(I|~k))+A[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=k+(I^(v|~P))+A[15]+4264355552&4294967295,k=v+(w<<10&4294967295|w>>>22),w=P+(v^(k|~I))+A[6]+2734768916&4294967295,P=k+(w<<15&4294967295|w>>>17),w=I+(k^(P|~v))+A[13]+1309151649&4294967295,I=P+(w<<21&4294967295|w>>>11),w=v+(P^(I|~k))+A[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=k+(I^(v|~P))+A[11]+3174756917&4294967295,k=v+(w<<10&4294967295|w>>>22),w=P+(v^(k|~I))+A[2]+718787259&4294967295,P=k+(w<<15&4294967295|w>>>17),w=I+(k^(P|~v))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(P+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+k&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var I=v-this.blockSize,A=this.B,P=this.h,k=0;k<v;){if(P==0)for(;k<=I;)i(this,S,k),k+=this.blockSize;if(typeof S=="string"){for(;k<v;)if(A[P++]=S.charCodeAt(k++),P==this.blockSize){i(this,A),P=0;break}}else for(;k<v;)if(A[P++]=S[k++],P==this.blockSize){i(this,A),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var I=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=I&255,I/=256;for(this.u(S),S=Array(16),v=I=0;4>v;++v)for(var A=0;32>A;A+=8)S[I++]=this.g[v]>>>A&255;return S};function o(S,v){var I=h;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function c(S,v){this.h=v;for(var I=[],A=!0,P=S.length-1;0<=P;P--){var k=S[P]|0;A&&k==v||(I[P]=k,A=!1)}this.g=I}var h={};function f(S){return-128<=S&&128>S?o(S,function(v){return new c([v|0],0>v?-1:0)}):new c([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return b;if(0>S)return U(m(-S));for(var v=[],I=1,A=0;S>=I;A++)v[A]=S/I|0,I*=4294967296;return new c(v,0)}function y(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return U(y(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),A=b,P=0;P<S.length;P+=8){var k=Math.min(8,S.length-P),w=parseInt(S.substring(P,P+k),v);8>k?(k=m(Math.pow(v,k)),A=A.j(k).add(m(w))):(A=A.j(I),A=A.add(m(w)))}return A}var b=f(0),E=f(1),x=f(16777216);n=c.prototype,n.m=function(){if(q(this))return-U(this).m();for(var S=0,v=1,I=0;I<this.g.length;I++){var A=this.i(I);S+=(0<=A?A:4294967296+A)*v,v*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if($(this))return"0";if(q(this))return"-"+U(this).toString(S);for(var v=m(Math.pow(S,6)),I=this,A="";;){var P=we(I,v).g;I=ce(I,P.j(v));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=P,$(I))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function $(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function q(S){return S.h==-1}n.l=function(S){return S=ce(this,S),q(S)?-1:$(S)?0:1};function U(S){for(var v=S.g.length,I=[],A=0;A<v;A++)I[A]=~S.g[A];return new c(I,~S.h).add(E)}n.abs=function(){return q(this)?U(this):this},n.add=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],A=0,P=0;P<=v;P++){var k=A+(this.i(P)&65535)+(S.i(P)&65535),w=(k>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);A=w>>>16,k&=65535,w&=65535,I[P]=w<<16|k}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ce(S,v){return S.add(U(v))}n.j=function(S){if($(this)||$(S))return b;if(q(this))return q(S)?U(this).j(U(S)):U(U(this).j(S));if(q(S))return U(this.j(U(S)));if(0>this.l(x)&&0>S.l(x))return m(this.m()*S.m());for(var v=this.g.length+S.g.length,I=[],A=0;A<2*v;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<S.g.length;P++){var k=this.i(A)>>>16,w=this.i(A)&65535,bt=S.i(P)>>>16,In=S.i(P)&65535;I[2*A+2*P]+=w*In,Z(I,2*A+2*P),I[2*A+2*P+1]+=k*In,Z(I,2*A+2*P+1),I[2*A+2*P+1]+=w*bt,Z(I,2*A+2*P+1),I[2*A+2*P+2]+=k*bt,Z(I,2*A+2*P+2)}for(A=0;A<v;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=v;A<2*v;A++)I[A]=0;return new c(I,0)};function Z(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function oe(S,v){this.g=S,this.h=v}function we(S,v){if($(v))throw Error("division by zero");if($(S))return new oe(b,b);if(q(S))return v=we(U(S),v),new oe(U(v.g),U(v.h));if(q(v))return v=we(S,U(v)),new oe(U(v.g),v.h);if(30<S.g.length){if(q(S)||q(v))throw Error("slowDivide_ only works with positive integers.");for(var I=E,A=v;0>=A.l(S);)I=st(I),A=st(A);var P=ge(I,1),k=ge(A,1);for(A=ge(A,2),I=ge(I,2);!$(A);){var w=k.add(A);0>=w.l(S)&&(P=P.add(I),k=w),A=ge(A,1),I=ge(I,1)}return v=ce(S,P.j(v)),new oe(P,v)}for(P=b;0<=S.l(v);){for(I=Math.max(1,Math.floor(S.m()/v.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=m(I),w=k.j(v);q(w)||0<w.l(S);)I-=A,k=m(I),w=k.j(v);$(k)&&(k=E),P=P.add(k),S=ce(S,w)}return new oe(P,S)}n.A=function(S){return we(this,S).h},n.and=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],A=0;A<v;A++)I[A]=this.i(A)&S.i(A);return new c(I,this.h&S.h)},n.or=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],A=0;A<v;A++)I[A]=this.i(A)|S.i(A);return new c(I,this.h|S.h)},n.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],A=0;A<v;A++)I[A]=this.i(A)^S.i(A);return new c(I,this.h^S.h)};function st(S){for(var v=S.g.length+1,I=[],A=0;A<v;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new c(I,S.h)}function ge(S,v){var I=v>>5;v%=32;for(var A=S.g.length-I,P=[],k=0;k<A;k++)P[k]=0<v?S.i(k+I)>>>v|S.i(k+I+1)<<32-v:S.i(k+I);return new c(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ll=um.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Gn=um.Integer=c}).apply(typeof cm<"u"?cm:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kn={};var hl,kE,Ji,dl,vo,Xa,fl,pl,ml;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,u,d){return s==Array.prototype||s==Object.prototype||(s[u]=d.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var u=0;u<s.length;++u){var d=s[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(s,u){if(u)e:{var d=r;s=s.split(".");for(var g=0;g<s.length-1;g++){var R=s[g];if(!(R in d))break e;d=d[R]}s=s[s.length-1],g=d[s],u=u(g),u!=g&&u!=null&&e(d,s,{configurable:!0,writable:!0,value:u})}}function o(s,u){s instanceof String&&(s+="");var d=0,g=!1,R={next:function(){if(!g&&d<s.length){var N=d++;return{value:u(N,s[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(s){return s||function(){return o(this,function(u,d){return d})}});var c=c||{},h=this||self;function f(s){var u=typeof s;return u=u!="object"?u:s?Array.isArray(s)?"array":u:"null",u=="array"||u=="object"&&typeof s.length=="number"}function m(s){var u=typeof s;return u=="object"&&s!=null||u=="function"}function y(s,u,d){return s.call.apply(s.bind,arguments)}function b(s,u,d){if(!s)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,g),s.apply(u,R)}}return function(){return s.apply(u,arguments)}}function E(s,u,d){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:b,E.apply(null,arguments)}function x(s,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),s.apply(this,g)}}function $(s,u){function d(){}d.prototype=u.prototype,s.aa=u.prototype,s.prototype=new d,s.prototype.constructor=s,s.Qb=function(g,R,N){for(var B=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)B[Ee-2]=arguments[Ee];return u.prototype[R].apply(g,B)}}function q(s){let u=s.length;if(0<u){let d=Array(u);for(let g=0;g<u;g++)d[g]=s[g];return d}return[]}function U(s,u){for(let d=1;d<arguments.length;d++){let g=arguments[d];if(f(g)){let R=s.length||0,N=g.length||0;s.length=R+N;for(let B=0;B<N;B++)s[R+B]=g[B]}else s.push(g)}}class ce{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Z(s){return/^[\s\xa0]*$/.test(s)}function oe(){var s=h.navigator;return s&&(s=s.userAgent)?s:""}function we(s){return we[" "](s),s}we[" "]=function(){};var st=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function ge(s,u,d){for(let g in s)u.call(d,s[g],g,s)}function S(s,u){for(let d in s)u.call(void 0,s[d],d,s)}function v(s){let u={};for(let d in s)u[d]=s[d];return u}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(s,u){let d,g;for(let R=1;R<arguments.length;R++){g=arguments[R];for(d in g)s[d]=g[d];for(let N=0;N<I.length;N++)d=I[N],Object.prototype.hasOwnProperty.call(g,d)&&(s[d]=g[d])}}function P(s){var u=1;s=s.split(":");let d=[];for(;0<u&&s.length;)d.push(s.shift()),u--;return s.length&&d.push(s.join(":")),d}function k(s){h.setTimeout(()=>{throw s},0)}function w(){var s=Pr;let u=null;return s.g&&(u=s.g,s.g=s.g.next,s.g||(s.h=null),u.next=null),u}class bt{constructor(){this.h=this.g=null}add(u,d){let g=In.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var In=new ce(()=>new Hc,s=>s.reset());class Hc{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let er,L=!1,Pr=new bt,bs=()=>{let s=h.Promise.resolve(void 0);er=()=>{s.then(As)}};var As=()=>{for(var s;s=w();){try{s.h.call(s.g)}catch(d){k(d)}var u=In;u.j(s),100>u.h&&(u.h++,s.next=u.g,u.g=s)}L=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(s,u){this.type=s,this.g=this.target=u,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var s=!1,u=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let d=()=>{};h.addEventListener("test",d,u),h.removeEventListener("test",d,u)}catch{}return s}();function En(s,u){if(De.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var d=this.type=s.type,g=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=u,u=s.relatedTarget){if(st){e:{try{we(u.nodeName);var R=!0;break e}catch{}R=!1}R||(u=null)}}else d=="mouseover"?u=s.fromElement:d=="mouseout"&&(u=s.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Q[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&En.aa.h.call(this)}}$(En,De);var Q={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),jo=0;function Gc(s,u,d,g,R){this.listener=s,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=R,this.key=++jo,this.da=this.fa=!1}function Ti(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Jt(s){this.src=s,this.g={},this.h=0}Jt.prototype.add=function(s,u,d,g,R){var N=s.toString();s=this.g[N],s||(s=this.g[N]=[],this.h++);var B=Tn(s,u,g,R);return-1<B?(u=s[B],d||(u.fa=!1)):(u=new Gc(u,this.src,N,!!g,R),u.fa=d,s.push(u)),u};function bi(s,u){var d=u.type;if(d in s.g){var g=s.g[d],R=Array.prototype.indexOf.call(g,u,void 0),N;(N=0<=R)&&Array.prototype.splice.call(g,R,1),N&&(Ti(u),s.g[d].length==0&&(delete s.g[d],s.h--))}}function Tn(s,u,d,g){for(var R=0;R<s.length;++R){var N=s[R];if(!N.da&&N.listener==u&&N.capture==!!d&&N.ha==g)return R}return-1}var Zt="closure_lm_"+(1e6*Math.random()|0),Ss={};function qo(s,u,d,g,R){if(g&&g.once)return Wo(s,u,d,g,R);if(Array.isArray(u)){for(var N=0;N<u.length;N++)qo(s,u[N],d,g,R);return null}return d=Rs(d),s&&s[Xt]?s.K(u,d,m(g)?!!g.capture:!!g,R):zo(s,u,d,!1,g,R)}function zo(s,u,d,g,R,N){if(!u)throw Error("Invalid event type");var B=m(R)?!!R.capture:!!R,Ee=Ai(s);if(Ee||(s[Zt]=Ee=new Jt(s)),d=Ee.add(u,d,g,B,N),d.proxy)return d;if(g=Kc(),d.proxy=g,g.src=s,g.listener=d,s.addEventListener)yt||(R=B),R===void 0&&(R=!1),s.addEventListener(u.toString(),g,R);else if(s.attachEvent)s.attachEvent(Rr(u.toString()),g);else if(s.addListener&&s.removeListener)s.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Kc(){function s(d){return u.call(s.src,s.listener,d)}let u=en;return s}function Wo(s,u,d,g,R){if(Array.isArray(u)){for(var N=0;N<u.length;N++)Wo(s,u[N],d,g,R);return null}return d=Rs(d),s&&s[Xt]?s.L(u,d,m(g)?!!g.capture:!!g,R):zo(s,u,d,!0,g,R)}function Ho(s,u,d,g,R){if(Array.isArray(u))for(var N=0;N<u.length;N++)Ho(s,u[N],d,g,R);else g=m(g)?!!g.capture:!!g,d=Rs(d),s&&s[Xt]?(s=s.i,u=String(u).toString(),u in s.g&&(N=s.g[u],d=Tn(N,d,g,R),-1<d&&(Ti(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete s.g[u],s.h--)))):s&&(s=Ai(s))&&(u=s.g[u.toString()],s=-1,u&&(s=Tn(u,d,g,R)),(d=-1<s?u[s]:null)&&Cs(d))}function Cs(s){if(typeof s!="number"&&s&&!s.da){var u=s.src;if(u&&u[Xt])bi(u.i,s);else{var d=s.type,g=s.proxy;u.removeEventListener?u.removeEventListener(d,g,s.capture):u.detachEvent?u.detachEvent(Rr(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=Ai(u))?(bi(d,s),d.h==0&&(d.src=null,u[Zt]=null)):Ti(s)}}}function Rr(s){return s in Ss?Ss[s]:Ss[s]="on"+s}function en(s,u){if(s.da)s=!0;else{u=new En(u,this);var d=s.listener,g=s.ha||s.src;s.fa&&Cs(s),s=d.call(g,u)}return s}function Ai(s){return s=s[Zt],s instanceof Jt?s:null}var Ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rs(s){return typeof s=="function"?s:(s[Ps]||(s[Ps]=function(u){return s.handleEvent(u)}),s[Ps])}function Ne(){Ze.call(this),this.i=new Jt(this),this.M=this,this.F=null}$(Ne,Ze),Ne.prototype[Xt]=!0,Ne.prototype.removeEventListener=function(s,u,d,g){Ho(this,s,u,d,g)};function Oe(s,u){var d,g=s.F;if(g)for(d=[];g;g=g.F)d.push(g);if(s=s.M,g=u.type||u,typeof u=="string")u=new De(u,s);else if(u instanceof De)u.target=u.target||s;else{var R=u;u=new De(g,s),A(u,R)}if(R=!0,d)for(var N=d.length-1;0<=N;N--){var B=u.g=d[N];R=Ut(B,g,!0,u)&&R}if(B=u.g=s,R=Ut(B,g,!0,u)&&R,R=Ut(B,g,!1,u)&&R,d)for(N=0;N<d.length;N++)B=u.g=d[N],R=Ut(B,g,!1,u)&&R}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var s=this.i,u;for(u in s.g){for(var d=s.g[u],g=0;g<d.length;g++)Ti(d[g]);delete s.g[u],s.h--}}this.F=null},Ne.prototype.K=function(s,u,d,g){return this.i.add(String(s),u,!1,d,g)},Ne.prototype.L=function(s,u,d,g){return this.i.add(String(s),u,!0,d,g)};function Ut(s,u,d,g){if(u=s.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,N=0;N<u.length;++N){var B=u[N];if(B&&!B.da&&B.capture==d){var Ee=B.listener,Ke=B.ha||B.src;B.fa&&bi(s.i,B),R=Ee.call(Ke,g)!==!1&&R}}return R&&!g.defaultPrevented}function kr(s,u,d){if(typeof s=="function")d&&(s=E(s,d));else if(s&&typeof s.handleEvent=="function")s=E(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:h.setTimeout(s,u||0)}function Go(s){s.g=kr(()=>{s.g=null,s.i&&(s.i=!1,Go(s))},s.l);let u=s.h;s.h=null,s.m.apply(null,u)}class ks extends Ze{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(s){Ze.call(this),this.h=s,this.g={}}$(Dr,Ze);var Ko=[];function Qo(s){ge(s.g,function(u,d){this.g.hasOwnProperty(d)&&Cs(u)},s),s.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Qo(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=h.JSON.stringify,Qc=h.JSON.parse,Yc=class{stringify(s){return h.JSON.stringify(s,void 0)}parse(s){return h.JSON.parse(s,void 0)}};function Si(){}Si.prototype.h=null;function Nr(s){return s.h||(s.h=s.i())}function Ns(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Os(){De.call(this,"d")}$(Os,De);function xs(){De.call(this,"c")}$(xs,De);var bn={},Yo=null;function $t(){return Yo=Yo||new Ne}bn.La="serverreachability";function nr(s){De.call(this,bn.La,s)}$(nr,De);function Or(s){let u=$t();Oe(u,new nr(u))}bn.STAT_EVENT="statevent";function Xo(s,u){De.call(this,bn.STAT_EVENT,s),this.stat=u}$(Xo,De);function ot(s){let u=$t();Oe(u,new Xo(u,s))}bn.Ma="timingevent";function Jo(s,u){De.call(this,bn.Ma,s),this.size=u}$(Jo,De);function xr(s,u){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){s()},u)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function rr(s,u,d,g,R,N){s.info(function(){if(s.g)if(N)for(var B="",Ee=N.split("&"),Ke=0;Ke<Ee.length;Ke++){var te=Ee[Ke].split("=");if(1<te.length){var Qe=te[0];te=te[1];var Ye=Qe.split("_");B=2<=Ye.length&&Ye[1]=="type"?B+(Qe+"="+te+"&"):B+(Qe+"=redacted&")}}else B=null;else B=N;return"XMLHTTP REQ ("+g+") [attempt "+R+"]: "+u+`
`+d+`
`+B})}function Ci(s,u,d,g,R,N,B){s.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+R+"]: "+u+`
`+d+`
`+N+" "+B})}function ir(s,u,d,g){s.info(function(){return"XMLHTTP TEXT ("+u+"): "+Xc(s,d)+(g?" "+g:"")})}function Vs(s,u){s.info(function(){return"TIMEOUT: "+u})}An.prototype.info=function(){};function Xc(s,u){if(!s.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(s=0;s<d.length;s++)if(Array.isArray(d[s])){var g=d[s];if(!(2>g.length)){var R=g[1];if(Array.isArray(R)&&!(1>R.length)){var N=R[0];if(N!="noop"&&N!="stop"&&N!="close")for(var B=1;B<R.length;B++)R[B]=""}}}}return Ds(d)}catch{return u}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ge;function et(){}$(et,Si),et.prototype.g=function(){return new XMLHttpRequest},et.prototype.i=function(){return{}},Ge=new et;function xe(s,u,d,g){this.j=s,this.i=u,this.l=d,this.R=g||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tt}function tt(){this.i=null,this.g="",this.h=!1}var Vr={},tn={};function Bt(s,u,d){s.L=1,s.v=Mr(je(u)),s.m=d,s.P=!0,Cn(s,null)}function Cn(s,u){s.F=Date.now(),jt(s),s.A=je(s.v);var d=s.A,g=s.R;Array.isArray(g)||(g=[String(g)]),Hs(d.i,"t",g),s.C=0,d=s.j.J,s.h=new tt,s.g=ha(s.j,d?u:null,!s.m),0<s.O&&(s.M=new ks(E(s.Y,s,s.g),s.O)),u=s.U,d=s.g,g=s.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ko[0]=R.toString()),R=Ko);for(var N=0;N<R.length;N++){var B=qo(d,R[N],g||u.handleEvent,!1,u.h||u);if(!B)break;u.g[B.key]=B}u=s.H?v(s.H):{},s.m?(s.u||(s.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,u)):(s.u="GET",s.g.ea(s.A,s.u,null,u)),Or(),rr(s.i,s.u,s.A,s.l,s.R,s.m)}xe.prototype.ca=function(s){s=s.target;let u=this.M;u&&Dt(s)==3?u.j():this.Y(s)},xe.prototype.Y=function(s){try{if(s==this.g)e:{let Ye=Dt(this.g);var u=this.g.Ba();let Fn=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||Js(this.g)))){this.J||Ye!=4||u==7||(u==8||0>=Fn?Or(3):Or(2)),Lr(this);var d=this.g.Z();this.X=d;t:if(Ls(this)){var g=Js(this.g);s="";var R=g.length,N=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nn(this),Pn(this);var B="";break t}this.h.i=new h.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,s+=this.h.i.decode(g[u],{stream:!(N&&u==R-1)});g.length=0,this.h.g+=s,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,Ci(this.i,this.u,this.A,this.l,this.R,Ye,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ke=this.g;if((Ee=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Ee)){var te=Ee;break t}}te=null}if(d=te)ir(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,d);else{this.o=!1,this.s=3,ot(12),nn(this),Pn(this);break e}}if(this.P){d=!0;let vt;for(;!this.J&&this.C<B.length;)if(vt=Ms(this,B),vt==tn){Ye==4&&(this.s=4,ot(14),d=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Vr){this.s=4,ot(15),ir(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else ir(this.i,this.l,vt,null),Ri(this,vt);if(Ls(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||B.length!=0||this.h.h||(this.s=1,ot(16),d=!1),this.o=this.o&&d,!d)ir(this.i,this.l,B,"[Invalid Chunked Response]"),nn(this),Pn(this);else if(0<B.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Bi(Qe),Qe.M=!0,ot(11))}}else ir(this.i,this.l,B,null),Ri(this,B);Ye==4&&nn(this),this.o&&!this.J&&(Ye==4?ca(this.j,this):(this.o=!1,jt(this)))}else ia(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),nn(this),Pn(this)}}}catch{}finally{}};function Ls(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Ms(s,u){var d=s.C,g=u.indexOf(`
`,d);return g==-1?tn:(d=Number(u.substring(d,g)),isNaN(d)?Vr:(g+=1,g+d>u.length?tn:(u=u.slice(g,g+d),s.C=g+d,u)))}xe.prototype.cancel=function(){this.J=!0,nn(this)};function jt(s){s.S=Date.now()+s.I,Fs(s,s.I)}function Fs(s,u){if(s.B!=null)throw Error("WatchDog timer not null");s.B=xr(E(s.ba,s),u)}function Lr(s){s.B&&(h.clearTimeout(s.B),s.B=null)}xe.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Vs(this.i,this.A),this.L!=2&&(Or(),ot(17)),nn(this),this.s=2,Pn(this)):Fs(this,this.S-s)};function Pn(s){s.j.G==0||s.J||ca(s.j,s)}function nn(s){Lr(s);var u=s.M;u&&typeof u.ma=="function"&&u.ma(),s.M=null,Qo(s.U),s.g&&(u=s.g,s.g=null,u.abort(),u.ma())}function Ri(s,u){try{var d=s.j;if(d.G!=0&&(d.g==s||ki(d.h,s))){if(!s.K&&ki(d.h,s)&&d.G==3){try{var g=d.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var R=g;if(R[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<s.F)ur(d),Fi(d);else break e;$i(d),ot(18)}}else d.za=R[1],0<d.za-d.T&&37500>R[2]&&d.F&&d.v==0&&!d.C&&(d.C=xr(E(d.Za,d),6e3));if(1>=Bs(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ln(d,11)}else if((s.K||d.g==s)&&ur(d),!Z(u))for(R=d.Da.g.parse(u),u=0;u<R.length;u++){let te=R[u];if(d.T=te[0],te=te[1],d.G==2)if(te[0]=="c"){d.K=te[1],d.ia=te[2];let Qe=te[3];Qe!=null&&(d.la=Qe,d.j.info("VER="+d.la));let Ye=te[4];Ye!=null&&(d.Aa=Ye,d.j.info("SVER="+d.Aa));let Fn=te[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(g=1.5*Fn,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;let vt=s.g;if(vt){let ji=vt.g?vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ji){var N=g.h;N.g||ji.indexOf("spdy")==-1&&ji.indexOf("quic")==-1&&ji.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Di(N,N.h),N.h=null))}if(g.D){let qi=vt.g?vt.g.getResponseHeader("X-HTTP-Session-Id"):null;qi&&(g.ya=qi,Ie(g.I,g.D,qi))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-s.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var B=s;if(g.qa=la(g,g.J?g.ia:null,g.W),B.K){js(g.h,B);var Ee=B,Ke=g.L;Ke&&(Ee.I=Ke),Ee.B&&(Lr(Ee),jt(Ee)),g.g=B}else Ui(g);0<d.i.length&&Br(d)}else te[0]!="stop"&&te[0]!="close"||Ln(d,7);else d.G==3&&(te[0]=="stop"||te[0]=="close"?te[0]=="stop"?Ln(d,7):Mi(d):te[0]!="noop"&&d.l&&d.l.ta(te),d.v=0)}}Or(4)}catch{}}var Zo=class{constructor(s,u){this.g=s,this.map=u}};function Us(s){this.l=s||10,h.PerformanceNavigationTiming?(s=h.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $s(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Bs(s){return s.h?1:s.g?s.g.size:0}function ki(s,u){return s.h?s.h==u:s.g?s.g.has(u):!1}function Di(s,u){s.g?s.g.add(u):s.h=u}function js(s,u){s.h&&s.h==u?s.h=null:s.g&&s.g.has(u)&&s.g.delete(u)}Us.prototype.cancel=function(){if(this.i=qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function qs(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let u=s.i;for(let d of s.g.values())u=u.concat(d.D);return u}return q(s.i)}function At(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(f(s)){for(var u=[],d=s.length,g=0;g<d;g++)u.push(s[g]);return u}u=[],d=0;for(g in s)u[d++]=s[g];return u}function lt(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(f(s)||typeof s=="string"){var u=[];s=s.length;for(var d=0;d<s;d++)u.push(d);return u}u=[],d=0;for(let g in s)u[d++]=g;return u}}}function rn(s,u){if(s.forEach&&typeof s.forEach=="function")s.forEach(u,void 0);else if(f(s)||typeof s=="string")Array.prototype.forEach.call(s,u,void 0);else for(var d=lt(s),g=At(s),R=g.length,N=0;N<R;N++)u.call(void 0,g[N],d&&d[N],s)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(s,u){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var g=s[d].indexOf("="),R=null;if(0<=g){var N=s[d].substring(0,g);R=s[d].substring(g+1)}else N=s[d];u(N,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function qt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof qt){this.h=s.h,St(this,s.j),this.o=s.o,this.g=s.g,Rn(this,s.s),this.l=s.l;var u=s.i,d=new zt;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),kn(this,d),this.m=s.m}else s&&(u=String(s).match(ht))?(this.h=!1,St(this,u[1]||"",!0),this.o=Ct(u[2]||""),this.g=Ct(u[3]||"",!0),Rn(this,u[4]),this.l=Ct(u[5]||"",!0),kn(this,u[6]||"",!0),this.m=Ct(u[7]||"")):(this.h=!1,this.i=new zt(null,this.h))}qt.prototype.toString=function(){var s=[],u=this.j;u&&s.push(Dn(u,Pt,!0),":");var d=this.g;return(d||u=="file")&&(s.push("//"),(u=this.o)&&s.push(Dn(u,Pt,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&s.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&s.push("/"),s.push(Dn(d,d.charAt(0)=="/"?sn:Jc,!0))),(d=this.i.toString())&&s.push("?",d),(d=this.m)&&s.push("#",Dn(d,ta)),s.join("")};function je(s){return new qt(s)}function St(s,u,d){s.j=d?Ct(u,!0):u,s.j&&(s.j=s.j.replace(/:$/,""))}function Rn(s,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);s.s=u}else s.s=null}function kn(s,u,d){u instanceof zt?(s.i=u,or(s.i,s.h)):(d||(u=Dn(u,Ni)),s.i=new zt(u,s.h))}function Ie(s,u,d){s.i.set(u,d)}function Mr(s){return Ie(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Ct(s,u){return s?u?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Dn(s,u,d){return typeof s=="string"?(s=encodeURI(s).replace(u,ea),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function ea(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Pt=/[#\/\?@]/g,Jc=/[#\?:]/g,sn=/[#\?]/g,Ni=/[#\?@]/g,ta=/#/g;function zt(s,u){this.h=this.g=null,this.i=s||null,this.j=!!u}function Rt(s){s.g||(s.g=new Map,s.h=0,s.i&&zs(s.i,function(u,d){s.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=zt.prototype,n.add=function(s,u){Rt(this),this.i=null,s=Nn(this,s);var d=this.g.get(s);return d||this.g.set(s,d=[]),d.push(u),this.h+=1,this};function sr(s,u){Rt(s),u=Nn(s,u),s.g.has(u)&&(s.i=null,s.h-=s.g.get(u).length,s.g.delete(u))}function Ws(s,u){return Rt(s),u=Nn(s,u),s.g.has(u)}n.forEach=function(s,u){Rt(this),this.g.forEach(function(d,g){d.forEach(function(R){s.call(u,R,g,this)},this)},this)},n.na=function(){Rt(this);let s=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let g=0;g<u.length;g++){let R=s[g];for(let N=0;N<R.length;N++)d.push(u[g])}return d},n.V=function(s){Rt(this);let u=[];if(typeof s=="string")Ws(this,s)&&(u=u.concat(this.g.get(Nn(this,s))));else{s=Array.from(this.g.values());for(let d=0;d<s.length;d++)u=u.concat(s[d])}return u},n.set=function(s,u){return Rt(this),this.i=null,s=Nn(this,s),Ws(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[u]),this.h+=1,this},n.get=function(s,u){return s?(s=this.V(s),0<s.length?String(s[0]):u):u};function Hs(s,u,d){sr(s,u),0<d.length&&(s.i=null,s.g.set(Nn(s,u),q(d)),s.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var g=u[d];let N=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var R=N;B[g]!==""&&(R+="="+encodeURIComponent(String(B[g]))),s.push(R)}}return this.i=s.join("&")};function Nn(s,u){return u=String(u),s.j&&(u=u.toLowerCase()),u}function or(s,u){u&&!s.j&&(Rt(s),s.i=null,s.g.forEach(function(d,g){var R=g.toLowerCase();g!=R&&(sr(this,g),Hs(this,R,d))},s)),s.j=u}function Zc(s,u){let d=new An;if(h.Image){let g=new Image;g.onload=x(kt,d,"TestLoadImage: loaded",!0,u,g),g.onerror=x(kt,d,"TestLoadImage: error",!1,u,g),g.onabort=x(kt,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=x(kt,d,"TestLoadImage: timeout",!1,u,g),h.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=s}else u(!1)}function na(s,u){let d=new An,g=new AbortController,R=setTimeout(()=>{g.abort(),kt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(s,{signal:g.signal}).then(N=>{clearTimeout(R),N.ok?kt(d,"TestPingServer: ok",!0,u):kt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),kt(d,"TestPingServer: error",!1,u)})}function kt(s,u,d,g,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),g(d)}catch{}}function Oi(){this.g=new Yc}function Gs(s,u,d){let g=d||"";try{rn(s,function(R,N){let B=R;m(R)&&(B=Ds(R)),u.push(g+N+"="+encodeURIComponent(B))})}catch(R){throw u.push(g+"type="+encodeURIComponent("_badmap")),R}}function Fr(s){this.l=s.Ub||null,this.j=s.eb||!1}$(Fr,Si),Fr.prototype.g=function(){return new On(this.l,this.j)},Fr.prototype.i=function(s){return function(){return s}}({});function On(s,u){Ne.call(this),this.D=s,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(On,Ne),n=On.prototype,n.open=function(s,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=u,this.readyState=1,xn(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(u.body=s),(this.D||h).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ra(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function ra(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var u=s.value?s.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!s.done}))&&(this.response=this.responseText+=u)}s.done?ar(this):xn(this),this.readyState==3&&ra(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,ar(this))},n.Qa=function(s){this.g&&(this.response=s,ar(this))},n.ga=function(){this.g&&ar(this)};function ar(s){s.readyState=4,s.l=null,s.j=null,s.v=null,xn(s)}n.setRequestHeader=function(s,u){this.u.append(s,u)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,s.push(d[0]+": "+d[1]),d=u.next();return s.join(`\r
`)};function xn(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(On.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function xi(s){let u="";return ge(s,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function Ur(s,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=xi(d),typeof s=="string"?d!=null&&encodeURIComponent(String(d)):Ie(s,u,d))}function Re(s){Ne.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Re,Ne);var $r=/^https?$/i,Ks=["POST","PUT"];n=Re.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);u=u?u.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ge.g(),this.v=this.o?Nr(this.o):Nr(Ge),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(s),!0),this.B=!1}catch(N){Qs(this,N);return}if(s=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var R in g)d.set(R,g[R]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),R=h.FormData&&s instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ks,u,void 0))||g||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,B]of d)this.g.setRequestHeader(N,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(s),this.u=!1}catch(N){Qs(this,N)}};function Qs(s,u){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=u,s.m=5,Ys(s),Vi(s)}function Ys(s){s.A||(s.A=!0,Oe(s,"complete"),Oe(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Oe(this,"complete"),Oe(this,"abort"),Vi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),Re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vn(this):this.bb())},n.bb=function(){Vn(this)};function Vn(s){if(s.h&&typeof c<"u"&&(!s.v[1]||Dt(s)!=4||s.Z()!=2)){if(s.u&&Dt(s)==4)kr(s.Ea,0,s);else if(Oe(s,"readystatechange"),Dt(s)==4){s.h=!1;try{let B=s.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=B===0){var R=String(s.D).match(ht)[1]||null;!R&&h.self&&h.self.location&&(R=h.self.location.protocol.slice(0,-1)),g=!$r.test(R?R.toLowerCase():"")}d=g}if(d)Oe(s,"complete"),Oe(s,"success");else{s.m=6;try{var N=2<Dt(s)?s.g.statusText:""}catch{N=""}s.l=N+" ["+s.Z()+"]",Ys(s)}}finally{Vi(s)}}}}function Vi(s,u){if(s.g){Xs(s);let d=s.g,g=s.v[0]?()=>{}:null;s.g=null,s.v=null,u||Oe(s,"ready");try{d.onreadystatechange=g}catch{}}}function Xs(s){s.I&&(h.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function Dt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var u=this.g.responseText;return s&&u.indexOf(s)==0&&(u=u.substring(s.length)),Qc(u)}};function Js(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function ia(s){let u={};s=(s.g&&2<=Dt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<s.length;g++){if(Z(s[g]))continue;var d=P(s[g]);let R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let N=u[R]||[];u[R]=N,N.push(d)}S(u,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(s,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[s]||u}function Li(s){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cr("baseRetryDelayMs",5e3,s),this.cb=cr("retryDelaySeedMs",1e4,s),this.Wa=cr("forwardChannelMaxRetries",2,s),this.wa=cr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Us(s&&s.concurrentRequestLimit),this.Da=new Oi,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Li.prototype,n.la=8,n.G=1,n.connect=function(s,u,d,g){ot(0),this.W=s,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=la(this,null,this.W),Br(this)};function Mi(s){if(sa(s),s.G==3){var u=s.U++,d=je(s.I);if(Ie(d,"SID",s.K),Ie(d,"RID",u),Ie(d,"TYPE","terminate"),qr(s,d),u=new xe(s,s.j,u),u.L=2,u.v=Mr(je(d)),d=!1,h.navigator&&h.navigator.sendBeacon)try{d=h.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&h.Image&&(new Image().src=u.v,d=!0),d||(u.g=ha(u.j,null),u.g.ea(u.v)),u.F=Date.now(),jt(u)}ua(s)}function Fi(s){s.g&&(Bi(s),s.g.cancel(),s.g=null)}function sa(s){Fi(s),s.u&&(h.clearTimeout(s.u),s.u=null),ur(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&h.clearTimeout(s.s),s.s=null)}function Br(s){if(!$s(s.h)&&!s.s){s.s=!0;var u=s.Ga;er||bs(),L||(er(),L=!0),Pr.add(u,s),s.B=0}}function oa(s,u){return Bs(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=u.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=xr(E(s.Ga,s,u),Zs(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let R=new xe(this,this.j,s),N=this.o;if(this.S&&(N?(N=v(N),A(N,this.S)):N=this.S),this.m!==null||this.O||(R.H=N,N=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=aa(this,R,u),d=je(this.I),Ie(d,"RID",s),Ie(d,"CVER",22),this.D&&Ie(d,"X-HTTP-Session-Id",this.D),qr(this,d),N&&(this.O?u="headers="+encodeURIComponent(String(xi(N)))+"&"+u:this.m&&Ur(d,this.m,N)),Di(this.h,R),this.Ua&&Ie(d,"TYPE","init"),this.P?(Ie(d,"$req",u),Ie(d,"SID","null"),R.T=!0,Bt(R,d,null)):Bt(R,d,u),this.G=2}}else this.G==3&&(s?jr(this,s):this.i.length==0||$s(this.h)||jr(this))};function jr(s,u){var d;u?d=u.l:d=s.U++;let g=je(s.I);Ie(g,"SID",s.K),Ie(g,"RID",d),Ie(g,"AID",s.T),qr(s,g),s.m&&s.o&&Ur(g,s.m,s.o),d=new xe(s,s.j,d,s.B+1),s.m===null&&(d.H=s.o),u&&(s.i=u.D.concat(s.i)),u=aa(s,d,1e3),d.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Di(s.h,d),Bt(d,g,u)}function qr(s,u){s.H&&ge(s.H,function(d,g){Ie(u,g,d)}),s.l&&rn({},function(d,g){Ie(u,g,d)})}function aa(s,u,d){d=Math.min(s.i.length,d);var g=s.l?E(s.l.Na,s.l,s):null;e:{var R=s.i;let N=-1;for(;;){let B=["count="+d];N==-1?0<d?(N=R[0].g,B.push("ofs="+N)):N=0:B.push("ofs="+N);let Ee=!0;for(let Ke=0;Ke<d;Ke++){let te=R[Ke].g,Qe=R[Ke].map;if(te-=N,0>te)N=Math.max(0,R[Ke].g-100),Ee=!1;else try{Gs(Qe,B,"req"+te+"_")}catch{g&&g(Qe)}}if(Ee){g=B.join("&");break e}}}return s=s.i.splice(0,d),u.D=s,g}function Ui(s){if(!s.g&&!s.u){s.Y=1;var u=s.Fa;er||bs(),L||(er(),L=!0),Pr.add(u,s),s.v=0}}function $i(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=xr(E(s.Fa,s),Zs(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=xr(E(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Fi(this),on(this))};function Bi(s){s.A!=null&&(h.clearTimeout(s.A),s.A=null)}function on(s){s.g=new xe(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var u=je(s.qa);Ie(u,"RID","rpc"),Ie(u,"SID",s.K),Ie(u,"AID",s.T),Ie(u,"CI",s.F?"0":"1"),!s.F&&s.ja&&Ie(u,"TO",s.ja),Ie(u,"TYPE","xmlhttp"),qr(s,u),s.m&&s.o&&Ur(u,s.m,s.o),s.L&&(s.g.I=s.L);var d=s.g;s=s.ia,d.L=1,d.v=Mr(je(u)),d.m=null,d.P=!0,Cn(d,s)}n.Za=function(){this.C!=null&&(this.C=null,Fi(this),$i(this),ot(19))};function ur(s){s.C!=null&&(h.clearTimeout(s.C),s.C=null)}function ca(s,u){var d=null;if(s.g==u){ur(s),Bi(s),s.g=null;var g=2}else if(ki(s.h,u))d=u.D,js(s.h,u),g=1;else return;if(s.G!=0){if(u.o)if(g==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var R=s.B;g=$t(),Oe(g,new Jo(g,d)),Br(s)}else Ui(s);else if(R=u.s,R==3||R==0&&0<u.X||!(g==1&&oa(s,u)||g==2&&$i(s)))switch(d&&0<d.length&&(u=s.h,u.i=u.i.concat(d)),R){case 1:Ln(s,5);break;case 4:Ln(s,10);break;case 3:Ln(s,6);break;default:Ln(s,2)}}}function Zs(s,u){let d=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(d*=2),d*u}function Ln(s,u){if(s.j.info("Error code "+u),u==2){var d=E(s.fb,s),g=s.Xa;let R=!g;g=new qt(g||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||St(g,"https"),Mr(g),R?Zc(g.toString(),d):na(g.toString(),d)}else ot(2);s.G=0,s.l&&s.l.sa(u),ua(s),sa(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function ua(s){if(s.G=0,s.ka=[],s.l){let u=qs(s.h);(u.length!=0||s.i.length!=0)&&(U(s.ka,u),U(s.ka,s.i),s.h.i.length=0,q(s.i),s.i.length=0),s.l.ra()}}function la(s,u,d){var g=d instanceof qt?je(d):new qt(d);if(g.g!="")u&&(g.g=u+"."+g.g),Rn(g,g.s);else{var R=h.location;g=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var N=new qt(null);g&&St(N,g),u&&(N.g=u),R&&Rn(N,R),d&&(N.l=d),g=N}return d=s.D,u=s.ya,d&&u&&Ie(g,d,u),Ie(g,"VER",s.la),qr(s,g),g}function ha(s,u,d){if(u&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=s.Ca&&!s.pa?new Re(new Fr({eb:d})):new Re(s.pa),u.Ha(s.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eo(){}n=eo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zr(){}zr.prototype.g=function(s,u){return new dt(s,u)};function dt(s,u){Ne.call(this),this.g=new Li(u),this.l=s,this.h=u&&u.messageUrlParams||null,s=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(s?s["X-WebChannel-Content-Type"]=u.messageContentType:s={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(s?s["X-WebChannel-Client-Profile"]=u.va:s={"X-WebChannel-Client-Profile":u.va}),this.g.S=s,(s=u&&u.Sb)&&!Z(s)&&(this.g.m=s),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Z(u)&&(this.g.D=u,s=this.h,s!==null&&u in s&&(s=this.h,u in s&&delete s[u])),this.j=new lr(this)}$(dt,Ne),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){Mi(this.g)},dt.prototype.o=function(s){var u=this.g;if(typeof s=="string"){var d={};d.__data__=s,s=d}else this.u&&(d={},d.__data__=Ds(s),s=d);u.i.push(new Zo(u.Ya++,s)),u.G==3&&Br(u)},dt.prototype.N=function(){this.g.l=null,delete this.j,Mi(this.g),delete this.g,dt.aa.N.call(this)};function Mn(s){Os.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var u=s.__sm__;if(u){e:{for(let d in u){s=d;break e}s=void 0}(this.i=s)&&(s=this.i,u=u!==null&&s in u?u[s]:void 0),this.data=u}else this.data=s}$(Mn,Os);function an(){xs.call(this),this.status=1}$(an,xs);function lr(s){this.g=s}$(lr,eo),lr.prototype.ua=function(){Oe(this.g,"a")},lr.prototype.ta=function(s){Oe(this.g,new Mn(s))},lr.prototype.sa=function(s){Oe(this.g,new an)},lr.prototype.ra=function(){Oe(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,ml=Kn.createWebChannelTransport=function(){return new zr},pl=Kn.getStatEventTarget=function(){return $t()},fl=Kn.Event=bn,Xa=Kn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,vo=Kn.ErrorCode=Pi,Sn.COMPLETE="complete",dl=Kn.EventType=Sn,Ns.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,Ji=Kn.WebChannel=Ns,kE=Kn.FetchXmlHttpFactory=Fr,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,hl=Kn.XhrIo=Re}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});var lm="@firebase/firestore",hm="4.8.0";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var ws="11.10.0";var fi=new dn("@firebase/firestore");function Zi(){return fi.logLevel}function W(n,...e){if(fi.logLevel<=de.DEBUG){let t=e.map(od);fi.debug(`Firestore (${ws}): ${n}`,...t)}}function Qn(n,...e){if(fi.logLevel<=de.ERROR){let t=e.map(od);fi.error(`Firestore (${ws}): ${n}`,...t)}}function Tr(n,...e){if(fi.logLevel<=de.WARN){let t=e.map(od);fi.warn(`Firestore (${ws}): ${n}`,...t)}}function od(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Jm(n,r,t)}function Jm(n,e,t){let r=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qn(r),new Error(r)}function ve(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Jm(e,i,r)}function ie(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ic=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},Il=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},El=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i,i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve(),o=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pn,e.enqueueRetryable(()=>i(this.currentUser))};let c=()=>{let f=o;e.enqueueRetryable(()=>D(this,null,function*(){yield f.promise,yield i(this.currentUser)}))},h=f=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){let f=this.t.getImmediate({optional:!0});f?h(f):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pn)}},0),c()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new ic(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},Tl=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},bl=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Tl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Al=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let c=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DE(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Zm(){return new TextEncoder}var So=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function le(n,e){return n<e?-1:n>e?1:0}function Sl(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return le(r,i);{let o=Zm(),c=NE(o.encode(dm(n,t)),o.encode(dm(e,t)));return c!==0?c:le(r,i)}}t+=r>65535?2:1}return le(n.length,e.length)}function dm(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function NE(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return le(n[t],e[t]);return le(n.length,e.length)}function os(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var fm="__name__",oc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Y(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Sl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gn.fromString(e.substring(4,e.length-2))}},Be=class n extends oc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},OE=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tt=class n extends oc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return OE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fm}static keyField(){return new n([fm])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new K(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},c=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new K(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new K(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new K(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};function xE(n,e,t){if(!t)throw new K(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VE(n,e,t,r){if(e===!0&&r===!0)throw new K(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pm(n){if(!X.isDocumentKey(n))throw new K(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eg(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y(12329,{type:typeof n})}function pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ad(n);throw new K(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function We(n,e){let t={typeString:n};return e&&(t.value=e),t}function Mo(n,e){if(!eg(n))throw new K(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new K(M.INVALID_ARGUMENT,t);return!0}var mm=-62135596800,gm=1e6,He=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gm);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mm)throw new K(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gm}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mo(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-mm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:We("string",He._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};var se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new He(0,0))}static max(){return new n(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Co=-1,Cl=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Cl.UNKNOWN_ID=-1;function LE(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new He(t+1,0):new He(t,r));return new mi(i,X.empty(),e)}function ME(n){return new mi(n.readTime,n.key,Co)}var mi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),X.empty(),Co)}static max(){return new n(se.max(),X.empty(),Co)}};function FE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var UE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Is(n){return D(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==UE)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},f=>r(f))}),c=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,c=new Array(o),h=0;for(let f=0;f<o;f++){let m=f;t(e[m]).next(y=>{c[m]=y,++h,h===o&&r(c)},y=>i(y))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function $E(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Es(n){return n.name==="IndexedDbTransactionError"}var cd=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),ud=-1;function Lc(n){return n==null}function Po(n){return n===0&&1/n==-1/0}function BE(n){return typeof n=="number"&&Number.isInteger(n)&&!Po(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var tg="";function jE(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_m(e)),e=qE(n.get(t),e);return _m(e)}function qE(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case tg:t+="";break;default:t+=o}}return t}function _m(n){return n+tg+""}var zE="remoteDocuments",ng="owner";var rg="mutationQueues";var ig="mutations";var sg="documentMutations",WE="remoteDocumentsV14";var og="remoteDocumentGlobal";var ag="targets";var cg="targetDocuments";var ug="targetGlobal",lg="collectionParents";var hg="clientMetadata";var dg="bundles";var fg="namedQueries";var HE="indexConfiguration";var GE="indexState";var KE="indexEntries";var pg="documentOverlays";var QE="globals";var YE=[rg,ig,sg,zE,ag,ng,ug,cg,hg,og,lg,dg,fg],xS=[...YE,pg],XE=[rg,ig,sg,WE,ag,ng,ug,cg,hg,og,lg,dg,fg,pg],JE=XE,ZE=[...JE,HE,GE,KE];var VS=[...ZE,QE];function ym(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mg(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Le=class n{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rs(this.root,e,this.comparator,!0)}},rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class n{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ac(this.data.getIterator())}getIteratorFrom(e){return new ac(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ac=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class n{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new n([])}unionWith(e){let t=new it(Tt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return os(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var cc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var eT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(n){if(ve(!!n,39018),typeof n=="string"){let e=0,t=eT.exec(n);if(ve(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xn(n){return typeof n=="string"?ut.fromBase64String(n):ut.fromUint8Array(n)}var gg="server_timestamp",_g="__type__",yg="__previous_value__",vg="__local_write_time__";function ld(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_g])===null||t===void 0?void 0:t.stringValue)===gg}function Mc(n){let e=n.mapValue.fields[yg];return ld(e)?Mc(e):e}function Ro(n){let e=Yn(n.mapValue.fields[vg].timestampValue);return new He(e.seconds,e.nanos)}var Rl=class{constructor(e,t,r,i,o,c,h,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}},uc="(default)",lc=class n{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var hd="__type__",wg="__max__",Ja={mapValue:{fields:{__type__:{stringValue:wg}}}},dd="__vector__",as="value";function br(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ld(n)?4:Eg(n)?9007199254740991:Ig(n)?10:11:Y(28295,{value:n})}function yn(n,e){if(n===e)return!0;let t=br(n);if(t!==br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ro(n).isEqual(Ro(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let c=Yn(i.timestampValue),h=Yn(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Xn(i.bytesValue).isEqual(Xn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let c=ke(i.doubleValue),h=ke(o.doubleValue);return c===h?Po(c)===Po(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return os(n.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(i,o){let c=i.mapValue.fields||{},h=o.mapValue.fields||{};if(ym(c)!==ym(h))return!1;for(let f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!yn(c[f],h[f])))return!1;return!0}(n,e);default:return Y(52216,{left:n})}}function ko(n,e){return(n.values||[]).find(t=>yn(t,e))!==void 0}function cs(n,e){if(n===e)return 0;let t=br(n),r=br(e);if(t!==r)return le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(o,c){let h=ke(o.integerValue||o.doubleValue),f=ke(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return vm(n.timestampValue,e.timestampValue);case 4:return vm(Ro(n),Ro(e));case 5:return Sl(n.stringValue,e.stringValue);case 6:return function(o,c){let h=Xn(o),f=Xn(c);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){let h=o.split("/"),f=c.split("/");for(let m=0;m<h.length&&m<f.length;m++){let y=le(h[m],f[m]);if(y!==0)return y}return le(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){let h=le(ke(o.latitude),ke(c.latitude));return h!==0?h:le(ke(o.longitude),ke(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wm(n.arrayValue,e.arrayValue);case 10:return function(o,c){var h,f,m,y;let b=o.fields||{},E=c.fields||{},x=(h=b[as])===null||h===void 0?void 0:h.arrayValue,$=(f=E[as])===null||f===void 0?void 0:f.arrayValue,q=le(((m=x?.values)===null||m===void 0?void 0:m.length)||0,((y=$?.values)===null||y===void 0?void 0:y.length)||0);return q!==0?q:wm(x,$)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Ja.mapValue&&c===Ja.mapValue)return 0;if(o===Ja.mapValue)return 1;if(c===Ja.mapValue)return-1;let h=o.fields||{},f=Object.keys(h),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let b=0;b<f.length&&b<y.length;++b){let E=Sl(f[b],y[b]);if(E!==0)return E;let x=cs(h[f[b]],m[y[b]]);if(x!==0)return x}return le(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Y(23264,{le:t})}}function vm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Yn(n),r=Yn(e),i=le(t.seconds,r.seconds);return i!==0?i:le(t.nanos,r.nanos)}function wm(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=cs(t[i],r[i]);if(o)return o}return le(t.length,r.length)}function us(n){return kl(n)}function kl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Yn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=kl(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let c of r)o?o=!1:i+=",",i+=`${c}:${kl(t.fields[c])}`;return i+"}"}(n.mapValue):Y(61005,{value:n})}function tc(n){switch(br(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Mc(n);return e?16+tc(e):16;case 5:return 2*n.stringValue.length;case 6:return Xn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+tc(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Cr(r.fields,(o,c)=>{i+=o.length+tc(c)}),i}(n.mapValue);default:throw Y(13486,{value:n})}}function Dl(n){return!!n&&"integerValue"in n}function fd(n){return!!n&&"arrayValue"in n}function Im(n){return!!n&&"nullValue"in n}function Em(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nc(n){return!!n&&"mapValue"in n}function Ig(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hd])===null||t===void 0?void 0:t.stringValue)===dd}function Io(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Cr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Io(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Io(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Eg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wg}var MS={mapValue:{fields:{[hd]:{stringValue:dd},[as]:{arrayValue:{}}}}};var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(t)}setAll(e){let t=Tt.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){let f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Io(c):i.push(h.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());nc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Io(this.value))}};function Tg(n){let e=[];return Cr(n.fields,(t,r)=>{let i=new Tt([t]);if(nc(r)){let o=Tg(r.mapValue).fields;if(o.length===0)e.push(i);else for(let c of o)e.push(i.child(c))}else e.push(i)}),new Ft(e)}var Yt=class n{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ls=class{constructor(e,t){this.position=e,this.inclusive=t}};function Tm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],c=n.position[i];if(o.field.isKeyField()?r=X.comparator(X.fromName(c.referenceValue),t.key):r=cs(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bm(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yn(n.position[t],e.position[t]))return!1;return!0}var hs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function tT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var hc=class{},Je=class n extends hc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ol(e,t,r):t==="array-contains"?new Ll(e,r):t==="in"?new Ml(e,r):t==="not-in"?new Fl(e,r):t==="array-contains-any"?new Ul(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xl(e,r):new Vl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cs(t,this.value)):t!==null&&br(this.value)===br(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vn=class n extends hc{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return bg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function bg(n){return n.op==="and"}function Ag(n){return nT(n)&&bg(n)}function nT(n){for(let e of n.filters)if(e instanceof vn)return!1;return!0}function Nl(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+us(n.value);if(Ag(n))return n.filters.map(e=>Nl(e)).join(",");{let e=n.filters.map(t=>Nl(t)).join(",");return`${n.op}(${e})`}}function Sg(n,e){return n instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)}(n,e):n instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,h)=>o&&Sg(c,i.filters[h]),!0):!1}(n,e):void Y(19439)}function Cg(n){return n instanceof Je?function(t){return`${t.field.canonicalString()} ${t.op} ${us(t.value)}`}(n):n instanceof vn?function(t){return t.op.toString()+" {"+t.getFilters().map(Cg).join(" ,")+"}"}(n):"Filter"}var Ol=class extends Je{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},xl=class extends Je{constructor(e,t){super(e,"in",t),this.keys=Pg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Vl=class extends Je{constructor(e,t){super(e,"not-in",t),this.keys=Pg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Pg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var Ll=class extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return fd(t)&&ko(t.arrayValue,this.value)}},Ml=class extends Je{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ko(this.value.arrayValue,t)}},Fl=class extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ko(this.value.arrayValue,t)}},Ul=class extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ko(this.value.arrayValue,r))}};var $l=class{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.Pe=null}};function Am(n,e=null,t=[],r=[],i=null,o=null,c=null){return new $l(n,e,t,r,i,o,c)}function pd(n){let e=ie(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Nl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>us(r)).join(",")),e.Pe=t}return e.Pe}function md(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Sg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bm(n.startAt,e.startAt)&&bm(n.endAt,e.endAt)}function Bl(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ds=class{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function rT(n,e,t,r,i,o,c,h){return new ds(n,e,t,r,i,o,c,h)}function gd(n){return new ds(n)}function Sm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iT(n){return n.collectionGroup!==null}function Eo(n){let e=ie(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new it(Tt.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new hs(o,r))}),t.has(Tt.keyField().canonicalString())||e.Te.push(new hs(Tt.keyField(),r))}return e.Te}function gn(n){let e=ie(n);return e.Ie||(e.Ie=sT(e,Eo(n))),e.Ie}function sT(n,e){if(n.limitType==="F")return Am(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new hs(i.field,o)});let t=n.endAt?new ls(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ls(n.startAt.position,n.startAt.inclusive):null;return Am(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jl(n,e,t){return new ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return md(gn(n),gn(e))&&n.limitType===e.limitType}function Rg(n){return`${pd(gn(n))}|lt:${n.limitType}`}function es(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Cg(i)).join(", ")}]`),Lc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>us(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>us(i)).join(",")),`Target(${r})`}(gn(n))}; limitType=${n.limitType})`}function Uc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Eo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,h,f){let m=Tm(c,h,f);return c.inclusive?m<=0:m<0}(r.startAt,Eo(r),i)||r.endAt&&!function(c,h,f){let m=Tm(c,h,f);return c.inclusive?m>=0:m>0}(r.endAt,Eo(r),i))}(n,e)}function oT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kg(n){return(e,t)=>{let r=!1;for(let i of Eo(n)){let o=aT(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aT(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):function(o,c,h){let f=c.data.field(o),m=h.data.field(o);return f!==null&&m!==null?cs(f,m):Y(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:n.dir})}}var Jn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return mg(this.inner)}size(){return this.innerSize}};var cT=new Le(X.comparator);function Zn(){return cT}var Dg=new Le(X.comparator);function wo(...n){let e=Dg;for(let t of n)e=e.insert(t.key,t);return e}function Ng(n){let e=Dg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ui(){return To()}function Og(){return To()}function To(){return new Jn(n=>n.toString(),(n,e)=>n.isEqual(e))}var uT=new Le(X.comparator),lT=new it(X.comparator);function fe(...n){let e=lT;for(let t of n)e=e.add(t);return e}var hT=new it(le);function dT(){return hT}function _d(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Po(e)?"-0":e}}function xg(n){return{integerValue:""+n}}function Vg(n,e){return BE(e)?xg(e):_d(n,e)}var fs=class{constructor(){this._=void 0}};function fT(n,e,t){return n instanceof ps?function(i,o){let c={fields:{[_g]:{stringValue:gg},[vg]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ld(o)&&(o=Mc(o)),o&&(c.fields[yg]=o),{mapValue:c}}(t,e):n instanceof gi?Mg(n,e):n instanceof _i?Fg(n,e):function(i,o){let c=Lg(i,o),h=Cm(c)+Cm(i.Ee);return Dl(c)&&Dl(i.Ee)?xg(h):_d(i.serializer,h)}(n,e)}function pT(n,e,t){return n instanceof gi?Mg(n,e):n instanceof _i?Fg(n,e):t}function Lg(n,e){return n instanceof yi?function(r){return Dl(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ps=class extends fs{},gi=class extends fs{constructor(e){super(),this.elements=e}};function Mg(n,e){let t=Ug(e);for(let r of n.elements)t.some(i=>yn(i,r))||t.push(r);return{arrayValue:{values:t}}}var _i=class extends fs{constructor(e){super(),this.elements=e}};function Fg(n,e){let t=Ug(e);for(let r of n.elements)t=t.filter(i=>!yn(i,r));return{arrayValue:{values:t}}}var yi=class extends fs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Cm(n){return ke(n.integerValue||n.doubleValue)}function Ug(n){return fd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ql=class{constructor(e,t){this.field=e,this.transform=t}};function mT(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gi&&i instanceof gi||r instanceof _i&&i instanceof _i?os(r.elements,i.elements,yn):r instanceof yi&&i instanceof yi?yn(r.Ee,i.Ee):r instanceof ps&&i instanceof ps}(n.transform,e.transform)}var zl=class{constructor(e,t){this.version=e,this.transformResults=t}},vr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ms=class{};function $g(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dc(n.key,vr.none()):new vi(n.key,n.data,vr.none());{let t=n.data,r=Et.empty(),i=new it(Tt.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new wn(n.key,r,new Ft(i.toArray()),vr.none())}}function gT(n,e,t){n instanceof vi?function(i,o,c){let h=i.value.clone(),f=Rm(i.fieldTransforms,o,c.transformResults);h.setAll(f),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof wn?function(i,o,c){if(!rc(i.precondition,o))return void o.convertToUnknownDocument(c.version);let h=Rm(i.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(Bg(i)),f.setAll(h),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function bo(n,e,t,r){return n instanceof vi?function(o,c,h,f){if(!rc(o.precondition,c))return h;let m=o.value.clone(),y=km(o.fieldTransforms,f,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof wn?function(o,c,h,f){if(!rc(o.precondition,c))return h;let m=km(o.fieldTransforms,f,c),y=c.data;return y.setAll(Bg(o)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(o,c,h){return rc(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function _T(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Lg(r.transform,i||null);o!=null&&(t===null&&(t=Et.empty()),t.set(r.field,o))}return t||null}function Pm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&os(r,i,(o,c)=>mT(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vi=class extends ms{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wn=class extends ms{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Bg(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Rm(n,e,t){let r=new Map;ve(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,pT(c,h,t[i]))}return r}function km(n,e,t){let r=new Map;for(let i of n){let o=i.transform,c=t.data.field(i.field);r.set(i.field,fT(o,c,e))}return r}var dc=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wl=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gT(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Og();return this.mutations.forEach(i=>{let o=e.get(i.key),c=o.overlayedDocument,h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;let f=$g(c,h);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&os(this.mutations,e.mutations,(t,r)=>Pm(t,r))&&os(this.baseMutations,e.baseMutations,(t,r)=>Pm(t,r))}},Gl=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ve(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return uT}(),o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new n(e,t,r,i)}};var Kl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ql=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qe,me;function yT(n){switch(n){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:n})}}function jg(n){if(n===void 0)return Qn("GRPC error has no .code"),M.UNKNOWN;switch(n){case qe.OK:return M.OK;case qe.CANCELLED:return M.CANCELLED;case qe.UNKNOWN:return M.UNKNOWN;case qe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case qe.INTERNAL:return M.INTERNAL;case qe.UNAVAILABLE:return M.UNAVAILABLE;case qe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case qe.NOT_FOUND:return M.NOT_FOUND;case qe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case qe.ABORTED:return M.ABORTED;case qe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case qe.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:n})}}(me=qe||(qe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var Dm=null;var vT=new Gn([4294967295,4294967295],0);function Nm(n){let e=Zm().encode(n),t=new ll;return t.update(e),new Uint8Array(t.digest())}function Om(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gn([t,r],0),new Gn([i,o],0)]}var Yl=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new li(`Invalid padding: ${t}`);if(r<0)throw new li(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new li(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new li(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gn.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Gn.fromNumber(r)));return i.compare(vT)===1&&(i=new Gn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Nm(e),[r,i]=Om(t);for(let o=0;o<this.hashCount;o++){let c=this.pe(r,i,o);if(!this.ye(c))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new n(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.fe===0)return;let t=Nm(e),[r,i]=Om(t);for(let o=0;o<this.hashCount;o++){let c=this.pe(r,i,o);this.we(c)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},li=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Do.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Le(le),Zn(),fe())}},Do=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var is=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},pc=class{constructor(e,t){this.targetId=e,this.De=t}},mc=class{constructor(e,t,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},gc=class{constructor(){this.ve=0,this.Ce=xm(),this.Fe=ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),t=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Do(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=xm()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Xl=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Zn(),this.je=Za(),this.Je=Za(),this.He=new Le(le)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Bl(o))if(r===0){let c=new X(o.path);this.Xe(t,c,Yt.newNoDocument(c,se.min()))}else ve(r===1,20013,{expectedCount:r});else{let c=this.ot(t);if(c!==r){let h=this._t(e),f=h?this.ut(h,e,c):1;if(f!==0){this.rt(t);let m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}Dm?.ct(function(y,b,E,x,$){var q,U,ce,Z,oe,we;let st={localCacheCount:y,existenceFilterCount:b.count,databaseId:E.database,projectId:E.projectId},ge=b.unchangedNames;return ge&&(st.bloomFilter={applied:$===0,hashCount:(q=ge?.hashCount)!==null&&q!==void 0?q:0,bitmapLength:(Z=(ce=(U=ge?.bits)===null||U===void 0?void 0:U.bitmap)===null||ce===void 0?void 0:ce.length)!==null&&Z!==void 0?Z:0,padding:(we=(oe=ge?.bits)===null||oe===void 0?void 0:oe.padding)!==null&&we!==void 0?we:0,mightContain:S=>{var v;return(v=x?.mightContain(S))!==null&&v!==void 0&&v}}),st}(c,e.De,this.We.lt(),h,f))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,c,h;try{c=Xn(r).toUint8Array()}catch(f){if(f instanceof cc)return Tr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Yl(c,i,o)}catch(f){return Tr(f instanceof li?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,c)=>{let h=this.st(c);if(h){if(o.current&&Bl(h.target)){let f=new X(h.target.path);this.Tt(f).has(c)||this.It(c,f)||this.Xe(c,f,Yt.newNoDocument(f,e))}o.Ne&&(t.set(c,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,c)=>{let h=!0;c.forEachWhile(f=>{let m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));let i=new fc(e,t,this.He,this.ze,r);return this.ze=Zn(),this.je=Za(),this.Je=Za(),this.He=new Le(le),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new gc,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new it(le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new it(le),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new gc),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Za(){return new Le(X.comparator)}function xm(){return new Le(X.comparator)}var wT={asc:"ASCENDING",desc:"DESCENDING"},IT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ET={and:"AND",or:"OR"},Jl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Zl(n,e){return n.useProto3Json||Lc(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TT(n,e){return _c(n,e.toTimestamp())}function _n(n){return ve(!!n,49232),se.fromTimestamp(function(t){let r=Yn(t);return new He(r.seconds,r.nanos)}(n))}function yd(n,e){return eh(n,e).canonicalString()}function eh(n,e){let t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zg(n){let e=Be.fromString(n);return ve(Qg(e),10190,{key:e.toString()}),e}function th(n,e){return yd(n.databaseId,e.path)}function gl(n,e){let t=zg(e);if(t.get(1)!==n.databaseId.projectId)throw new K(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(Hg(t))}function Wg(n,e){return yd(n.databaseId,e)}function bT(n){let e=zg(n);return e.length===4?Be.emptyPath():Hg(e)}function nh(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hg(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Vm(n,e,t){return{name:th(n,e),fields:t.value.mapValue.fields}}function AT(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Y(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(ve(y===void 0||typeof y=="string",58123),ut.fromBase64String(y||"")):(ve(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ut.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(m){let y=m.code===void 0?M.UNKNOWN:jg(m.code);return new K(y,m.message||"")}(c);t=new mc(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gl(n,r.document.name),o=_n(r.document.updateTime),c=r.document.createTime?_n(r.document.createTime):se.min(),h=new Et({mapValue:{fields:r.document.fields}}),f=Yt.newFoundDocument(i,o,c,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new is(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gl(n,r.document),o=r.readTime?_n(r.readTime):se.min(),c=Yt.newNoDocument(i,o),h=r.removedTargetIds||[];t=new is([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gl(n,r.document),o=r.removedTargetIds||[];t=new is([],o,i,null)}else{if(!("filter"in e))return Y(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,c=new Ql(i,o),h=r.targetId;t=new pc(h,c)}}return t}function ST(n,e){let t;if(e instanceof vi)t={update:Vm(n,e.key,e.value)};else if(e instanceof dc)t={delete:th(n,e.key)};else if(e instanceof wn)t={update:Vm(n,e.key,e.data),updateMask:VT(e.fieldMask)};else{if(!(e instanceof Wl))return Y(16599,{Rt:e.type});t={verify:th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){let h=c.transform;if(h instanceof ps)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof gi)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _i)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yi)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Y(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:TT(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)}(n,e.precondition)),t}function CT(n,e){return n&&n.length>0?(ve(e!==void 0,14353),n.map(t=>function(i,o){let c=i.updateTime?_n(i.updateTime):_n(o);return c.isEqual(se.min())&&(c=_n(o)),new zl(c,i.transformResults||[])}(t,e))):[]}function PT(n,e){return{documents:[Wg(n,e.path)]}}function RT(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Wg(n,i);let o=function(m){if(m.length!==0)return Kg(vn.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let c=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:ts(E.field),direction:NT(E.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);let h=Zl(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:i}}function kT(n){let e=bT(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ve(r===1,65062);let y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(b){let E=Gg(b);return E instanceof vn&&Ag(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(b){return b.map(E=>function($){return new hs(ns($.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(b){let E;return E=typeof b=="object"?b.value:b,Lc(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(b){let E=!!b.before,x=b.values||[];return new ls(x,E)}(t.startAt));let m=null;return t.endAt&&(m=function(b){let E=!b.before,x=b.values||[];return new ls(x,E)}(t.endAt)),rT(e,i,c,o,h,"F",f,m)}function DT(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ns(t.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ns(t.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ns(t.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let c=ns(t.unaryFilter.field);return Je.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(n):n.fieldFilter!==void 0?function(t){return Je.create(ns(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vn.create(t.compositeFilter.filters.map(r=>Gg(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(t.compositeFilter.op))}(n):Y(30097,{filter:n})}function NT(n){return wT[n]}function OT(n){return IT[n]}function xT(n){return ET[n]}function ts(n){return{fieldPath:n.canonicalString()}}function ns(n){return Tt.fromServerFormat(n.fieldPath)}function Kg(n){return n instanceof Je?function(t){if(t.op==="=="){if(Em(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NAN"}};if(Im(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Em(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NAN"}};if(Im(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(t.field),op:OT(t.op),value:t.value}}}(n):n instanceof vn?function(t){let r=t.getFilters().map(i=>Kg(i));return r.length===1?r[0]:{compositeFilter:{op:xT(t.op),filters:r}}}(n):Y(54877,{filter:n})}function VT(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var No=class n{constructor(e,t,r,i,o=se.min(),c=se.min(),h=ut.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var rh=class{constructor(e){this.gt=e}};function LT(n){let e=kT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jl(e,e.limit,"L"):e}var yc=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Po(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Yn(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Xn(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Eg(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Ig(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Y(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let c=as,h=((i=(r=o[c].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ke(h)),this.xt(c,t),this.Dt(o[c],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),X.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};yc.Ut=new yc;var ih=class{constructor(){this.Dn=new sh}addToCollectionParentIndex(e,t){return this.Dn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(mi.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},sh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new it(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Be.comparator)).toArray()}};var FS=new Uint8Array(0);var Lm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yg=41943040,Mt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(Yg,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);var Oo=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Mm="LruGarbageCollector",MT=1048576;function Fm([n,e],[t,r]){let i=le(n,t);return i===0?le(e,r):i}var oh=class{constructor(e){this.Tr=e,this.buffer=new it(Fm),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Fm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},ah=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){W(Mm,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Es(t)?W(Mm,"Ignoring IndexedDB error during garbage collection: ",t):yield Is(t)}yield this.Rr(3e5)}))}},ch=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(cd.ue);let r=new oh(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Lm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lm):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,c,h,f,m,y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,c=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(r=b,h=Date.now(),this.removeTargets(e,r,t))).next(b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(m=Date.now(),Zi()<=de.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b})))}};function FT(n,e){return new ch(n,e)}var uh=class{constructor(){this.changes=new Jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var lh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var hh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bo(r.mutation,i,Ft.empty(),He.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=ui();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=wo();return o.forEach((h,f)=>{c=c.insert(h,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){let r=ui();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Zn(),c=To(),h=function(){return To()}();return t.forEach((f,m)=>{let y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof wn)?o=o.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),bo(y.mutation,m,y.mutation.getFieldMask(),He.now())):c.set(m.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,y)=>c.set(m,y)),t.forEach((m,y)=>{var b;return h.set(m,new lh(y,(b=c.get(m))!==null&&b!==void 0?b:null))}),h))}recalculateAndSaveOverlays(e,t){let r=To(),i=new Le((c,h)=>c-h),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(let h of c)h.keys().forEach(f=>{let m=t.get(f);if(m===null)return;let y=r.get(f)||Ft.empty();y=h.applyToLocalView(m,y),r.set(f,y);let b=(i.get(h.batchId)||fe()).add(f);i=i.insert(h.batchId,b)})}).next(()=>{let c=[],h=i.getReverseIterator();for(;h.hasNext();){let f=h.getNext(),m=f.key,y=f.value,b=Og();y.forEach(E=>{if(!o.has(E)){let x=$g(t.get(E),r.get(E));x!==null&&b.set(E,x),o=o.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,b))}return F.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return X.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(ui()),h=Co,f=o;return c.next(m=>F.forEach(m,(y,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(y)?F.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,fe())).next(y=>({batchId:h,changes:Ng(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=wo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,c=wo();return this.indexManager.getCollectionParents(e,o).next(h=>F.forEach(h,f=>{let m=function(b,E){return new ds(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(y=>{y.forEach((b,E)=>{c=c.insert(b,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((f,m)=>{let y=m.getKey();c.get(y)===null&&(c=c.insert(y,Yt.newInvalidDocument(y)))});let h=wo();return c.forEach((f,m)=>{let y=o.get(f);y!==void 0&&bo(y.mutation,m,Ft.empty(),He.now()),Uc(t,m)&&(h=h.insert(f,m))}),h})}};var dh=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return F.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:LT(i.bundledQuery),readTime:_n(i.readTime)}}(t)),F.resolve()}};var fh=class{constructor(){this.overlays=new Le(X.comparator),this.kr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ui();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=ui(),o=t.length+1,c=new X(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){let f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((m,y)=>m-y),c=this.overlays.getIterator();for(;c.hasNext();){let m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=o.get(m.largestBatchId);y===null&&(y=ui(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}let h=ui(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=i)););return F.resolve(h)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Kl(t,r));let o=this.kr.get(t);o===void 0&&(o=fe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var ph=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var xo=class{constructor(){this.qr=new it(ze.Qr),this.$r=new it(ze.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ze(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ze(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new X(new Be([])),r=new ze(t,e),i=new ze(t,e+1),o=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new X(new Be([])),r=new ze(t,e),i=new ze(t,e+1),o=fe();return this.$r.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){let t=new ze(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ze=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return X.comparator(e.key,t.key)||le(e.Hr,t.Hr)}static Ur(e,t){return le(e.Hr,t.Hr)||X.comparator(e.key,t.key)}};var mh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new it(ze.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let c=new Hl(o,t,r,i);this.mutationQueue.push(c);for(let h of i)this.Yr=this.Yr.add(new ze(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?ud:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ze(t,0),i=new ze(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],c=>{let h=this.Zr(c.Hr);o.push(h)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(le);return t.forEach(i=>{let o=new ze(i,0),c=new ze(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],h=>{r=r.add(h.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;X.isDocumentKey(o)||(o=o.child(""));let c=new ze(new X(o),0),h=new it(le);return this.Yr.forEachWhile(f=>{let m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Hr)),!0)},c),F.resolve(this.ei(h))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ve(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(t.mutations,i=>{let o=new ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ze(t,0),i=this.Yr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var gh=class{constructor(e){this.ni=e,this.docs=function(){return new Le(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let r=Zn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Zn(),c=t.path,h=new X(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){let{key:m,value:{document:y}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||FE(ME(y),r)<=0||(i.has(y.key)||Uc(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y(9500)}ri(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _h(this)}getSize(e){return F.resolve(this.size)}},_h=class extends uh{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var yh=class{constructor(e){this.persistence=e,this.ii=new Jn(t=>pd(t),md),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.si=0,this.oi=new xo,this.targetCount=0,this._i=Oo.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),F.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.hr(t),F.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.oi.containsKey(t))}};var vc=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new cd(0),this.ci=!1,this.ci=!0,this.li=new ph,this.referenceDelegate=e(this),this.hi=new yh(this),this.indexManager=new ih,this.remoteDocumentCache=function(i){return new gh(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new rh(t),this.Ti=new dh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new mh(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new vh(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},vh=class extends Pl{constructor(e){super(),this.currentSequenceNumber=e}},wh=class n{constructor(e){this.persistence=e,this.Ai=new xo,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Y(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{let i=X.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return F.or([()=>F.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},wc=class n{constructor(e,t){this.persistence=e,this.gi=new Jn(r=>jE(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=FT(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return F.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?F.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,t).next(h=>{h||(r++,o.removeEntry(c,se.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}Sr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ih=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Eh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Th=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return dp()?8:$E(It())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;let c=new Eh;return this.ws(e,t,c).next(h=>{if(o.result=h,this.Rs)return this.Ss(e,t,c,h.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Zi()<=de.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Zi()<=de.DEBUG&&W("QueryEngine","Query:",es(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Zi()<=de.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(t))):F.resolve())}ps(e,t){if(Sm(t))return F.resolve(null);let r=gn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jl(t,null,"F"),r=gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let c=fe(...o);return this.gs.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{let m=this.bs(t,h);return this.Ds(t,m,c,f.readTime)?this.ps(e,jl(t,null,"F")):this.vs(e,m,t,f)}))})))}ys(e,t,r,i){return Sm(t)||i.isEqual(se.min())?F.resolve(null):this.gs.getDocuments(e,r).next(o=>{let c=this.bs(t,o);return this.Ds(t,c,r,i)?F.resolve(null):(Zi()<=de.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(t)),this.vs(e,c,t,LE(i,Co)).next(h=>h))})}bs(e,t){let r=new it(kg(e));return t.forEach((i,o)=>{Uc(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Zi()<=de.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",es(t)),this.gs.getDocumentsMatchingQuery(e,t,mi.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}};var vd="LocalStore",UT=3e8,bh=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Le(le),this.Ms=new Jn(o=>pd(o),md),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hh(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function $T(n,e,t,r){return new bh(n,e,t,r)}function Xg(n,e){return D(this,null,function*(){let t=ie(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let c=[],h=[],f=fe();for(let m of i){c.push(m.batchId);for(let y of m.mutations)f=f.add(y.key)}for(let m of o){h.push(m.batchId);for(let y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:h}))})})})}function BT(n,e){let t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,m,y){let b=m.batch,E=b.keys(),x=F.resolve();return E.forEach($=>{x=x.next(()=>y.getEntry(f,$)).next(q=>{let U=m.docVersions.get($);ve(U!==null,48541),q.version.compareTo(U)<0&&(b.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),y.addEntry(q)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(f,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=fe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Jg(n){let e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function jT(n,e){let t=ie(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let c=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let h=[];e.targetChanges.forEach((y,b)=>{let E=i.get(b);if(!E)return;h.push(t.hi.removeMatchingKeys(o,y.removedDocuments,b).next(()=>t.hi.addMatchingKeys(o,y.addedDocuments,b)));let x=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?x=x.withResumeToken(ut.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,r)),i=i.insert(b,x),function(q,U,ce){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=UT?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0}(E,x,y)&&h.push(t.hi.updateTargetData(o,x))});let f=Zn(),m=fe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(qT(o,c,e.documentUpdates).next(y=>{f=y.Ls,m=y.ks})),!r.isEqual(se.min())){let y=t.hi.getLastRemoteSnapshotVersion(o).next(b=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return F.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.Fs=i,o))}function qT(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Zn();return t.forEach((h,f)=>{let m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(se.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):W(vd,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ls:c,ks:i}})}function zT(n,e){let t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ud),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WT(n,e){let t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.hi.allocateTargetId(r).next(c=>(i=new No(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Ah(n,e,t){return D(this,null,function*(){let r=ie(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Es(c))throw c;W(vd,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Um(n,e,t){let r=ie(n),i=se.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,y){let b=ie(f),E=b.Ms.get(y);return E!==void 0?F.resolve(b.Fs.get(E)):b.hi.getTargetData(m,y)}(r,c,gn(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,h.targetId).next(f=>{o=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?i:se.min(),t?o:fe())).next(h=>(HT(r,oT(e),h),{documents:h,qs:o})))}function HT(n,e,t){let r=n.xs.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Ic=class{constructor(){this.activeTargetIds=dT()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Sh=class{constructor(){this.Fo=new Ic,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ic,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ch=class{xo(e){}shutdown(){}};var $m="ConnectivityMonitor",Ec=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){W($m,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){W($m,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ec=null;function Ph(){return ec===null?ec=function(){return 268435456+Math.round(2147483648*Math.random())}():ec++,"0x"+ec.toString(16)}var _l="RestConnection",GT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Rh=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===uc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let c=Ph(),h=this.Go(e,t.toUriEncodedString());W(_l,`Sending RPC '${e}' ${c}:`,h,r);let f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,o);let{host:m}=new URL(h),y=Zr(m);return this.jo(e,h,f,r,y).then(b=>(W(_l,`Received RPC '${e}' ${c}: `,b),b),b=>{throw Tr(_l,`RPC '${e}' ${c} failed with error: `,b,"url: ",h,"request:",r),b})}Jo(e,t,r,i,o,c){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=GT[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var kh=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var at="WebChannelConnection",Dh=class extends Rh{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let c=Ph();return new Promise((h,f)=>{let m=new hl;m.setWithCredentials(!0),m.listenOnce(dl.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case vo.NO_ERROR:let b=m.getResponseJson();W(at,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),h(b);break;case vo.TIMEOUT:W(at,`RPC '${e}' ${c} timed out`),f(new K(M.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:let E=m.getStatus();if(W(at,`RPC '${e}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);let $=x?.error;if($&&$.status&&$.message){let q=function(ce){let Z=ce.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(Z)>=0?Z:M.UNKNOWN}($.status);f(new K(q,$.message))}else f(new K(M.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new K(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{W(at,`RPC '${e}' ${c} completed.`)}});let y=JSON.stringify(i);W(at,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",y,r,15)})}P_(e,t,r){let i=Ph(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ml(),h=pl(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;let y=o.join("");W(at,`Creating RPC '${e}' stream ${i}: ${y}`,f);let b=c.createWebChannel(y,f);this.T_(b);let E=!1,x=!1,$=new kh({Ho:U=>{x?W(at,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(E||(W(at,`Opening RPC '${e}' stream ${i} transport.`),b.open(),E=!0),W(at,`RPC '${e}' stream ${i} sending:`,U),b.send(U))},Yo:()=>b.close()}),q=(U,ce,Z)=>{U.listen(ce,oe=>{try{Z(oe)}catch(we){setTimeout(()=>{throw we},0)}})};return q(b,Ji.EventType.OPEN,()=>{x||(W(at,`RPC '${e}' stream ${i} transport opened.`),$.s_())}),q(b,Ji.EventType.CLOSE,()=>{x||(x=!0,W(at,`RPC '${e}' stream ${i} transport closed`),$.__(),this.I_(b))}),q(b,Ji.EventType.ERROR,U=>{x||(x=!0,Tr(at,`RPC '${e}' stream ${i} transport errored. Name:`,U.name,"Message:",U.message),$.__(new K(M.UNAVAILABLE,"The operation could not be completed")))}),q(b,Ji.EventType.MESSAGE,U=>{var ce;if(!x){let Z=U.data[0];ve(!!Z,16349);let oe=Z,we=oe?.error||((ce=oe[0])===null||ce===void 0?void 0:ce.error);if(we){W(at,`RPC '${e}' stream ${i} received error:`,we);let st=we.status,ge=function(I){let A=qe[I];if(A!==void 0)return jg(A)}(st),S=we.message;ge===void 0&&(ge=M.INTERNAL,S="Unknown error status: "+st+" with message "+we.message),x=!0,$.__(new K(ge,S)),b.close()}else W(at,`RPC '${e}' stream ${i} received:`,Z),$.a_(Z)}}),q(h,fl.STAT_EVENT,U=>{U.stat===Xa.PROXY?W(at,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===Xa.NOPROXY&&W(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.o_()},0),$}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function yl(){return typeof document<"u"?document:null}function $c(n){return new Jl(n,!0)}var Tc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Bm="PersistentStream",bc=class{constructor(e,t,r,i,o,c,h,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Tc(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return D(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return D(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return D(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new K(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>D(this,null,function*(){this.state=0,this.start()}))}G_(e){return W(Bm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(W(Bm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Nh=class extends bc{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=AT(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let c=o.targetChange;return c.targetIds&&c.targetIds.length?se.min():c.readTime?_n(c.readTime):se.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=nh(this.serializer),t.addTarget=function(o,c){let h,f=c.target;if(h=Bl(f)?{documents:PT(o,f)}:{query:RT(o,f).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=qg(o,c.resumeToken);let m=Zl(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(se.min())>0){h.readTime=_c(o,c.snapshotVersion.toTimestamp());let m=Zl(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=DT(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=nh(this.serializer),t.removeTarget=e,this.k_(t)}},Oh=class extends bc{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=CT(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=nh(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ST(this.serializer,r))};this.k_(t)}};var xh=class{},Vh=class extends xh{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,eh(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(e,eh(t,r),i,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new K(M.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Lh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qn(t),this._a=!1):W("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var wi="RemoteStore",Mh=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(()=>D(this,null,function*(){Ii(this)&&(W(wi,"Restarting streams for network reachability change."),yield function(f){return D(this,null,function*(){let m=ie(f);m.Ia.add(4),yield Fo(m),m.Aa.set("Unknown"),m.Ia.delete(4),yield Bc(m)})}(this))}))}),this.Aa=new Lh(r,i)}};function Bc(n){return D(this,null,function*(){if(Ii(n))for(let e of n.da)yield e(!0)})}function Fo(n){return D(this,null,function*(){for(let e of n.da)yield e(!1)})}function Zg(n,e){let t=ie(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Td(t)?Ed(t):Ts(t).x_()&&Id(t,e))}function wd(n,e){let t=ie(n),r=Ts(t);t.Ta.delete(e),r.x_()&&e_(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ii(t)&&t.Aa.set("Unknown"))}function Id(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ts(n).H_(e)}function e_(n,e){n.Ra.$e(e),Ts(n).Y_(e)}function Ed(n){n.Ra=new Xl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ts(n).start(),n.Aa.aa()}function Td(n){return Ii(n)&&!Ts(n).M_()&&n.Ta.size>0}function Ii(n){return ie(n).Ia.size===0}function t_(n){n.Ra=void 0}function KT(n){return D(this,null,function*(){n.Aa.set("Online")})}function QT(n){return D(this,null,function*(){n.Ta.forEach((e,t)=>{Id(n,e)})})}function YT(n,e){return D(this,null,function*(){t_(n),Td(n)?(n.Aa.la(e),Ed(n)):n.Aa.set("Unknown")})}function XT(n,e,t){return D(this,null,function*(){if(n.Aa.set("Online"),e instanceof mc&&e.state===2&&e.cause)try{yield function(i,o){return D(this,null,function*(){let c=o.cause;for(let h of o.targetIds)i.Ta.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.Ta.delete(h),i.Ra.removeTarget(h))})}(n,e)}catch(r){W(wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ac(n,r)}else if(e instanceof is?n.Ra.Ye(e):e instanceof pc?n.Ra.it(e):n.Ra.et(e),!t.isEqual(se.min()))try{let r=yield Jg(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){let h=o.Ra.Pt(c);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){let y=o.Ta.get(m);y&&o.Ta.set(m,y.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach((f,m)=>{let y=o.Ta.get(f);if(!y)return;o.Ta.set(f,y.withResumeToken(ut.EMPTY_BYTE_STRING,y.snapshotVersion)),e_(o,f);let b=new No(y.target,f,m,y.sequenceNumber);Id(o,b)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){W(wi,"Failed to raise snapshot:",r),yield Ac(n,r)}})}function Ac(n,e,t){return D(this,null,function*(){if(!Es(e))throw e;n.Ia.add(1),yield Fo(n),n.Aa.set("Offline"),t||(t=()=>Jg(n.localStore)),n.asyncQueue.enqueueRetryable(()=>D(null,null,function*(){W(wi,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Bc(n)}))})}function n_(n,e){return e().catch(t=>Ac(n,t,e))}function jc(n){return D(this,null,function*(){let e=ie(n),t=Ar(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ud;for(;JT(e);)try{let i=yield zT(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,ZT(e,i)}catch(i){yield Ac(e,i)}r_(e)&&i_(e)})}function JT(n){return Ii(n)&&n.Pa.length<10}function ZT(n,e){n.Pa.push(e);let t=Ar(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function r_(n){return Ii(n)&&!Ar(n).M_()&&n.Pa.length>0}function i_(n){Ar(n).start()}function eb(n){return D(this,null,function*(){Ar(n).na()})}function tb(n){return D(this,null,function*(){let e=Ar(n);for(let t of n.Pa)e.X_(t.mutations)})}function nb(n,e,t){return D(this,null,function*(){let r=n.Pa.shift(),i=Gl.from(r,e,t);yield n_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jc(n)})}function rb(n,e){return D(this,null,function*(){e&&Ar(n).Z_&&(yield function(r,i){return D(this,null,function*(){if(function(c){return yT(c)&&c!==M.ABORTED}(i.code)){let o=r.Pa.shift();Ar(r).N_(),yield n_(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield jc(r)}})}(n,e)),r_(n)&&i_(n)})}function jm(n,e){return D(this,null,function*(){let t=ie(n);t.asyncQueue.verifyOperationInProgress(),W(wi,"RemoteStore received new credentials");let r=Ii(t);t.Ia.add(3),yield Fo(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Bc(t)})}function ib(n,e){return D(this,null,function*(){let t=ie(n);e?(t.Ia.delete(2),yield Bc(t)):e||(t.Ia.add(2),yield Fo(t),t.Aa.set("Unknown"))})}function Ts(n){return n.Va||(n.Va=function(t,r,i){let o=ie(t);return o.ia(),new Nh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:KT.bind(null,n),e_:QT.bind(null,n),n_:YT.bind(null,n),J_:XT.bind(null,n)}),n.da.push(e=>D(null,null,function*(){e?(n.Va.N_(),Td(n)?Ed(n):n.Aa.set("Unknown")):(yield n.Va.stop(),t_(n))}))),n.Va}function Ar(n){return n.ma||(n.ma=function(t,r,i){let o=ie(t);return o.ia(),new Oh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:eb.bind(null,n),n_:rb.bind(null,n),ea:tb.bind(null,n),ta:nb.bind(null,n)}),n.da.push(e=>D(null,null,function*(){e?(n.ma.N_(),yield jc(n)):(yield n.ma.stop(),n.Pa.length>0&&(W(wi,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var Fh=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let c=Date.now()+r,h=new n(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bd(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Es(n))return new K(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Sc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=wo(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Cc=class{constructor(){this.fa=new Le(X.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Y(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},gs=class n{constructor(e,t,r,i,o,c,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){let c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new n(e,t,Sc.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Uh=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},$h=class{constructor(){this.queries=qm(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ie(t),o=i.queries;i.queries=qm(),o.forEach((c,h)=>{for(let f of h.wa)f.onError(r)})})(this,new K(M.ABORTED,"Firestore shutting down"))}};function qm(){return new Jn(n=>Rg(n),Fc)}function sb(n,e){return D(this,null,function*(){let t=ie(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Uh,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(c){let h=bd(c,`Initialization of query '${es(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Ad(t)})}function ob(n,e){return D(this,null,function*(){let t=ie(n),r=e.query,i=3,o=t.queries.get(r);if(o){let c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ab(n,e){let t=ie(n),r=!1;for(let i of e){let o=i.query,c=t.queries.get(o);if(c){for(let h of c.wa)h.Ca(i)&&(r=!0);c.ya=i}}r&&Ad(t)}function cb(n,e,t){let r=ie(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Ad(n){n.Da.forEach(e=>{e.next()})}var Bh,zm;(zm=Bh||(Bh={})).Fa="default",zm.Cache="cache";var jh=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Bh.Cache}};var Pc=class{constructor(e){this.key=e}},Rc=class{constructor(e){this.key=e}},qh=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=kg(e),this.eu=new Sc(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Cc,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1,f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,b)=>{let E=i.get(y),x=Uc(this.query,b)?b:null,$=!!E&&this.mutatedKeys.has(E.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations),U=!1;E&&x?E.data.isEqual(x.data)?$!==q&&(r.track({type:3,doc:x}),U=!0):this.iu(E,x)||(r.track({type:2,doc:x}),U=!0,(f&&this.Xa(x,f)>0||m&&this.Xa(x,m)<0)&&(h=!0)):!E&&x?(r.track({type:0,doc:x}),U=!0):E&&!x&&(r.track({type:1,doc:E}),U=!0,(f||m)&&(h=!0)),U&&(x?(c=c.add(x),o=q?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){let y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:h,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let c=e.ru.pa();c.sort((y,b)=>function(x,$){let q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{At:U})}};return q(x)-q($)}(y.type,b.type)||this.Xa(y.doc,b.doc)),this.su(r),i=i!=null&&i;let h=t&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,m=f!==this.Ya;return this.Ya=f,c.length!==0||m?{snapshot:new gs(this.query,e.eu,o,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Cc,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Rc(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Pc(r))}),t}uu(e){this.Ha=e.qs,this.Za=fe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return gs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Sd="SyncEngine",zh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Wh=class{constructor(e){this.key=e,this.lu=!1}},Hh=class{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Jn(h=>Rg(h),Fc),this.Tu=new Map,this.Iu=new Set,this.du=new Le(X.comparator),this.Eu=new Map,this.Au=new xo,this.Ru={},this.Vu=new Map,this.mu=Oo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function ub(n,e,t=!0){return D(this,null,function*(){let r=l_(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield s_(r,e,t,!0),i})}function lb(n,e){return D(this,null,function*(){let t=l_(n);yield s_(t,e,!0,!1)})}function s_(n,e,t,r){return D(this,null,function*(){let i=yield WT(n.localStore,gn(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t),h;return r&&(h=yield hb(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&Zg(n.remoteStore,i),h})}function hb(n,e,t,r,i){return D(this,null,function*(){n.gu=(b,E,x)=>function(q,U,ce,Z){return D(this,null,function*(){let oe=U.view.nu(ce);oe.Ds&&(oe=yield Um(q.localStore,U.query,!1).then(({documents:S})=>U.view.nu(S,oe)));let we=Z&&Z.targetChanges.get(U.targetId),st=Z&&Z.targetMismatches.get(U.targetId)!=null,ge=U.view.applyChanges(oe,q.isPrimaryClient,we,st);return Hm(q,U.targetId,ge._u),ge.snapshot})}(n,b,E,x);let o=yield Um(n.localStore,e,!0),c=new qh(e,o.qs),h=c.nu(o.documents),f=Do.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(h,n.isPrimaryClient,f);Hm(n,t,m._u);let y=new zh(e,t,c);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot})}function db(n,e,t){return D(this,null,function*(){let r=ie(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(c=>!Fc(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&wd(r.remoteStore,i.targetId),Gh(r,i.targetId)}).catch(Is))):(Gh(r,i.targetId),yield Ah(r.localStore,i.targetId,!0))})}function fb(n,e){return D(this,null,function*(){let t=ie(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wd(t.remoteStore,r.targetId))})}function pb(n,e,t){return D(this,null,function*(){let r=Ib(n);try{let i=yield function(c,h){let f=ie(c),m=He.now(),y=h.reduce((x,$)=>x.add($.key),fe()),b,E;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let $=Zn(),q=fe();return f.Os.getEntries(x,y).next(U=>{$=U,$.forEach((ce,Z)=>{Z.isValidDocument()||(q=q.add(ce))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,$)).next(U=>{b=U;let ce=[];for(let Z of h){let oe=_T(Z,b.get(Z.key).overlayedDocument);oe!=null&&ce.push(new wn(Z.key,oe,Tg(oe.value.mapValue),vr.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,ce,h)}).next(U=>{E=U;let ce=U.applyToLocalDocumentSet(b,q);return f.documentOverlayCache.saveOverlays(x,U.batchId,ce)})}).then(()=>({batchId:E.batchId,changes:Ng(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,f){let m=c.Ru[c.currentUser.toKey()];m||(m=new Le(le)),m=m.insert(h,f),c.Ru[c.currentUser.toKey()]=m}(r,i.batchId,t),yield Uo(r,i.changes),yield jc(r.remoteStore)}catch(i){let o=bd(i,"Failed to persist write");t.reject(o)}})}function o_(n,e){return D(this,null,function*(){let t=ie(n);try{let r=yield jT(t.localStore,e);e.targetChanges.forEach((i,o)=>{let c=t.Eu.get(o);c&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?ve(c.lu,14607):i.removedDocuments.size>0&&(ve(c.lu,42227),c.lu=!1))}),yield Uo(t,r,e)}catch(r){yield Is(r)}})}function Wm(n,e,t){let r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,c)=>{let h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){let f=ie(c);f.onlineState=h;let m=!1;f.queries.forEach((y,b)=>{for(let E of b.wa)E.va(h)&&(m=!0)}),m&&Ad(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mb(n,e,t){return D(this,null,function*(){let r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let c=new Le(X.comparator);c=c.insert(o,Yt.newNoDocument(o,se.min()));let h=fe().add(o),f=new fc(se.min(),new Map,new Le(le),c,h);yield o_(r,f),r.du=r.du.remove(o),r.Eu.delete(e),Cd(r)}else yield Ah(r.localStore,e,!1).then(()=>Gh(r,e,t)).catch(Is)})}function gb(n,e){return D(this,null,function*(){let t=ie(n),r=e.batch.batchId;try{let i=yield BT(t.localStore,e);c_(t,r,null),a_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Uo(t,i)}catch(i){yield Is(i)}})}function _b(n,e,t){return D(this,null,function*(){let r=ie(n);try{let i=yield function(c,h){let f=ie(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next(b=>(ve(b!==null,37113),y=b.keys(),f.mutationQueue.removeMutationBatch(m,b))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(r.localStore,e);c_(r,e,t),a_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Uo(r,i)}catch(i){yield Is(i)}})}function a_(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function c_(n,e,t){let r=ie(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Gh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||u_(n,r)})}function u_(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(wd(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Cd(n))}function Hm(n,e,t){for(let r of t)r instanceof Pc?(n.Au.addReference(r.key,e),yb(n,r)):r instanceof Rc?(W(Sd,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||u_(n,r.key)):Y(19791,{yu:r})}function yb(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(W(Sd,"New document in limbo: "+t),n.Iu.add(r),Cd(n))}function Cd(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new X(Be.fromString(e)),r=n.mu.next();n.Eu.set(r,new Wh(t)),n.du=n.du.insert(t,r),Zg(n.remoteStore,new No(gn(gd(t.path)),r,"TargetPurposeLimboResolution",cd.ue))}}function Uo(n,e,t){return D(this,null,function*(){let r=ie(n),i=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{c.push(r.gu(f,e,t).then(m=>{var y;if((m||t)&&r.isPrimaryClient){let b=m?!m.fromCache:(y=t?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(m){i.push(m);let b=Ih.Es(f.targetId,m);o.push(b)}}))}),yield Promise.all(c),r.hu.J_(i),yield function(f,m){return D(this,null,function*(){let y=ie(f);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>F.forEach(m,E=>F.forEach(E.Is,x=>y.persistence.referenceDelegate.addReference(b,E.targetId,x)).next(()=>F.forEach(E.ds,x=>y.persistence.referenceDelegate.removeReference(b,E.targetId,x)))))}catch(b){if(!Es(b))throw b;W(vd,"Failed to update sequence numbers: "+b)}for(let b of m){let E=b.targetId;if(!b.fromCache){let x=y.Fs.get(E),$=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion($);y.Fs=y.Fs.insert(E,q)}}})}(r.localStore,o))})}function vb(n,e){return D(this,null,function*(){let t=ie(n);if(!t.currentUser.isEqual(e)){W(Sd,"User change. New user:",e.toKey());let r=yield Xg(t.localStore,e);t.currentUser=e,function(o,c){o.Vu.forEach(h=>{h.forEach(f=>{f.reject(new K(M.CANCELLED,c))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uo(t,r.Bs)}})}function wb(n,e){let t=ie(n),r=t.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=t.Tu.get(e);if(!o)return i;for(let c of o){let h=t.Pu.get(c);i=i.unionWith(h.view.tu)}return i}}function l_(n){let e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mb.bind(null,e),e.hu.J_=ab.bind(null,e.eventManager),e.hu.pu=cb.bind(null,e.eventManager),e}function Ib(n){let e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_b.bind(null,e),e}var h_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=$c(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return $T(this.persistence,new Th,t.initialUser,this.serializer)}Du(t){return new vc(wh.Vi,this.serializer)}bu(t){return new Sh}terminate(){return D(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Kh=class extends h_{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ve(this.persistence.referenceDelegate instanceof wc,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new ah(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new vc(r=>wc.Vi(r,t),this.serializer)}};var Eb=(()=>{class n{initialize(t,r){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vb.bind(null,this.syncEngine),yield ib(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new $h}()}createDatastore(t){let r=$c(t.databaseInfo.databaseId),i=function(c){return new Dh(c)}(t.databaseInfo);return function(c,h,f,m){return new Vh(c,h,f,m)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,c,h,f){return new Mh(i,o,c,h,f)}(this.localStore,this.datastore,t.asyncQueue,r=>Wm(this.syncEngine,r,0),function(){return Ec.C()?new Ec:new Ch}())}createSyncEngine(t,r){return function(o,c,h,f,m,y,b){let E=new Hh(o,c,h,f,m,y);return b&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return D(this,null,function*(){var t,r;yield function(o){return D(this,null,function*(){let c=ie(o);W(wi,"RemoteStore shutting down."),c.Ia.add(5),yield Fo(c),c.Ea.shutdown(),c.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Qh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Sr="FirestoreClient",Yh=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=So.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,c=>D(this,null,function*(){W(Sr,"Received user=",c.uid),yield this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,c=>(W(Sr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bd(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function vl(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W(Sr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>D(null,null,function*(){r.isEqual(i)||(yield Xg(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Tr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{W("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Tr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Gm(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Tb(n);W(Sr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jm(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jm(e.remoteStore,i)),n._onlineComponents=e})}function Tb(n){return D(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Sr,"Using user provided OfflineComponentProvider");try{yield vl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Tr("Error using user provided cache. Falling back to memory cache: "+t),yield vl(n,new h_)}}else W(Sr,"Using default OfflineComponentProvider"),yield vl(n,new Kh(void 0));return n._offlineComponents})}function d_(n){return D(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Sr,"Using user provided OnlineComponentProvider"),yield Gm(n,n._uninitializedComponentsProvider._online)):(W(Sr,"Using default OnlineComponentProvider"),yield Gm(n,new Eb))),n._onlineComponents})}function bb(n){return d_(n).then(e=>e.syncEngine)}function Ab(n){return D(this,null,function*(){let e=yield d_(n),t=e.eventManager;return t.onListen=ub.bind(null,e.syncEngine),t.onUnlisten=db.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fb.bind(null,e.syncEngine),t})}function Sb(n,e,t={}){let r=new pn;return n.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return function(o,c,h,f,m){let y=new Qh({next:E=>{y.Ou(),c.enqueueAndForget(()=>ob(o,b));let x=E.docs.has(h);!x&&E.fromCache?m.reject(new K(M.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&E.fromCache&&f&&f.source==="server"?m.reject(new K(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),b=new jh(gd(h.path),y,{includeMetadataChanges:!0,ka:!0});return sb(o,b)}(yield Ab(n),n.asyncQueue,e,t,r)})),r.promise}function f_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Km=new Map;var p_="firestore.googleapis.com",Qm=!0,kc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p_,this.ssl=Qm}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Qm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MT)throw new K(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Vo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wl;switch(r.type){case"firstParty":return new bl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return D(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Km.get(t);r&&(W("ComponentProvider","Removing Datastore"),Km.delete(t),r.terminate())}(this),Promise.resolve()}};function m_(n,e,t,r={}){var i;n=pi(n,Vo);let o=Zr(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;o&&(Au(`https://${f}`),Su("Firestore",!0)),c.host!==p_&&c.host!==f&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let m=Object.assign(Object.assign({},c),{host:f,ssl:o,emulatorOptions:r});if(!ei(m,h)&&(n._setSettings(m),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=rt.MOCK_USER;else{y=ap(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new K(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new rt(E)}n._authCredentials=new Il(new ic(y,b))}}var Xh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Mo(t,n._jsonSchema))return new n(e,r||null,new X(Be.fromString(t.referencePath)))}};ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:We("string",ct._jsonSchemaVersion),referencePath:We("string")};var Lo=class n extends Xh{constructor(e,t,r){super(e,t,gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function g_(n,e,...t){if(n=_t(n),arguments.length===1&&(e=So.newId()),xE("doc","path",e),n instanceof Vo){let r=Be.fromString(e,...t);return pm(r),new ct(n,null,new X(r))}{if(!(n instanceof ct||n instanceof Lo))throw new K(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return pm(r),new ct(n.firestore,n instanceof Lo?n.converter:null,new X(r))}}var Ym="AsyncQueue",Dc=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Tc(this,"async_queue_retry"),this.oc=()=>{let r=yl();r&&W(Ym,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=yl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=yl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new pn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return D(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Es(e))throw e;W(Ym,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Qn("INTERNAL UNHANDLED ERROR: ",Xm(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Fh.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Y(47125,{hc:Xm(this.tc)})}verifyOperationInProgress(){}Pc(){return D(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Xm(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var _s=class extends Vo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dc,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return D(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Dc(e),this._firestoreClient=void 0,yield e}})}};function __(n,e){let t=typeof n=="object"?n:Qi(),r=typeof n=="string"?n:e||uc,i=Na(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=sp("firestore");o&&m_(i,...o)}return i}function y_(n){if(n._terminated)throw new K(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cb(n),n._firestoreClient}function Cb(n){var e,t,r;let i=n._freezeSettings(),o=function(h,f,m,y){return new Rl(h,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,f_(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Yh(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){let f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}var wr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ut.fromBase64String(e))}catch(t){throw new K(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mo(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};wr._jsonSchemaVersion="firestore/bytes/1.0",wr._jsonSchema={type:We("string",wr._jsonSchemaVersion),bytes:We("string")};var ys=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vs=class{constructor(e){this._methodName=e}};var Ir=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Mo(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:We("string",Ir._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};var Er=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mo(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:We("string",Er._jsonSchemaVersion),vectorValues:We("object")};var Pb=/^__.*__$/,Jh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new vi(e,this.data,t,this.fieldTransforms)}},Nc=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function v_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ec:n})}}var Zh=class n{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(v_(this.Ec)&&Pb.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},ed=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$c(e)}Dc(e,t,r,i=!1){return new Zh({Ec:e,methodName:t,bc:r,path:Tt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function w_(n){let e=n._freezeSettings(),t=$c(n._databaseId);return new ed(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Rb(n,e,t,r,i,o={}){let c=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);Pd("Data must be an object, but it was:",c,r);let h=I_(r,c),f,m;if(o.merge)f=new Ft(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){let y=[];for(let b of o.mergeFields){let E=nd(e,b,t);if(!c.contains(E))throw new K(M.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);T_(y,E)||y.push(E)}f=new Ft(y),m=c.fieldTransforms.filter(b=>f.covers(b.field))}else f=null,m=c.fieldTransforms;return new Jh(new Et(h),f,m)}var Oc=class n extends vs{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var td=class n extends vs{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new yi(e.serializer,Vg(e.serializer,this.Cc));return new ql(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function kb(n,e,t,r){let i=n.Dc(1,e,t);Pd("Data must be an object, but it was:",i,r);let o=[],c=Et.empty();Cr(r,(f,m)=>{let y=Rd(e,f,t);m=_t(m);let b=i.gc(y);if(m instanceof Oc)o.push(y);else{let E=qc(m,b);E!=null&&(o.push(y),c.set(y,E))}});let h=new Ft(o);return new Nc(c,h,i.fieldTransforms)}function Db(n,e,t,r,i,o){let c=n.Dc(1,e,t),h=[nd(e,r,t)],f=[i];if(o.length%2!=0)throw new K(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(nd(e,o[E])),f.push(o[E+1]);let m=[],y=Et.empty();for(let E=h.length-1;E>=0;--E)if(!T_(m,h[E])){let x=h[E],$=f[E];$=_t($);let q=c.gc(x);if($ instanceof Oc)m.push(x);else{let U=qc($,q);U!=null&&(m.push(x),y.set(x,U))}}let b=new Ft(m);return new Nc(y,b,c.fieldTransforms)}function qc(n,e){if(E_(n=_t(n)))return Pd("Unsupported field value:",e,n),I_(n,e);if(n instanceof vs)return function(r,i){if(!v_(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],c=0;for(let h of r){let f=qc(h,i.yc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vg(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=He.fromDate(r);return{timestampValue:_c(i.serializer,o)}}if(r instanceof He){let o=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(i.serializer,o)}}if(r instanceof Ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wr)return{bytesValue:qg(i.serializer,r._byteString)};if(r instanceof ct){let o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Er)return function(c,h){return{mapValue:{fields:{[hd]:{stringValue:dd},[as]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return _d(h.serializer,m)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ad(r)}`)}(n,e)}function I_(n,e){let t={};return mg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cr(n,(r,i)=>{let o=qc(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function E_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof Ir||n instanceof wr||n instanceof ct||n instanceof vs||n instanceof Er)}function Pd(n,e,t){if(!E_(t)||!eg(t)){let r=ad(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function nd(n,e,t){if((e=_t(e))instanceof ys)return e._internalPath;if(typeof e=="string")return Rd(n,e);throw xc("Field path arguments must be of type string or ",n,!1,void 0,t)}var Nb=new RegExp("[~\\*/\\[\\]]");function Rd(n,e,t){if(e.search(Nb)>=0)throw xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ys(...e.split("."))._internalPath}catch{throw xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xc(n,e,t,r,i){let o=r&&!r.isEmpty(),c=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new K(M.INVALID_ARGUMENT,h+n+f)}function T_(n,e){return n.some(t=>t.isEqual(e))}var Vc=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(b_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rd=class extends Vc{data(){return super.data()}};function b_(n,e){return typeof e=="string"?Rd(n,e):e instanceof ys?e._internalPath:e._delegate._internalPath}var id=class{convertValue(e,t="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Cr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[as].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>ke(c.doubleValue));return new Er(o)}convertGeoPoint(e){return new Ir(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Mc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){let t=Yn(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);ve(Qg(r),9688,{name:e});let i=new lc(r.get(1),r.get(3)),o=new X(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ob(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var hi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},di=class n extends Vc{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(b_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:We("string",di._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};var ss=class extends di{data(e={}){return super.data(e)}},Ao=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ss(this._firestore,this._userDataWriter,r.key,r,new hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{let f=new ss(i._firestore,i._userDataWriter,h.doc.key,h.doc,new hi(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{let f=new ss(i._firestore,i._userDataWriter,h.doc.key,h.doc,new hi(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,y=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:xb(h.type),doc:f,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=So.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function xb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:n})}}function A_(n){n=pi(n,ct);let e=pi(n.firestore,_s);return Sb(y_(e),n._key).then(t=>Vb(e,n,t))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:We("string",Ao._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};var sd=class extends id{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function S_(n,e,t){n=pi(n,ct);let r=pi(n.firestore,_s),i=Ob(n.converter,e,t);return P_(r,[Rb(w_(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,vr.none())])}function C_(n,e,t,...r){n=pi(n,ct);let i=pi(n.firestore,_s),o=w_(i),c;return c=typeof(e=_t(e))=="string"||e instanceof ys?Db(o,"updateDoc",n._key,e,t,r):kb(o,"updateDoc",n._key,e),P_(i,[c.toMutation(n._key,vr.exists(!0))])}function P_(n,e){return function(r,i){let o=new pn;return r.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return pb(yield bb(r),i,o)})),o.promise}(y_(n),e)}function Vb(n,e,t){let r=t.docs.get(e._key),i=new sd(n);return new di(n,i,e._key,r,new hi(t.hasPendingWrites,t.fromCache),e.converter)}function R_(n){return new td("increment",n)}(function(e,t=!0){(function(i){ws=i})(Ki),Gt(new gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let c=r.getProvider("app").getImmediate(),h=new _s(new El(r.getProvider("auth-internal")),new Al(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new K(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(m.options.projectId,y)}(c,i),c);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),$e(lm,hm,e),$e(lm,hm,"esm2017")})();var Ei=class{constructor(e){return e}},k_="firestore",kd=class{constructor(){return Xi(k_)}};var Dd=new Ea("angularfire2.firestore-instances");function Lb(n,e){let t=Va(k_,n,e);return t&&new Ei(t)}function Mb(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ei(r)}}var Fb={provide:kd,deps:[[new fr,Dd]]},Ub={provide:Ei,useFactory:Lb,deps:[[new fr,Dd],si]};function D_(n,...e){return $e("angularfire",ri.full,"fst"),Ta([Ub,Fb,{provide:Dd,useFactory:Mb(n),multi:!0,deps:[pr,Hi,ii,ho,[new fr,Qa],[new fr,Ma],...e]}])}var $o=Kt(g_,!0,2);var Bo=Kt(A_,!0);var N_=Kt(__,!0);var Nd=Kt(R_,!0,2);var Od=Kt(S_,!0,2);var xd=Kt(C_,!0,2);var O_={production:!1,firebaseConfig:{apiKey:"AIzaSyDmWiOvrg11lQAWn10gKGaJWE17fbW6emM",authDomain:"krishnaspeaks-in.firebaseapp.com",projectId:"krishnaspeaks-in",storageBucket:"krishnaspeaks-in.firebasestorage.app",messagingSenderId:"725102401982",appId:"1:725102401982:web:eb787bd1e0233711ee81ef"}};var x_={providers:[Op(()=>xp(O_.firebaseConfig)),D_(()=>N_()),Rf(),Uf({eventCoalescing:!0}),Jf([{path:"",loadComponent:()=>import("./chunk-QYLSPYYR.js").then(n=>n.Home)},{path:"about",loadComponent:()=>import("./chunk-ZOBBOHQS.js").then(n=>n.About)},{path:"portfolio",loadComponent:()=>import("./chunk-72DV66EE.js").then(n=>n.Portfolio)},{path:"blog",loadComponent:()=>import("./chunk-NJNXGFI5.js").then(n=>n.Blog)},{path:"blog/:slug",loadComponent:()=>import("./chunk-NJNXGFI5.js").then(n=>n.Blog)},{path:"stories",loadComponent:()=>import("./chunk-KG4RA5RC.js").then(n=>n.Stories)},{path:"stories/:slug",loadComponent:()=>import("./chunk-KG4RA5RC.js").then(n=>n.Stories)},{path:"contact",loadComponent:()=>import("./chunk-RV6HCXRN.js").then(n=>n.Contact)},{path:"gallery",loadComponent:()=>import("./chunk-GC5IEZP5.js").then(n=>n.Gallery)},{path:"hi",loadComponent:()=>import("./chunk-VUACO6KU.js").then(n=>n.Hi)},{path:"**",redirectTo:""}])]};var V_={buildDate:"2025-12-14T00:27:28.946Z"};var zc=class n{constructor(e){this.firestore=e}incrementGlobalView(){return D(this,null,function*(){let e=$o(this.firestore,"views/global");(yield Bo(e)).exists()?yield xd(e,{count:Nd(1)}):yield Od(e,{count:1})})}getGlobalView(){return D(this,null,function*(){let e=yield Bo($o(this.firestore,"views/global"));return e.exists()?e.data().count:0})}incrementPageView(e){return D(this,null,function*(){let t=$o(this.firestore,"pageViews",e);(yield Bo(t)).exists()?yield xd(t,{count:Nd(1)}):yield Od(t,{count:1})})}getPageView(e){return D(this,null,function*(){let t=yield Bo($o(this.firestore,"pageViews",e));return t.exists()?t.data().count:0})}static \u0275fac=function(t){return new(t||n)(Cf(Ei))};static \u0275prov=Ia({token:n,factory:n.\u0275fac,providedIn:"root"})};var L_=(n,e)=>({"bg-dark text-light":n,"bg-light text-dark":e}),jb=n=>({color:n}),qb=(n,e)=>({"navbar-dark bg-dark":n,"navbar-light bg-light":e});function zb(n,e){if(n&1&&(Fe(0,"aside",37),hn(1,"i",38),mt(2),Ue()),n&2){let t=xf();ln(2),so(" ",t.pageViewCount," ")}}var Wc=class n{constructor(e,t){this.router=e;this.viewCounter=t}title=_u("KrishnaSpeaksIN");isDarkMode=!1;currentYear=new Date().getFullYear();buildDate=new Date(V_.buildDate);viewCount=null;pageViewCount=null;currentPageId="";toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("bg-dark",this.isDarkMode),document.body.classList.toggle("text-light",this.isDarkMode)}ngOnInit(){return D(this,null,function*(){sessionStorage.getItem("globalViewCounted")||(yield this.viewCounter.incrementGlobalView(),sessionStorage.setItem("globalViewCounted","true")),this.viewCount=yield this.viewCounter.getGlobalView(),yield this.updatePageView(this.router.url),this.router.events.pipe(Sf(e=>e instanceof Kf)).subscribe(e=>D(this,null,function*(){window.scrollTo({top:0,behavior:"smooth"}),yield this.updatePageView(e.urlAfterRedirects)}))})}updatePageView(e){return D(this,null,function*(){let t=this.normalizePageId(e);if(this.currentPageId=t,t==="home"){this.pageViewCount=null;return}let r=`viewed_${t}`;sessionStorage.getItem(r)||(yield this.viewCounter.incrementPageView(t),sessionStorage.setItem(r,"true")),this.pageViewCount=yield this.viewCounter.getPageView(t)})}normalizePageId(e){let t=e.split("?")[0].replace(/^\/+/,"").replace(/\/+$/,"").toLowerCase();return t||(t="home"),t.replace(/\//g,"_")}static \u0275fac=function(t){return new(t||n)(yu(Yf),yu(zc))};static \u0275cmp=Df({type:n,selectors:[["app-root"]],decls:61,vars:26,consts:[["navbarCollapse",""],[1,"d-flex","flex-column","min-vh-100"],[1,"d-flex","justify-content-between","align-items-center","px-3","py-2","border-bottom",3,"ngClass"],[1,"d-flex","gap-3"],["href","https://github.com/krishnapandeykp","target","_blank","rel","noopener","title","GitHub"],[1,"fab","fa-github",2,"font-size","1.25rem"],["href","https://www.linkedin.com/in/realkrishnapandey","target","_blank","rel","noopener","title","LinkedIn"],[1,"fab","fa-linkedin",2,"font-size","1.25rem","color","#0A66C2"],["href","https://www.facebook.com/krishnapandeyrtist","target","_blank","rel","noopener","title","Facebook"],[1,"fab","fa-facebook",2,"font-size","1.25rem","color","#1877F2"],["href","https://www.instagram.com/rtist__krishna_","target","_blank","rel","noopener","title","Instagram"],[1,"fab","fa-instagram",2,"font-size","1.25rem","color","#E1306C"],[1,"d-flex","align-items-center","gap-3"],["title","Toggle Dark Mode",1,"fas",2,"cursor","pointer","font-size","1.25rem",3,"click","ngStyle"],[1,"navbar","navbar-expand-lg",3,"ngClass"],[1,"container-fluid","px-3"],["routerLink","/",1,"navbar-brand"],["src","assets/image/KrishnaSpeaksIN.png","alt","KrishnaSpeaks Logo","height","80",1,"mx-md-2","img-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","fw-semibold"],[1,"nav-item"],["routerLink","/",1,"nav-link",3,"click"],["routerLink","/about",1,"nav-link",3,"click"],["routerLink","/portfolio",1,"nav-link",3,"click"],["routerLink","/blog",1,"nav-link",3,"click"],["routerLink","/stories",1,"nav-link",3,"click"],["routerLink","/contact",1,"nav-link",3,"click"],["routerLink","/gallery",1,"nav-link",3,"click"],[1,"flex-grow-1"],["class","position-fixed rounded-pill px-3 py-2 d-flex align-items-center shadow","style","z-index: 1000; bottom: 90px; background-color: rgba(255, 255, 255, 0.85); color: #000;",4,"ngIf"],["role","contentinfo",1,"text-center","py-3","border-top",3,"ngClass"],[1,"container"],[1,"fw-semibold","fs-5","mb-1"],[1,"small"],["aria-hidden","true",1,"fas","fa-eye"],[1,"position-fixed","rounded-pill","px-3","py-2","d-flex","align-items-center","shadow",2,"z-index","1000","bottom","90px","background-color","rgba(255, 255, 255, 0.85)","color","#000"],["aria-hidden","true",1,"fas","fa-eye","me-2"]],template:function(t,r){if(t&1){let i=Of();Fe(0,"div",1)(1,"div",2)(2,"div",3)(3,"a",4),hn(4,"i",5),Ue(),Fe(5,"a",6),hn(6,"i",7),Ue(),Fe(7,"a",8),hn(8,"i",9),Ue(),Fe(9,"a",10),hn(10,"i",11),Ue()(),Fe(11,"div",12)(12,"i",13),zn("click",function(){return jn(i),qn(r.toggleDarkMode())}),Ue()()(),Fe(13,"nav",14)(14,"div",15)(15,"a",16),hn(16,"img",17),Ue(),Fe(17,"button",18),hn(18,"span",19),Ue(),Fe(19,"div",20,0)(21,"ul",21)(22,"li",22)(23,"a",23),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(24,"Home"),Ue()(),Fe(25,"li",22)(26,"a",24),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(27,"About"),Ue()(),Fe(28,"li",22)(29,"a",25),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(30,"Portfolio"),Ue()(),Fe(31,"li",22)(32,"a",26),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(33,"Blogs"),Ue()(),Fe(34,"li",22)(35,"a",27),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(36,"Stories"),Ue()(),Fe(37,"li",22)(38,"a",28),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(39,"Contact"),Ue()(),Fe(40,"li",22)(41,"a",29),zn("click",function(){jn(i);let c=mr(20);return qn(c.classList.remove("show"))}),mt(42,"Gallery"),Ue()()()()()(),Fe(43,"main",30),hn(44,"router-outlet"),Ue(),Nf(45,zb,3,1,"aside",31),Fe(46,"footer",32)(47,"div",33)(48,"div",34),mt(49,"KrishnaSpeaks.IN"),Ue(),Fe(50,"div",35),mt(51),Ue(),Fe(52,"div",35),mt(53," Total Views: "),hn(54,"i",36),mt(55),Fe(56,"em")(57,"b"),mt(58,"Last Update:"),Ue(),mt(59),Mf(60,"date"),Ue()()()()()}t&2&&(ln(),Gi("ngClass",Sa(15,L_,r.isDarkMode,!r.isDarkMode)),ln(11),Vf("fa-sun",r.isDarkMode)("fa-moon",!r.isDarkMode),Gi("ngStyle",Lf(18,jb,r.isDarkMode?"yellow":"")),ln(),Gi("ngClass",Sa(20,qb,r.isDarkMode,!r.isDarkMode)),ln(32),Gi("ngIf",r.pageViewCount!==null&&r.currentPageId!=="home"),ln(),Gi("ngClass",Sa(23,L_,r.isDarkMode,!r.isDarkMode)),ln(5),so("\xA9 ",r.currentYear," All rights reserved."),ln(4),so(" ",r.viewCount??"..."," \xA0 | "),ln(4),so(" ",Ff(60,12,r.buildDate,"longDate")))},dependencies:[Hf,jf,qf,zf,Zf,Qf,Xf,Wf],styles:[".navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px}@media (max-width: 992px){.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}}@media (max-width: 576px){.navbar-brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}}.navbar-nav[_ngcontent-%COMP%]{font-size:clamp(1rem,1.2vw,1.5rem)}"]})};var bP=rv(M_());Gf(Wc,x_).catch(n=>console.error(n));
